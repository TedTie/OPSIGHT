import{l as b,g as s,w as r,b as f,a as G,e as U,k as o,f as t,t as i}from"./index-g0Sg6k74.js";import{f as I,c as M,a as S,h as B}from"./auth-CVLHtVZ3.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={name:"PermissionTest",setup(){return{currentUser:G().user,hasPermission:B,canAccessUser:S,canManageGroup:M,formatUserRole:I}}},V={class:"permission-test"},R={key:0},D={key:1},E={key:0},j={key:1},q={key:0},z={key:1};function F(p,l,H,n,J,K){const m=f("v-icon"),v=f("v-card-title"),w=f("v-alert"),d=f("v-chip"),_=f("v-card-text"),k=f("v-card"),a=f("v-col"),x=f("v-row"),A=f("v-btn"),C=f("v-container");return U(),b("div",V,[s(C,null,{default:r(()=>[s(x,null,{default:r(()=>[s(a,{cols:"12"},{default:r(()=>[s(k,null,{default:r(()=>[s(v,null,{default:r(()=>[s(m,{left:""},{default:r(()=>[...l[4]||(l[4]=[o("mdi-shield-check",-1)])]),_:1}),l[5]||(l[5]=o(" 权限系统测试页面 ",-1))]),_:1}),s(_,null,{default:r(()=>[s(w,{type:"info",class:"mb-4"},{default:r(()=>{var u,e,g,y,P;return[l[12]||(l[12]=t("h4",null,"当前用户信息",-1)),t("p",null,[l[6]||(l[6]=t("strong",null,"用户名:",-1)),o(" "+i(((u=n.currentUser)==null?void 0:u.username)||"未登录"),1)]),t("p",null,[l[7]||(l[7]=t("strong",null,"角色:",-1)),o(" "+i(n.formatUserRole(n.currentUser)),1)]),t("p",null,[l[8]||(l[8]=t("strong",null,"是否管理员:",-1)),o(" "+i((e=n.currentUser)!=null&&e.is_admin?"是":"否"),1)]),t("p",null,[l[9]||(l[9]=t("strong",null,"是否超级管理员:",-1)),o(" "+i((g=n.currentUser)!=null&&g.is_super_admin?"是":"否"),1)]),t("p",null,[l[10]||(l[10]=t("strong",null,"身份类型:",-1)),o(" "+i(((y=n.currentUser)==null?void 0:y.identity_type)||"未知"),1)]),t("p",null,[l[11]||(l[11]=t("strong",null,"所属组:",-1)),o(" "+i(((P=n.currentUser)==null?void 0:P.group_name)||"未知"),1)])]}),_:1}),s(x,null,{default:r(()=>[s(a,{cols:"12",md:"4"},{default:r(()=>[s(k,{outlined:""},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:"",color:"red"},{default:r(()=>[...l[13]||(l[13]=[o("mdi-crown",-1)])]),_:1}),l[14]||(l[14]=o(" 超级管理员功能 ",-1))]),_:1}),s(_,null,{default:r(()=>{var u;return[(u=n.currentUser)!=null&&u.is_super_admin?(U(),b("div",R,[s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[15]||(l[15]=[o("✓ 用户管理",-1)])]),_:1}),l[20]||(l[20]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[16]||(l[16]=[o("✓ 组管理",-1)])]),_:1}),l[21]||(l[21]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[17]||(l[17]=[o("✓ AI配置",-1)])]),_:1}),l[22]||(l[22]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[18]||(l[18]=[o("✓ 系统设置",-1)])]),_:1}),l[23]||(l[23]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[19]||(l[19]=[o("✓ 所有数据访问",-1)])]),_:1})])):(U(),b("div",D,[s(d,{color:"error",small:"",class:"mb-2"},{default:r(()=>[...l[24]||(l[24]=[o("✗ 权限不足",-1)])]),_:1})]))]}),_:1})]),_:1})]),_:1}),s(a,{cols:"12",md:"4"},{default:r(()=>[s(k,{outlined:""},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:"",color:"orange"},{default:r(()=>[...l[25]||(l[25]=[o("mdi-account-supervisor",-1)])]),_:1}),l[26]||(l[26]=o(" 管理员功能 ",-1))]),_:1}),s(_,null,{default:r(()=>{var u;return[(u=n.currentUser)!=null&&u.is_admin?(U(),b("div",E,[s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[27]||(l[27]=[o("✓ 组内任务管理",-1)])]),_:1}),l[31]||(l[31]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[28]||(l[28]=[o("✓ 组内用户查看",-1)])]),_:1}),l[32]||(l[32]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[29]||(l[29]=[o("✓ 组分析数据",-1)])]),_:1}),l[33]||(l[33]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[30]||(l[30]=[o("✓ 组报告查看",-1)])]),_:1})])):(U(),b("div",j,[s(d,{color:"error",small:"",class:"mb-2"},{default:r(()=>[...l[34]||(l[34]=[o("✗ 权限不足",-1)])]),_:1})]))]}),_:1})]),_:1})]),_:1}),s(a,{cols:"12",md:"4"},{default:r(()=>[s(k,{outlined:""},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:"",color:"blue"},{default:r(()=>[...l[35]||(l[35]=[o("mdi-account",-1)])]),_:1}),l[36]||(l[36]=o(" 普通用户功能 ",-1))]),_:1}),s(_,null,{default:r(()=>[n.currentUser?(U(),b("div",q,[s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[37]||(l[37]=[o("✓ 个人任务",-1)])]),_:1}),l[41]||(l[41]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[38]||(l[38]=[o("✓ 个人日报",-1)])]),_:1}),l[42]||(l[42]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[39]||(l[39]=[o("✓ 个人分析",-1)])]),_:1}),l[43]||(l[43]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[40]||(l[40]=[o("✓ 基础功能",-1)])]),_:1})])):(U(),b("div",z,[s(d,{color:"error",small:"",class:"mb-2"},{default:r(()=>[...l[44]||(l[44]=[o("✗ 未登录",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1}),s(k,{outlined:"",class:"mt-4"},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:""},{default:r(()=>[...l[45]||(l[45]=[o("mdi-function",-1)])]),_:1}),l[46]||(l[46]=o(" 权限函数测试 ",-1))]),_:1}),s(_,null,{default:r(()=>[s(x,null,{default:r(()=>[s(a,{cols:"12",md:"6"},{default:r(()=>[l[49]||(l[49]=t("h4",null,"hasPermission 函数测试",-1)),t("p",null,[l[47]||(l[47]=o("用户管理权限: ",-1)),s(d,{color:n.hasPermission(n.currentUser,"user_management")?"success":"error",small:""},{default:r(()=>[o(i(n.hasPermission(n.currentUser,"user_management")?"有权限":"无权限"),1)]),_:1},8,["color"])]),t("p",null,[l[48]||(l[48]=o("AI配置权限: ",-1)),s(d,{color:n.hasPermission(n.currentUser,"ai_config")?"success":"error",small:""},{default:r(()=>[o(i(n.hasPermission(n.currentUser,"ai_config")?"有权限":"无权限"),1)]),_:1},8,["color"])])]),_:1}),s(a,{cols:"12",md:"6"},{default:r(()=>{var u;return[l[52]||(l[52]=t("h4",null,"canAccessUser 函数测试",-1)),t("p",null,[l[50]||(l[50]=o("访问自己: ",-1)),s(d,{color:n.canAccessUser(n.currentUser,n.currentUser)?"success":"error",small:""},{default:r(()=>[o(i(n.canAccessUser(n.currentUser,n.currentUser)?"可访问":"不可访问"),1)]),_:1},8,["color"])]),t("p",null,[l[51]||(l[51]=o("canManageGroup: ",-1)),s(d,{color:n.canManageGroup(n.currentUser,(u=n.currentUser)==null?void 0:u.group_id)?"success":"error",small:""},{default:r(()=>{var e;return[o(i(n.canManageGroup(n.currentUser,(e=n.currentUser)==null?void 0:e.group_id)?"可管理":"不可管理"),1)]}),_:1},8,["color"])])]}),_:1})]),_:1})]),_:1})]),_:1}),s(k,{outlined:"",class:"mt-4"},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:""},{default:r(()=>[...l[53]||(l[53]=[o("mdi-web",-1)])]),_:1}),l[54]||(l[54]=o(" 页面访问权限测试 ",-1))]),_:1}),s(_,null,{default:r(()=>[s(x,null,{default:r(()=>[s(a,{cols:"12",md:"3"},{default:r(()=>{var u;return[s(A,{disabled:!((u=n.currentUser)!=null&&u.is_admin),color:"primary",block:"",onClick:l[0]||(l[0]=e=>p.$router.push("/admin/users"))},{default:r(()=>[l[55]||(l[55]=o(" 用户管理 ",-1)),s(m,{right:""},{default:r(()=>{var e;return[o(i((e=n.currentUser)!=null&&e.is_admin?"mdi-check":"mdi-lock"),1)]}),_:1})]),_:1},8,["disabled"])]}),_:1}),s(a,{cols:"12",md:"3"},{default:r(()=>{var u;return[s(A,{disabled:!((u=n.currentUser)!=null&&u.is_super_admin),color:"primary",block:"",onClick:l[1]||(l[1]=e=>p.$router.push("/admin/ai"))},{default:r(()=>[l[56]||(l[56]=o(" AI配置 ",-1)),s(m,{right:""},{default:r(()=>{var e;return[o(i((e=n.currentUser)!=null&&e.is_super_admin?"mdi-check":"mdi-lock"),1)]}),_:1})]),_:1},8,["disabled"])]}),_:1}),s(a,{cols:"12",md:"3"},{default:r(()=>{var u,e;return[s(A,{disabled:!((u=n.currentUser)!=null&&u.is_admin||(e=n.currentUser)!=null&&e.is_super_admin),color:"primary",block:"",onClick:l[2]||(l[2]=g=>p.$router.push("/analytics"))},{default:r(()=>[l[57]||(l[57]=o(" 分析中心 ",-1)),s(m,{right:""},{default:r(()=>{var g,y;return[o(i((g=n.currentUser)!=null&&g.is_admin||(y=n.currentUser)!=null&&y.is_super_admin?"mdi-check":"mdi-lock"),1)]}),_:1})]),_:1},8,["disabled"])]}),_:1}),s(a,{cols:"12",md:"3"},{default:r(()=>[s(A,{color:"primary",block:"",onClick:l[3]||(l[3]=u=>p.$router.push("/dashboard"))},{default:r(()=>[l[59]||(l[59]=o(" 个人面板 ",-1)),s(m,{right:""},{default:r(()=>[...l[58]||(l[58]=[o("mdi-check",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const W=N(T,[["render",F],["__scopeId","data-v-39fa2c02"]]);export{W as default};
