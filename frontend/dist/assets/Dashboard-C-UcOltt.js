import{m as At,c as q,o as H,a as S,_ as _t,b as Se,k as L,n as Ut,l as j,d as Yt,C as Je,e as de,f as Xt,u as jt,t as $,j as T,h as ne,x as Q,A as Ht,B as Ke,q as Me,F as Qe,r as et,p as ie,i as qt}from"./index-B9ntIOOh.js";import{C as Zt}from"./check-CLNC5vQl.js";import{D as Jt}from"./file-text-RiLVEpJL.js";import{P as Kt}from"./plus-QCcyPRoI.js";import{E as Qt}from"./edit-BdcnGOSH.js";import{T as ea}from"./chart-line-TBomc0Zu.js";import{f as Re,g as ge,a as ta}from"./date-qiPTsFx8.js";import{P as U,D as tt,r as at,a as St,d as aa,S as rt,b as nt,l as Oe,_ as ae,c as wt,e as ve,f as Fe,i as ra,g as xt,h as it,j as $e,k as be,m as kt,p as na,t as ia,n as se,u as oe,s as Dt,o as sa,q as Ge,G as oa,v as la,w as ze,C as Lt,x as Tt,y as Te,R as Ct,z as Z,A as It,B as Pt,E as ca,F as ua,H as Mt,I as Rt,J as da,K as ga,L as Ue,M as va,N as ha,O as fa,Q as pa,T as Ot,U as ma,V as ya,W as K,X as ba,Z as Aa,Y as _a,$ as Sa,a0 as wa,a1 as st,a2 as xa,a3 as ka,a4 as Da,a5 as La,a6 as Ta,a7 as Ca,a8 as Ia,a9 as Pa,aa as Ma,ab as Ra,ac as Oa,ad as Na}from"./index.esm.min-Cu_bBNkN.js";const Ea={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Va(r,t){return H(),q("svg",Ea,[...t[0]||(t[0]=[S("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[S("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"}),S("path",{d:"M12 7v5l3 3"})],-1)])])}const Ba=At({name:"tabler-clock",render:Va}),Ga={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Wa(r,t){return H(),q("svg",Ga,[...t[0]||(t[0]=[S("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3a9 9 0 1 0 9 9"},null,-1)])])}const Fa=At({name:"tabler-loader-2",render:Wa});function Nt(r,t,a,e,n,s,i,l){var c=n-r,u=s-t,o=a-r,d=e-t,f=Math.sqrt(o*o+d*d);o/=f,d/=f;var h=c*o+u*d,v=h/f;v*=f;var m=i[0]=r+v*o,y=i[1]=t+v*d;return Math.sqrt((m-n)*(m-n)+(y-s)*(y-s))}var ee=new U,W=new U,z=new U,te=new U,J=new U,Le=[],X=new U;function $a(r,t){if(t<=180&&t>0){t=t/180*Math.PI,ee.fromArray(r[0]),W.fromArray(r[1]),z.fromArray(r[2]),U.sub(te,ee,W),U.sub(J,z,W);var a=te.len(),e=J.len();if(!(a<.001||e<.001)){te.scale(1/a),J.scale(1/e);var n=te.dot(J),s=Math.cos(t);if(s<n){var i=Nt(W.x,W.y,z.x,z.y,ee.x,ee.y,Le);X.fromArray(Le),X.scaleAndAdd(J,i/Math.tan(Math.PI-t));var l=z.x!==W.x?(X.x-W.x)/(z.x-W.x):(X.y-W.y)/(z.y-W.y);if(isNaN(l))return;l<0?U.copy(X,W):l>1&&U.copy(X,z),X.toArray(r[1])}}}}function za(r,t,a){if(a<=180&&a>0){a=a/180*Math.PI,ee.fromArray(r[0]),W.fromArray(r[1]),z.fromArray(r[2]),U.sub(te,W,ee),U.sub(J,z,W);var e=te.len(),n=J.len();if(!(e<.001||n<.001)){te.scale(1/e),J.scale(1/n);var s=te.dot(t),i=Math.cos(a);if(s<i){var l=Nt(W.x,W.y,z.x,z.y,ee.x,ee.y,Le);X.fromArray(Le);var c=Math.PI/2,u=Math.acos(J.dot(t)),o=c+u-a;if(o>=c)U.copy(X,z);else{X.scaleAndAdd(J,l/Math.tan(Math.PI/2-o));var d=z.x!==W.x?(X.x-W.x)/(z.x-W.x):(X.y-W.y)/(z.y-W.y);if(isNaN(d))return;d<0?U.copy(X,W):d>1&&U.copy(X,z)}X.toArray(r[1])}}}}function Ne(r,t,a,e){var n=a==="normal",s=n?r:r.ensureState(a);s.ignore=t;var i=e.get("smooth");i&&i===!0&&(i=.3),s.shape=s.shape||{},i>0&&(s.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();n?r.useStyle(l):s.style=l}function Ua(r,t){var a=t.smooth,e=t.points;if(e)if(r.moveTo(e[0][0],e[0][1]),a>0&&e.length>=3){var n=nt(e[0],e[1]),s=nt(e[1],e[2]);if(!n||!s){r.lineTo(e[1][0],e[1][1]),r.lineTo(e[2][0],e[2][1]);return}var i=Math.min(n,s)*a,l=Oe([],e[1],e[0],i/n),c=Oe([],e[1],e[2],i/s),u=Oe([],l,c,.5);r.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),r.bezierCurveTo(c[0],c[1],c[0],c[1],e[2][0],e[2][1])}else for(var o=1;o<e.length;o++)r.lineTo(e[o][0],e[o][1])}function Ya(r,t,a){var e=r.getTextGuideLine(),n=r.getTextContent();if(!n){e&&r.removeTextGuideLine();return}for(var s=t.normal,i=s.get("show"),l=n.ignore,c=0;c<tt.length;c++){var u=tt[c],o=t[u],d=u==="normal";if(o){var f=o.get("show"),h=d?l:at(n.states[u]&&n.states[u].ignore,l);if(h||!at(f,i)){var v=d?e:e&&e.states[u];v&&(v.ignore=!0),e&&Ne(e,!0,u,o);continue}e||(e=new St,r.setTextGuideLine(e),!d&&(l||!i)&&Ne(e,!0,"normal",t.normal),r.stateProxy&&(e.stateProxy=r.stateProxy)),Ne(e,!1,u,o)}}if(e){aa(e.style,a),e.style.fill=null;var m=s.get("showAbove"),y=r.textGuideLineConfig=r.textGuideLineConfig||{};y.showAbove=m||!1,e.buildPath=Ua}}function Xa(r,t){t=t||"labelLine";for(var a={normal:r.getModel(t)},e=0;e<rt.length;e++){var n=rt[e];a[n]=r.getModel([n,t])}return a}var We=function(r){ae(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(a,e){return wt(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(a,e,n){var s=this.coordinateSystem;if(s&&s.clampData){var i=s.clampData(a),l=s.dataToPoint(i);if(n)ve(s.getAxes(),function(f,h){if(f.type==="category"&&e!=null){var v=f.getTicksCoords(),m=f.getTickModel().get("alignWithLabel"),y=i[h],k=e[h]==="x1"||e[h]==="y1";if(k&&!m&&(y+=1),v.length<2)return;if(v.length===2){l[h]=f.toGlobalCoord(f.getExtent()[k?1:0]);return}for(var x=void 0,D=void 0,I=1,p=0;p<v.length;p++){var g=v[p].coord,b=p===v.length-1?v[p-1].tickValue+I:v[p].tickValue;if(b===y){D=g;break}else if(b<y)x=g;else if(x!=null&&b>y){D=(g+x)/2;break}p===1&&(I=b-v[0].tickValue)}D==null&&(x?x&&(D=v[v.length-1].coord):D=v[0].coord),l[h]=f.toGlobalCoord(D)}});else{var c=this.getData(),u=c.getLayout("offset"),o=c.getLayout("size"),d=s.getBaseAxis().isHorizontal()?0:1;l[d]+=u+o/2}return l}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Fe);Fe.registerClass(We);var ja=function(r){ae(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(){return wt(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>a&&(a=e),a},t.prototype.brushSelector=function(a,e,n){return n.rect(e.getItemLayout(a))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=ra(We.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(We),Ha=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),ot=function(r){ae(t,r);function t(a){var e=r.call(this,a)||this;return e.type="sausage",e}return t.prototype.getDefaultShape=function(){return new Ha},t.prototype.buildPath=function(a,e){var n=e.cx,s=e.cy,i=Math.max(e.r0||0,0),l=Math.max(e.r,0),c=(l-i)*.5,u=i+c,o=e.startAngle,d=e.endAngle,f=e.clockwise,h=Math.PI*2,v=f?d-o<h:o-d<h;v||(o=d-(f?h:-h));var m=Math.cos(o),y=Math.sin(o),k=Math.cos(d),x=Math.sin(d);v?(a.moveTo(m*i+n,y*i+s),a.arc(m*u+n,y*u+s,c,-Math.PI+o,o,!f)):a.moveTo(m*l+n,y*l+s),a.arc(n,s,l,o,d,!f),a.arc(k*u+n,x*u+s,c,d-Math.PI*2,d-Math.PI,!f),i!==0&&a.arc(n,s,i,d,o,f)},t}(xt);function qa(r,t){t=t||{};var a=t.isRoundCap;return function(e,n,s){var i=n.position;if(!i||i instanceof Array)return it(e,n,s);var l=r(i),c=n.distance!=null?n.distance:5,u=this.shape,o=u.cx,d=u.cy,f=u.r,h=u.r0,v=(f+h)/2,m=u.startAngle,y=u.endAngle,k=(m+y)/2,x=a?Math.abs(f-h)/2:0,D=Math.cos,I=Math.sin,p=o+f*D(m),g=d+f*I(m),b="left",A="top";switch(l){case"startArc":p=o+(h-c)*D(k),g=d+(h-c)*I(k),b="center",A="top";break;case"insideStartArc":p=o+(h+c)*D(k),g=d+(h+c)*I(k),b="center",A="bottom";break;case"startAngle":p=o+v*D(m)+we(m,c+x,!1),g=d+v*I(m)+xe(m,c+x,!1),b="right",A="middle";break;case"insideStartAngle":p=o+v*D(m)+we(m,-c+x,!1),g=d+v*I(m)+xe(m,-c+x,!1),b="left",A="middle";break;case"middle":p=o+v*D(k),g=d+v*I(k),b="center",A="middle";break;case"endArc":p=o+(f+c)*D(k),g=d+(f+c)*I(k),b="center",A="bottom";break;case"insideEndArc":p=o+(f-c)*D(k),g=d+(f-c)*I(k),b="center",A="top";break;case"endAngle":p=o+v*D(y)+we(y,c+x,!0),g=d+v*I(y)+xe(y,c+x,!0),b="left",A="middle";break;case"insideEndAngle":p=o+v*D(y)+we(y,-c+x,!0),g=d+v*I(y)+xe(y,-c+x,!0),b="right",A="middle";break;default:return it(e,n,s)}return e=e||{},e.x=p,e.y=g,e.align=b,e.verticalAlign=A,e}}function Za(r,t,a,e){if($e(e)){r.setTextConfig({rotation:e});return}else if(be(t)){r.setTextConfig({rotation:0});return}var n=r.shape,s=n.clockwise?n.startAngle:n.endAngle,i=n.clockwise?n.endAngle:n.startAngle,l=(s+i)/2,c,u=a(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=l;break;case"startAngle":case"insideStartAngle":c=s;break;case"endAngle":case"insideEndAngle":c=i;break;default:r.setTextConfig({rotation:0});return}var o=Math.PI*1.5-c;u==="middle"&&o>Math.PI/2&&o<Math.PI*1.5&&(o-=Math.PI),r.setTextConfig({rotation:o})}function we(r,t,a){return t*Math.sin(r)*(a?-1:1)}function xe(r,t,a){return t*Math.cos(r)*(a?1:-1)}function ye(r,t,a){var e=r.get("borderRadius");if(e==null)return a?{cornerRadius:0}:null;be(e)||(e=[e,e,e,e]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:kt(e,function(s){return na(s,n)})}}var Ee=Math.max,Ve=Math.min;function Ja(r,t){var a=r.getArea&&r.getArea();if(Tt(r,"cartesian2d")){var e=r.getBaseAxis();if(e.type!=="category"||!e.onBand){var n=t.getLayout("bandWidth");e.isHorizontal()?(a.x-=n,a.width+=n*2):(a.y-=n,a.height+=n*2)}}return a}var Ka=function(r){ae(t,r);function t(){var a=r.call(this)||this;return a.type=t.type,a._isFirstFrame=!0,a}return t.prototype.render=function(a,e,n,s){this._model=a,this._removeOnRenderedListener(n),this._updateDrawMode(a);var i=a.get("coordinateSystem");(i==="cartesian2d"||i==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,e,n):this._renderNormal(a,e,n,s))},t.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},t.prototype.incrementalRender=function(a,e){this._progressiveEls=[],this._incrementalRenderLarge(a,e)},t.prototype.eachRendered=function(a){ia(this._progressiveEls||this.group,a)},t.prototype._updateDrawMode=function(a){var e=a.pipelineContext.large;(this._isLargeDraw==null||e!==this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},t.prototype._renderNormal=function(a,e,n,s){var i=this.group,l=a.getData(),c=this._data,u=a.coordinateSystem,o=u.getBaseAxis(),d;u.type==="cartesian2d"?d=o.isHorizontal():u.type==="polar"&&(d=o.dim==="angle");var f=a.isAnimationEnabled()?a:null,h=Qa(a,u);h&&this._enableRealtimeSort(h,l,n);var v=a.get("clip",!0)||h,m=Ja(u,l);i.removeClipPath();var y=a.get("roundCap",!0),k=a.get("showBackground",!0),x=a.getModel("backgroundStyle"),D=x.get("borderRadius")||0,I=[],p=this._backgroundEls,g=s&&s.isInitSort,b=s&&s.type==="changeAxisOrder";function A(_){var N=ke[u.type](l,_),C=sr(u,d,N);return C.useStyle(x.getItemStyle()),u.type==="cartesian2d"?C.setShape("r",D):C.setShape("cornerRadius",D),I[_]=C,C}l.diff(c).add(function(_){var N=l.getItemModel(_),C=ke[u.type](l,_,N);if(k&&A(_),!(!l.hasValue(_)||!gt[u.type](C))){var V=!1;v&&(V=lt[u.type](m,C));var M=ct[u.type](a,l,_,C,d,f,o.model,!1,y);h&&(M.forceLabelAnimation=!0),vt(M,l,_,N,C,a,d,u.type==="polar"),g?M.attr({shape:C}):h?ut(h,f,M,C,_,d,!1,!1):se(M,{shape:C},a,_),l.setItemGraphicEl(_,M),i.add(M),M.ignore=V}}).update(function(_,N){var C=l.getItemModel(_),V=ke[u.type](l,_,C);if(k){var M=void 0;p.length===0?M=A(N):(M=p[N],M.useStyle(x.getItemStyle()),u.type==="cartesian2d"?M.setShape("r",D):M.setShape("cornerRadius",D),I[_]=M);var Y=ke[u.type](l,_),P=Vt(d,Y,u);oe(M,{shape:P},f,_)}var O=c.getItemGraphicEl(N);if(!l.hasValue(_)||!gt[u.type](V)){i.remove(O);return}var E=!1;if(v&&(E=lt[u.type](m,V),E&&i.remove(O)),O?Dt(O):O=ct[u.type](a,l,_,V,d,f,o.model,!!O,y),h&&(O.forceLabelAnimation=!0),b){var B=O.getTextContent();if(B){var G=sa(B);G.prevValue!=null&&(G.prevValue=G.value)}}else vt(O,l,_,C,V,a,d,u.type==="polar");g?O.attr({shape:V}):h?ut(h,f,O,V,_,d,!0,b):oe(O,{shape:V},a,_,null),l.setItemGraphicEl(_,O),O.ignore=E,i.add(O)}).remove(function(_){var N=c.getItemGraphicEl(_);N&&Ge(N,a,_)}).execute();var w=this._backgroundGroup||(this._backgroundGroup=new oa);w.removeAll();for(var R=0;R<I.length;++R)w.add(I[R]);i.add(w),this._backgroundEls=I,this._data=l},t.prototype._renderLarge=function(a,e,n){this._clear(),ft(a,this.group),this._updateLargeClip(a)},t.prototype._incrementalRenderLarge=function(a,e){this._removeBackground(),ft(e,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(a){var e=a.get("clip",!0)&&la(a.coordinateSystem,!1,a),n=this.group;e?n.setClipPath(e):n.removeClipPath()},t.prototype._enableRealtimeSort=function(a,e,n){var s=this;if(e.count()){var i=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,a,n),this._isFirstFrame=!1;else{var l=function(c){var u=e.getItemGraphicEl(c),o=u&&u.shape;return o&&Math.abs(i.isHorizontal()?o.height:o.width)||0};this._onRendered=function(){s._updateSortWithinSameData(e,l,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(a,e,n){var s=[];return a.each(a.mapDimension(e.dim),function(i,l){var c=n(l);c=c??NaN,s.push({dataIndex:l,mappedValue:c,ordinalNumber:i})}),s.sort(function(i,l){return l.mappedValue-i.mappedValue}),{ordinalNumbers:kt(s,function(i){return i.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(a,e,n){for(var s=n.scale,i=a.mapDimension(n.dim),l=Number.MAX_VALUE,c=0,u=s.getOrdinalMeta().categories.length;c<u;++c){var o=a.rawIndexOf(i,s.getRawOrdinalNumber(c)),d=o<0?Number.MIN_VALUE:e(a.indexOfRawIndex(o));if(d>l)return!0;l=d}return!1},t.prototype._isOrderDifferentInView=function(a,e){for(var n=e.scale,s=n.getExtent(),i=Math.max(0,s[0]),l=Math.min(s[1],n.getOrdinalMeta().categories.length-1);i<=l;++i)if(a.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(a,e,n,s){if(this._isOrderChangedWithinSameData(a,e,n)){var i=this._dataSort(a,n,e);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(a,e,n){var s=e.baseAxis,i=this._dataSort(a,s,function(l){return a.get(a.mapDimension(e.otherAxis.dim),l)});n.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:i})},t.prototype.remove=function(a,e){this._clear(this._model),this._removeOnRenderedListener(e)},t.prototype.dispose=function(a,e){this._removeOnRenderedListener(e)},t.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(a){var e=this.group,n=this._data;a&&a.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(s){Ge(s,a,ze(s).dataIndex)})):e.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Lt),lt={cartesian2d:function(r,t){var a=t.width<0?-1:1,e=t.height<0?-1:1;a<0&&(t.x+=t.width,t.width=-t.width),e<0&&(t.y+=t.height,t.height=-t.height);var n=r.x+r.width,s=r.y+r.height,i=Ee(t.x,r.x),l=Ve(t.x+t.width,n),c=Ee(t.y,r.y),u=Ve(t.y+t.height,s),o=l<i,d=u<c;return t.x=o&&i>n?l:i,t.y=d&&c>s?u:c,t.width=o?0:l-i,t.height=d?0:u-c,a<0&&(t.x+=t.width,t.width=-t.width),e<0&&(t.y+=t.height,t.height=-t.height),o||d},polar:function(r,t){var a=t.r0<=t.r?1:-1;if(a<0){var e=t.r;t.r=t.r0,t.r0=e}var n=Ve(t.r,r.r),s=Ee(t.r0,r.r0);t.r=n,t.r0=s;var i=n-s<0;if(a<0){var e=t.r;t.r=t.r0,t.r0=e}return i}},ct={cartesian2d:function(r,t,a,e,n,s,i,l,c){var u=new Ct({shape:Z({},e),z2:1});if(u.__dataIndex=a,u.name="item",s){var o=u.shape,d=n?"height":"width";o[d]=0}return u},polar:function(r,t,a,e,n,s,i,l,c){var u=!n&&c?ot:Te,o=new u({shape:e,z2:1});o.name="item";var d=Et(n);if(o.calculateTextPosition=qa(d,{isRoundCap:u===ot}),s){var f=o.shape,h=n?"r":"endAngle",v={};f[h]=n?e.r0:e.startAngle,v[h]=e[h],(l?oe:se)(o,{shape:v},s)}return o}};function Qa(r,t){var a=r.get("realtimeSort",!0),e=t.getBaseAxis();if(a&&e.type==="category"&&t.type==="cartesian2d")return{baseAxis:e,otherAxis:t.getOtherAxis(e)}}function ut(r,t,a,e,n,s,i,l){var c,u;s?(u={x:e.x,width:e.width},c={y:e.y,height:e.height}):(u={y:e.y,height:e.height},c={x:e.x,width:e.width}),l||(i?oe:se)(a,{shape:c},t,n,null);var o=t?r.baseAxis.model:null;(i?oe:se)(a,{shape:u},o,n)}function dt(r,t){for(var a=0;a<t.length;a++)if(!isFinite(r[t[a]]))return!0;return!1}var er=["x","y","width","height"],tr=["cx","cy","r","startAngle","endAngle"],gt={cartesian2d:function(r){return!dt(r,er)},polar:function(r){return!dt(r,tr)}},ke={cartesian2d:function(r,t,a){var e=r.getItemLayout(t),n=a?rr(a,e):0,s=e.width>0?1:-1,i=e.height>0?1:-1;return{x:e.x+s*n/2,y:e.y+i*n/2,width:e.width-s*n,height:e.height-i*n}},polar:function(r,t,a){var e=r.getItemLayout(t);return{cx:e.cx,cy:e.cy,r0:e.r0,r:e.r,startAngle:e.startAngle,endAngle:e.endAngle,clockwise:e.clockwise}}};function ar(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Et(r){return function(t){var a=t?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+a;default:return e}}}(r)}function vt(r,t,a,e,n,s,i,l){var c=t.getItemVisual(a,"style");if(l){if(!s.get("roundCap")){var o=r.shape,d=ye(e.getModel("itemStyle"),o,!0);Z(o,d),r.setShape(o)}}else{var u=e.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(c);var f=e.getShallow("cursor");f&&r.attr("cursor",f);var h=l?i?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":i?n.height>=0?"bottom":"top":n.width>=0?"right":"left",v=It(e);Pt(r,v,{labelFetcher:s,labelDataIndex:a,defaultText:ca(s.getData(),a),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:h});var m=r.getTextContent();if(l&&m){var y=e.get(["label","position"]);r.textConfig.inside=y==="middle"?!0:null,Za(r,y==="outside"?h:y,Et(i),e.get(["label","rotate"]))}ua(m,v,s.getRawValue(a),function(x){return ga(t,x)});var k=e.getModel(["emphasis"]);Mt(r,k.get("focus"),k.get("blurScope"),k.get("disabled")),Rt(r,e),ar(n)&&(r.style.fill="none",r.style.stroke="none",ve(r.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function rr(r,t){var a=r.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var e=r.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(e,n,s)}var nr=function(){function r(){}return r}(),ht=function(r){ae(t,r);function t(a){var e=r.call(this,a)||this;return e.type="largeBar",e}return t.prototype.getDefaultShape=function(){return new nr},t.prototype.buildPath=function(a,e){for(var n=e.points,s=this.baseDimIdx,i=1-this.baseDimIdx,l=[],c=[],u=this.barWidth,o=0;o<n.length;o+=3)c[s]=u,c[i]=n[o+2],l[s]=n[o+s],l[i]=n[o+i],a.rect(l[0],l[1],c[0],c[1])},t}(xt);function ft(r,t,a,e){var n=r.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,i=n.getLayout("largeDataIndices"),l=n.getLayout("size"),c=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var o=new ht({shape:{points:u},incremental:!!e,silent:!0,z2:0});o.baseDimIdx=s,o.largeDataIndices=i,o.barWidth=l,o.useStyle(c.getItemStyle()),t.add(o),a&&a.push(o)}var d=new ht({shape:{points:n.getLayout("largePoints")},incremental:!!e,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=s,d.largeDataIndices=i,d.barWidth=l,t.add(d),d.useStyle(n.getVisual("style")),d.style.stroke=null,ze(d).seriesIndex=r.seriesIndex,r.get("silent")||(d.on("mousedown",pt),d.on("mousemove",pt)),a&&a.push(d)}var pt=da(function(r){var t=this,a=ir(t,r.offsetX,r.offsetY);ze(t).dataIndex=a>=0?a:null},30,!1);function ir(r,t,a){for(var e=r.baseDimIdx,n=1-e,s=r.shape.points,i=r.largeDataIndices,l=[],c=[],u=r.barWidth,o=0,d=s.length/3;o<d;o++){var f=o*3;if(c[e]=u,c[n]=s[f+2],l[e]=s[f+e],l[n]=s[f+n],c[n]<0&&(l[n]+=c[n],c[n]=-c[n]),t>=l[0]&&t<=l[0]+c[0]&&a>=l[1]&&a<=l[1]+c[1])return i[o]}return-1}function Vt(r,t,a){if(Tt(a,"cartesian2d")){var e=t,n=a.getArea();return{x:r?e.x:n.x,y:r?n.y:e.y,width:r?e.width:n.width,height:r?n.height:e.height}}else{var n=a.getArea(),s=t;return{cx:n.cx,cy:n.cy,r0:r?n.r0:s.r0,r:r?n.r:s.r,startAngle:r?s.startAngle:0,endAngle:r?s.endAngle:Math.PI*2}}}function sr(r,t,a){var e=r.type==="polar"?Te:Ct;return new e({shape:Vt(t,a,r),silent:!0,z2:0})}function or(r){r.registerChartView(Ka),r.registerSeriesModel(ja),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Ue(va,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ha("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,fa("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,a){var e=t.componentType||"series";a.eachComponent({mainType:e,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var mt=Math.PI*2,De=Math.PI/180;function Bt(r,t){return ya(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Gt(r,t){var a=Bt(r,t),e=r.get("center"),n=r.get("radius");be(n)||(n=[0,n]);var s=K(a.width,t.getWidth()),i=K(a.height,t.getHeight()),l=Math.min(s,i),c=K(n[0],l/2),u=K(n[1],l/2),o,d,f=r.coordinateSystem;if(f){var h=f.dataToPoint(e);o=h[0]||0,d=h[1]||0}else be(e)||(e=[e,e]),o=K(e[0],s)+a.x,d=K(e[1],i)+a.y;return{cx:o,cy:d,r0:c,r:u}}function lr(r,t,a){t.eachSeriesByType(r,function(e){var n=e.getData(),s=n.mapDimension("value"),i=Bt(e,a),l=Gt(e,a),c=l.cx,u=l.cy,o=l.r,d=l.r0,f=-e.get("startAngle")*De,h=e.get("endAngle"),v=e.get("padAngle")*De;h=h==="auto"?f-mt:-h*De;var m=e.get("minAngle")*De,y=m+v,k=0;n.each(s,function(P){!isNaN(P)&&k++});var x=n.getSum(s),D=Math.PI/(x||k)*2,I=e.get("clockwise"),p=e.get("roseType"),g=e.get("stillShowZeroSum"),b=n.getDataExtent(s);b[0]=0;var A=I?1:-1,w=[f,h],R=A*v/2;pa(w,!I),f=w[0],h=w[1];var _=Wt(e);_.startAngle=f,_.endAngle=h,_.clockwise=I;var N=Math.abs(h-f),C=N,V=0,M=f;if(n.setLayout({viewRect:i,r:o}),n.each(s,function(P,O){var E;if(isNaN(P)){n.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:I,cx:c,cy:u,r0:d,r:p?NaN:o});return}p!=="area"?E=x===0&&g?D:P*D:E=N/k,E<y?(E=y,C-=y):V+=P;var B=M+A*E,G=0,F=0;v>E?(G=M+A*E/2,F=G):(G=M+R,F=B-R),n.setItemLayout(O,{angle:E,startAngle:G,endAngle:F,clockwise:I,cx:c,cy:u,r0:d,r:p?ma(P,b,[d,o]):o}),M=B}),C<mt&&k)if(C<=.001){var Y=N/k;n.each(s,function(P,O){if(!isNaN(P)){var E=n.getItemLayout(O);E.angle=Y;var B=0,G=0;Y<v?(B=f+A*(O+1/2)*Y,G=B):(B=f+A*O*Y+R,G=f+A*(O+1)*Y-R),E.startAngle=B,E.endAngle=G}})}else D=C/V,M=f,n.each(s,function(P,O){if(!isNaN(P)){var E=n.getItemLayout(O),B=E.angle===y?y:P*D,G=0,F=0;B<v?(G=M+A*B/2,F=G):(G=M+R,F=M+A*B-R),E.startAngle=G,E.endAngle=F,M+=A*B}})})}var Wt=Ot();function cr(r){return{seriesType:r,reset:function(t,a){var e=a.findComponents({mainType:"legend"});if(!(!e||!e.length)){var n=t.getData();n.filterSelf(function(s){for(var i=n.getName(s),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var ur=Math.PI/180;function yt(r,t,a,e,n,s,i,l,c,u){if(r.length<2)return;function o(m){for(var y=m.rB,k=y*y,x=0;x<m.list.length;x++){var D=m.list[x],I=Math.abs(D.label.y-a),p=e+D.len,g=p*p,b=Math.sqrt(Math.abs((1-I*I/k)*g)),A=t+(b+D.len2)*n,w=A-D.label.x,R=D.targetTextWidth-w*n;Ft(D,R,!0),D.label.x=A}}function d(m){for(var y={list:[],maxY:0},k={list:[],maxY:0},x=0;x<m.length;x++)if(m[x].labelAlignTo==="none"){var D=m[x],I=D.label.y>a?k:y,p=Math.abs(D.label.y-a);if(p>=I.maxY){var g=D.label.x-t-D.len2*n,b=e+D.len,A=Math.abs(g)<b?Math.sqrt(p*p/(1-g*g/b/b)):b;I.rB=A,I.maxY=p}I.list.push(D)}o(y),o(k)}for(var f=r.length,h=0;h<f;h++)if(r[h].position==="outer"&&r[h].labelAlignTo==="labelLine"){var v=r[h].label.x-u;r[h].linePoints[1][0]+=v,r[h].label.x=u}ba(r,c,c+i)&&d(r)}function dr(r,t,a,e,n,s,i,l){for(var c=[],u=[],o=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<r.length;f++){var h=r[f].label;Be(r[f])||(h.x<t?(o=Math.min(o,h.x),c.push(r[f])):(d=Math.max(d,h.x),u.push(r[f])))}for(var f=0;f<r.length;f++){var v=r[f];if(!Be(v)&&v.linePoints){if(v.labelStyleWidth!=null)continue;var h=v.label,m=v.linePoints,y=void 0;v.labelAlignTo==="edge"?h.x<t?y=m[2][0]-v.labelDistance-i-v.edgeDistance:y=i+n-v.edgeDistance-m[2][0]-v.labelDistance:v.labelAlignTo==="labelLine"?h.x<t?y=o-i-v.bleedMargin:y=i+n-d-v.bleedMargin:h.x<t?y=h.x-i-v.bleedMargin:y=i+n-h.x-v.bleedMargin,v.targetTextWidth=y,Ft(v,y)}}yt(u,t,a,e,1,n,s,i,l,d),yt(c,t,a,e,-1,n,s,i,l,o);for(var f=0;f<r.length;f++){var v=r[f];if(!Be(v)&&v.linePoints){var h=v.label,m=v.linePoints,k=v.labelAlignTo==="edge",x=h.style.padding,D=x?x[1]+x[3]:0,I=h.style.backgroundColor?0:D,p=v.rect.width+I,g=m[1][0]-m[2][0];k?h.x<t?m[2][0]=i+v.edgeDistance+p+v.labelDistance:m[2][0]=i+n-v.edgeDistance-p-v.labelDistance:(h.x<t?m[2][0]=h.x+v.labelDistance:m[2][0]=h.x-v.labelDistance,m[1][0]=m[2][0]+g),m[1][1]=m[2][1]=h.y}}}function Ft(r,t,a){if(a===void 0&&(a=!1),r.labelStyleWidth==null){var e=r.label,n=e.style,s=r.rect,i=n.backgroundColor,l=n.padding,c=l?l[1]+l[3]:0,u=n.overflow,o=s.width+(i?0:c);if(t<o||a){var d=s.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",t-c);var f=e.getBoundingRect();e.setStyle("width",Math.ceil(f.width)),e.setStyle("backgroundColor",i)}else{var h=t-c,v=t<o?h:a?h>r.unconstrainedWidth?null:h:null;e.setStyle("width",v)}var m=e.getBoundingRect();s.width=m.width;var y=(e.style.margin||0)+2.1;s.height=m.height+y,s.y-=(s.height-d)/2}}}function Be(r){return r.position==="center"}function gr(r){var t=r.getData(),a=[],e,n,s=!1,i=(r.get("minShowLabelAngle")||0)*ur,l=t.getLayout("viewRect"),c=t.getLayout("r"),u=l.width,o=l.x,d=l.y,f=l.height;function h(g){g.ignore=!0}function v(g){if(!g.ignore)return!0;for(var b in g.states)if(g.states[b].ignore===!1)return!0;return!1}t.each(function(g){var b=t.getItemGraphicEl(g),A=b.shape,w=b.getTextContent(),R=b.getTextGuideLine(),_=t.getItemModel(g),N=_.getModel("label"),C=N.get("position")||_.get(["emphasis","label","position"]),V=N.get("distanceToLabelLine"),M=N.get("alignTo"),Y=K(N.get("edgeDistance"),u),P=N.get("bleedMargin"),O=_.getModel("labelLine"),E=O.get("length");E=K(E,u);var B=O.get("length2");if(B=K(B,u),Math.abs(A.endAngle-A.startAngle)<i){ve(w.states,h),w.ignore=!0,R&&(ve(R.states,h),R.ignore=!0);return}if(v(w)){var G=(A.startAngle+A.endAngle)/2,F=Math.cos(G),re=Math.sin(G),he,Ae,Ye,_e;e=A.cx,n=A.cy;var le=C==="inside"||C==="inner";if(C==="center")he=A.cx,Ae=A.cy,_e="center";else{var Ce=(le?(A.r+A.r0)/2*F:A.r*F)+e,Ie=(le?(A.r+A.r0)/2*re:A.r*re)+n;if(he=Ce+F*3,Ae=Ie+re*3,!le){var Xe=Ce+F*(E+c-A.r),je=Ie+re*(E+c-A.r),He=Xe+(F<0?-1:1)*B,qe=je;M==="edge"?he=F<0?o+Y:o+u-Y:he=He+(F<0?-V:V),Ae=qe,Ye=[[Ce,Ie],[Xe,je],[He,qe]]}_e=le?"center":M==="edge"?F>0?"right":"left":F>0?"left":"right"}var fe=Math.PI,ce=0,pe=N.get("rotate");if($e(pe))ce=pe*(fe/180);else if(C==="center")ce=0;else if(pe==="radial"||pe===!0){var $t=F<0?-G+fe:-G;ce=$t}else if(pe==="tangential"&&C!=="outside"&&C!=="outer"){var ue=Math.atan2(F,re);ue<0&&(ue=fe*2+ue);var zt=re>0;zt&&(ue=fe+ue),ce=ue-fe}if(s=!!ce,w.x=he,w.y=Ae,w.rotation=ce,w.setStyle({verticalAlign:"middle"}),le){w.setStyle({align:_e});var Pe=w.states.select;Pe&&(Pe.x+=w.x,Pe.y+=w.y)}else{var me=w.getBoundingRect().clone();me.applyTransform(w.getComputedTransform());var Ze=(w.style.margin||0)+2.1;me.y-=Ze/2,me.height+=Ze,a.push({label:w,labelLine:R,position:C,len:E,len2:B,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new U(F,re),linePoints:Ye,textAlign:_e,labelDistance:V,labelAlignTo:M,edgeDistance:Y,bleedMargin:P,rect:me,unconstrainedWidth:me.width,labelStyleWidth:w.style.width})}b.setTextConfig({inside:le})}}),!s&&r.get("avoidLabelOverlap")&&dr(a,e,n,c,u,f,o,d);for(var m=0;m<a.length;m++){var y=a[m],k=y.label,x=y.labelLine,D=isNaN(k.x)||isNaN(k.y);if(k){k.setStyle({align:y.textAlign}),D&&(ve(k.states,h),k.ignore=!0);var I=k.states.select;I&&(I.x+=k.x,I.y+=k.y)}if(x){var p=y.linePoints;D||!p?(ve(x.states,h),x.ignore=!0):($a(p,y.minTurnAngle),za(p,y.surfaceNormal,y.maxSurfaceAngle),x.setShape({points:p}),k.__hostTarget.textGuideLineConfig={anchor:new U(p[0][0],p[0][1])})}}}var vr=function(r){ae(t,r);function t(a,e,n){var s=r.call(this)||this;s.z2=2;var i=new Aa;return s.setTextContent(i),s.updateData(a,e,n,!0),s}return t.prototype.updateData=function(a,e,n,s){var i=this,l=a.hostModel,c=a.getItemModel(e),u=c.getModel("emphasis"),o=a.getItemLayout(e),d=Z(ye(c.getModel("itemStyle"),o,!0),o);if(isNaN(d.startAngle)){i.setShape(d);return}if(s){i.setShape(d);var f=l.getShallow("animationType");l.ecModel.ssr?(se(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=d.cx,i.originY=d.cy):f==="scale"?(i.shape.r=o.r0,se(i,{shape:{r:o.r}},l,e)):n!=null?(i.setShape({startAngle:n,endAngle:n}),se(i,{shape:{startAngle:o.startAngle,endAngle:o.endAngle}},l,e)):(i.shape.endAngle=o.startAngle,oe(i,{shape:{endAngle:o.endAngle}},l,e))}else Dt(i),oe(i,{shape:d},l,e);i.useStyle(a.getItemVisual(e,"style")),Rt(i,c);var h=(o.startAngle+o.endAngle)/2,v=l.get("selectedOffset"),m=Math.cos(h)*v,y=Math.sin(h)*v,k=c.getShallow("cursor");k&&i.attr("cursor",k),this._updateLabel(l,a,e),i.ensureState("emphasis").shape=Z({r:o.r+(u.get("scale")&&u.get("scaleSize")||0)},ye(u.getModel("itemStyle"),o)),Z(i.ensureState("select"),{x:m,y,shape:ye(c.getModel(["select","itemStyle"]),o)}),Z(i.ensureState("blur"),{shape:ye(c.getModel(["blur","itemStyle"]),o)});var x=i.getTextGuideLine(),D=i.getTextContent();x&&Z(x.ensureState("select"),{x:m,y}),Z(D.ensureState("select"),{x:m,y}),Mt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(a,e,n){var s=this,i=e.getItemModel(n),l=i.getModel("labelLine"),c=e.getItemVisual(n,"style"),u=c&&c.fill,o=c&&c.opacity;Pt(s,It(i),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:o,defaultText:a.getFormattedLabel(n,"normal")||e.getName(n)});var d=s.getTextContent();s.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var f=a.get(["label","position"]);if(f!=="outside"&&f!=="outer")s.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new St,this.setTextGuideLine(h)),Ya(this,Xa(i),{stroke:u,opacity:_a(l.get(["lineStyle","opacity"]),o,1)})}},t}(Te),hr=function(r){ae(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return t.prototype.render=function(a,e,n,s){var i=a.getData(),l=this._data,c=this.group,u;if(!l&&i.count()>0){for(var o=i.getItemLayout(0),d=1;isNaN(o&&o.startAngle)&&d<i.count();++d)o=i.getItemLayout(d);o&&(u=o.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),i.count()===0&&a.get("showEmptyCircle")){var f=Wt(a),h=new Te({shape:Z(Gt(a,n),f)});h.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,c.add(h)}i.diff(l).add(function(v){var m=new vr(i,v,u);i.setItemGraphicEl(v,m),c.add(m)}).update(function(v,m){var y=l.getItemGraphicEl(m);y.updateData(i,v,u),y.off("click"),c.add(y),i.setItemGraphicEl(v,y)}).remove(function(v){var m=l.getItemGraphicEl(v);Ge(m,a,v)}).execute(),gr(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},t.prototype.dispose=function(){},t.prototype.containPoint=function(a,e){var n=e.getData(),s=n.getItemLayout(0);if(s){var i=a[0]-s.cx,l=a[1]-s.cy,c=Math.sqrt(i*i+l*l);return c<=s.r&&c>=s.r0}},t.type="pie",t}(Lt);function fr(r,t,a){t=be(t)&&{coordDimensions:t}||Z({encodeDefine:r.getEncode()},t);var e=r.getSource(),n=Sa(e,t).dimensions,s=new wa(n,r);return s.initData(e,a),s}var pr=function(){function r(t,a){this._getDataWithEncodedVisual=t,this._getRawData=a}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var a=this._getRawData();return a.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var a=this._getDataWithEncodedVisual();return a.indexOfName(t)},r.prototype.getItemVisual=function(t,a){var e=this._getDataWithEncodedVisual();return e.getItemVisual(t,a)},r}(),mr=Ot(),yr=function(r){ae(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(a){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new pr(st(this.getData,this),st(this.getRawData,this)),this._defaultLabelLine(a)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return fr(this,{coordDimensions:["value"],encodeDefaulter:Ue(xa,this)})},t.prototype.getDataParams=function(a){var e=this.getData(),n=mr(e),s=n.seats;if(!s){var i=[];e.each(e.mapDimension("value"),function(c){i.push(c)}),s=n.seats=ka(i,e.hostModel.get("percentPrecision"))}var l=r.prototype.getDataParams.call(this,a);return l.percent=s[a]||0,l.$vars.push("percent"),l},t.prototype._defaultLabelLine=function(a){Da(a,"labelLine",["show"]);var e=a.labelLine,n=a.emphasis.labelLine;e.show=e.show&&a.label.show,n.show=n.show&&a.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Fe);function br(r){return{seriesType:r,reset:function(t,a){var e=t.getData();e.filterSelf(function(n){var s=e.mapDimension("value"),i=e.get(s,n);return!($e(i)&&!isNaN(i)&&i<0)})}}}function Ar(r){r.registerChartView(hr),r.registerSeriesModel(yr),La("pie",r.registerAction),r.registerLayout(Ue(lr,"pie")),r.registerProcessor(cr("pie")),r.registerProcessor(br("pie"))}const _r={class:"chart-container"},Sr={__name:"TaskChart",props:{type:{type:String,default:"pie",validator:r=>["pie","bar","line"].includes(r)},data:{type:Array,default:()=>[]},title:{type:String,default:""},height:{type:String,default:"300px"}},setup(r){Ta([Ia,Ar,or,Pa,Ma,Ra,Oa,Na]);const t=r,a=Se(()=>({title:{text:t.title,left:"center",textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:t.title,type:"pie",radius:"50%",data:t.data,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),e=Se(()=>({title:{text:t.title,left:"center",textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:t.data.map(i=>i.name)},yAxis:{type:"value"},series:[{name:t.title,type:"bar",data:t.data.map(i=>i.value),itemStyle:{color:"#409EFF"}}]})),n=Se(()=>({title:{text:t.title,left:"center",textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:t.data.map(i=>i.name)},yAxis:{type:"value"},series:[{name:t.title,type:"line",data:t.data.map(i=>i.value),smooth:!0,itemStyle:{color:"#67C23A"}}]})),s=Se(()=>{switch(t.type){case"pie":return a.value;case"bar":return e.value;case"line":return n.value;default:return a.value}});return(i,l)=>(H(),q("div",_r,[L(j(Ca),{option:s.value,style:Ut({height:r.height,width:"100%"}),autoresize:""},null,8,["option","style"])]))}},bt=_t(Sr,[["__scopeId","data-v-8ae302a3"]]),wr={class:"dashboard"},xr={class:"welcome-section"},kr={class:"stats-content"},Dr={class:"stats-icon pending"},Lr={class:"stats-info"},Tr={class:"stats-content"},Cr={class:"stats-icon progress"},Ir={class:"stats-info"},Pr={class:"stats-content"},Mr={class:"stats-icon completed"},Rr={class:"stats-info"},Or={class:"stats-content"},Nr={class:"stats-icon reports"},Er={class:"stats-info"},Vr={class:"card-header"},Br={class:"task-list"},Gr=["onClick"],Wr={class:"task-info"},Fr={class:"task-meta"},$r={class:"task-date"},zr={key:0,class:"empty-state"},Ur={class:"card-header"},Yr={class:"report-list"},Xr=["onClick"],jr={class:"report-info"},Hr={class:"report-meta"},qr={class:"report-date"},Zr={key:0,class:"empty-state"},Jr={class:"efficiency-item"},Kr={class:"efficiency-value"},Qr={class:"efficiency-item"},en={class:"efficiency-value"},tn={class:"efficiency-item"},an={class:"efficiency-value"},rn={class:"action-buttons"},nn={__name:"Dashboard",setup(r){const t=jt(),a=Yt(),e=Je({pendingTasks:0,inProgressTasks:0,completedTasks:0,reportsThisWeek:0}),n=de([]),s=de(!1),i=de([]),l=de(!1),c=de([]),u=de([]),o=Je({avgCompletionTime:0,weeklyCompletionRate:0,totalWorkHours:0}),d=p=>({pending:"warning",processing:"primary",done:"success"})[p]||"info",f=p=>({pending:"待处理",processing:"进行中",done:"已完成"})[p]||p,h=p=>p>=.7?"success":p>=.3?"warning":"danger",v=p=>{t.push(`/tasks/${parseInt(p.id)}`)},m=p=>{t.push(`/reports/${parseInt(p.id)}`)},y=async()=>{var p,g;if(!a.isAuthenticated){console.log("User not authenticated, skipping stats fetch");return}try{const b=((p=a.user)==null?void 0:p.group_id)??null,[A,w]=ge(new Date),_=(await Q.get("/analytics/charts",{params:{start_date:A,end_date:w,...b?{group_id:b}:{}}})).data||{},N=_.taskStatus||_.task_status||[],C=O=>{const E=N.find(B=>B.name===O||B.status===O);return E?E.value??E.count??0:0};e.pendingTasks=C("pending"),e.inProgressTasks=C("processing"),e.completedTasks=C("done"),c.value=[{name:"待处理",value:e.pendingTasks},{name:"进行中",value:e.inProgressTasks},{name:"已完成",value:e.completedTasks}];const[V,M]=ge(new Date),P=(await Q.get("/analytics/stats",{params:{start_date:V,end_date:M,...b?{group_id:b}:{}}})).data||{};e.reportsThisWeek=P.totalReports??0}catch(b){console.error("Failed to fetch stats:",b),((g=b.response)==null?void 0:g.status)===401&&(a.logout(),t.push("/login"))}},k=async()=>{var p,g,b,A;if(!a.isAuthenticated){console.log("User not authenticated, skipping weekly trend fetch");return}try{const w=((p=a.user)==null?void 0:p.group_id)??null,[R,_]=ge(new Date),N=await Q.get("/analytics/charts",{params:{start_date:R,end_date:_,...w?{group_id:w}:{}}}),C=((g=N.data)==null?void 0:g.taskTrend)||((b=N.data)==null?void 0:b.task_trend)||[];u.value=C.map(V=>({name:V.date,value:V.completed??V.count??0}))}catch(w){if(console.error("Failed to fetch weekly trend:",w),((A=w.response)==null?void 0:A.status)===401){a.logout(),t.push("/login");return}u.value=[]}},x=async()=>{var p,g,b,A;if(!a.isAuthenticated){console.log("User not authenticated, skipping efficiency fetch");return}try{const R=(await Q.get("/stats/overview")).data||{};o.avgCompletionTime=R.avgCompletionTime??0,o.totalWorkHours=R.totalWorkHours??0;const _=((p=a.user)==null?void 0:p.group_id)??null,[N,C]=ge(new Date),M=(await Q.get("/analytics/stats",{params:{start_date:N,end_date:C,..._?{group_id:_}:{}}})).data||{};o.weeklyCompletionRate=M.completionRate??R.weeklyCompletionRate??0}catch(w){if(console.error("Failed to fetch efficiency:",w),((g=w.response)==null?void 0:g.status)===401){a.logout(),t.push("/login");return}o.avgCompletionTime=0,o.totalWorkHours=0;try{const R=((b=a.user)==null?void 0:b.group_id)??null,[_,N]=ge(new Date),C=await Q.get("/analytics/stats",{params:{start_date:_,end_date:N,...R?{group_id:R}:{}}});o.weeklyCompletionRate=((A=C.data)==null?void 0:A.completionRate)??0}catch{o.weeklyCompletionRate=0}}},D=async()=>{var p;if(!a.isAuthenticated){console.log("User not authenticated, skipping recent tasks fetch");return}s.value=!0;try{const b=(await Q.get("/tasks",{params:{page:1,size:5}})).data;Array.isArray(b)?n.value=b:b&&typeof b=="object"?n.value=b.items||b.data||[]:n.value=[]}catch(g){if(console.error("Failed to fetch recent tasks:",g),((p=g.response)==null?void 0:p.status)===401){a.logout(),t.push("/login");return}}finally{s.value=!1}},I=async()=>{var p,g;if(!a.isAuthenticated){console.log("User not authenticated, skipping reports fetch");return}l.value=!0;try{const[b,A]=ge(new Date),w=((p=a.user)==null?void 0:p.group_id)??null,_=(await Q.get("/reports",{params:{page:1,size:5,start_date:b,end_date:A,...w?{group_id:w}:{}}})).data;Array.isArray(_)?i.value=_:_&&typeof _=="object"?i.value=_.items||_.data||[]:i.value=[]}catch(b){if(console.error("Failed to fetch recent reports:",b),((g=b.response)==null?void 0:g.status)===401){a.logout(),t.push("/login");return}}finally{l.value=!1}};return Xt(async()=>{if(!a.isAuthenticated){t.push("/login");return}try{await a.fetchUserInfo()}catch(p){console.error("Token validation failed:",p),t.push("/login");return}await Promise.allSettled([y(),k(),x(),D(),I()])}),(p,g)=>{var M,Y;const b=ne("el-icon"),A=ne("el-card"),w=ne("el-col"),R=ne("el-row"),_=ne("el-button"),N=ne("el-tag"),C=ne("el-empty"),V=Ht("loading");return H(),q("div",wr,[S("div",xr,[S("h1",null,"欢迎回来，"+$(((M=j(a).user)==null?void 0:M.full_name)||((Y=j(a).user)==null?void 0:Y.username))+"！",1),S("p",null,"今天是 "+$(j(Re)(new Date,"yyyy年MM月dd日 EEEE")),1)]),L(R,{gutter:20,class:"stats-row"},{default:T(()=>[L(w,{xs:24,sm:12,md:6},{default:T(()=>[L(A,{class:"stats-card"},{default:T(()=>[S("div",kr,[S("div",Dr,[L(b,null,{default:T(()=>[L(j(Ba))]),_:1})]),S("div",Lr,[S("h3",null,$(e.pendingTasks),1),g[5]||(g[5]=S("p",null,"待处理任务",-1))])])]),_:1})]),_:1}),L(w,{xs:24,sm:12,md:6},{default:T(()=>[L(A,{class:"stats-card"},{default:T(()=>[S("div",Tr,[S("div",Cr,[L(b,null,{default:T(()=>[L(j(Fa))]),_:1})]),S("div",Ir,[S("h3",null,$(e.inProgressTasks),1),g[6]||(g[6]=S("p",null,"进行中任务",-1))])])]),_:1})]),_:1}),L(w,{xs:24,sm:12,md:6},{default:T(()=>[L(A,{class:"stats-card"},{default:T(()=>[S("div",Pr,[S("div",Mr,[L(b,null,{default:T(()=>[L(j(Zt))]),_:1})]),S("div",Rr,[S("h3",null,$(e.completedTasks),1),g[7]||(g[7]=S("p",null,"已完成任务",-1))])])]),_:1})]),_:1}),L(w,{xs:24,sm:12,md:6},{default:T(()=>[L(A,{class:"stats-card"},{default:T(()=>[S("div",Or,[S("div",Nr,[L(b,null,{default:T(()=>[L(j(Jt))]),_:1})]),S("div",Er,[S("h3",null,$(e.reportsThisWeek),1),g[8]||(g[8]=S("p",null,"本周日报",-1))])])]),_:1})]),_:1})]),_:1}),L(R,{gutter:20,class:"content-row"},{default:T(()=>[L(w,{xs:24,lg:12},{default:T(()=>[L(A,{class:"content-card"},{header:T(()=>[S("div",Vr,[g[10]||(g[10]=S("span",null,"最近任务",-1)),L(_,{type:"text",onClick:g[0]||(g[0]=P=>p.$router.push("/tasks"))},{default:T(()=>[...g[9]||(g[9]=[ie(" 查看全部 ",-1)])]),_:1})])]),default:T(()=>[Ke((H(),q("div",Br,[(H(!0),q(Qe,null,et(n.value,P=>(H(),q("div",{key:P.id,class:"task-item",onClick:O=>v(P)},[S("div",Wr,[S("h4",null,$(P.title),1),S("p",null,$(P.description),1),S("div",Fr,[L(N,{type:d(P.status),size:"small"},{default:T(()=>[ie($(f(P.status)),1)]),_:2},1032,["type"]),S("span",$r,$(j(Re)(P.created_at)),1)])])],8,Gr))),128)),n.value.length===0?(H(),q("div",zr,[L(C,{description:"暂无任务"})])):Me("",!0)])),[[V,s.value]])]),_:1})]),_:1}),L(w,{xs:24,lg:12},{default:T(()=>[L(A,{class:"content-card"},{header:T(()=>[S("div",Ur,[g[12]||(g[12]=S("span",null,"最近日报",-1)),L(_,{type:"text",onClick:g[1]||(g[1]=P=>p.$router.push("/reports"))},{default:T(()=>[...g[11]||(g[11]=[ie(" 查看全部 ",-1)])]),_:1})])]),default:T(()=>[Ke((H(),q("div",Yr,[(H(!0),q(Qe,null,et(i.value,P=>(H(),q("div",{key:P.id,class:"report-item",onClick:O=>m(P)},[S("div",jr,[S("h4",null,$(j(Re)(P.work_date))+" 日报",1),S("p",null,$(P.work_summary||"暂无摘要"),1),S("div",Hr,[P.mood_score!=null?(H(),qt(N,{key:0,type:h((P.mood_score||0)/10),size:"small"},{default:T(()=>[ie(" 情感: "+$(P.mood_score),1)]),_:2},1032,["type"])):Me("",!0),S("span",qr,$(j(ta)(P.created_at)),1)])])],8,Xr))),128)),i.value.length===0?(H(),q("div",Zr,[L(C,{description:"暂无日报"})])):Me("",!0)])),[[V,l.value]])]),_:1})]),_:1})]),_:1}),L(R,{gutter:20,class:"charts-row"},{default:T(()=>[L(w,{xs:24,lg:12},{default:T(()=>[L(A,{class:"content-card"},{header:T(()=>[...g[13]||(g[13]=[S("span",null,"任务状态分布",-1)])]),default:T(()=>[L(bt,{type:"pie",data:c.value,title:"",height:"300px"},null,8,["data"])]),_:1})]),_:1}),L(w,{xs:24,lg:12},{default:T(()=>[L(A,{class:"content-card"},{header:T(()=>[...g[14]||(g[14]=[S("span",null,"本周任务趋势",-1)])]),default:T(()=>[L(bt,{type:"line",data:u.value,title:"",height:"300px"},null,8,["data"])]),_:1})]),_:1})]),_:1}),L(R,{gutter:20,class:"efficiency-row"},{default:T(()=>[L(w,{span:24},{default:T(()=>[L(A,{class:"content-card"},{header:T(()=>[...g[15]||(g[15]=[S("span",null,"工作效率分析",-1)])]),default:T(()=>[L(R,{gutter:20},{default:T(()=>[L(w,{xs:24,md:8},{default:T(()=>[S("div",Jr,[g[16]||(g[16]=S("h4",null,"平均完成时间",-1)),S("div",Kr,$(o.avgCompletionTime)+"小时 ",1),g[17]||(g[17]=S("p",{class:"efficiency-desc"},"任务平均完成时间",-1))])]),_:1}),L(w,{xs:24,md:8},{default:T(()=>[S("div",Qr,[g[18]||(g[18]=S("h4",null,"本周完成率",-1)),S("div",en,$(o.weeklyCompletionRate)+"% ",1),g[19]||(g[19]=S("p",{class:"efficiency-desc"},"本周任务完成率",-1))])]),_:1}),L(w,{xs:24,md:8},{default:T(()=>[S("div",tn,[g[20]||(g[20]=S("h4",null,"工作时长",-1)),S("div",an,$(o.totalWorkHours)+"小时 ",1),g[21]||(g[21]=S("p",{class:"efficiency-desc"},"本周总工作时长",-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),L(R,{gutter:20,class:"quick-actions"},{default:T(()=>[L(w,{span:24},{default:T(()=>[L(A,{class:"content-card"},{header:T(()=>[...g[22]||(g[22]=[S("span",null,"快速操作",-1)])]),default:T(()=>[S("div",rn,[L(_,{type:"primary",icon:j(Kt),onClick:g[2]||(g[2]=P=>p.$router.push("/tasks"))},{default:T(()=>[...g[23]||(g[23]=[ie(" 创建任务 ",-1)])]),_:1},8,["icon"]),L(_,{type:"success",icon:j(Qt),onClick:g[3]||(g[3]=P=>p.$router.push("/reports"))},{default:T(()=>[...g[24]||(g[24]=[ie(" 写日报 ",-1)])]),_:1},8,["icon"]),L(_,{type:"info",icon:j(ea),onClick:g[4]||(g[4]=P=>p.$router.push("/analytics"))},{default:T(()=>[...g[25]||(g[25]=[ie(" 查看分析 ",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1})]),_:1})])}}},hn=_t(nn,[["__scopeId","data-v-7e2112bb"]]);export{hn as default};
