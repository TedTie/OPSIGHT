import{_ as G,c as b,k as s,j as r,h as f,d as I,o as U,p as n,a as t,t as i}from"./index-un4HNty9.js";import{f as M,c as S,a as B,h as N}from"./auth-pcDRQd-v.js";const T={name:"PermissionTest",setup(){return{currentUser:I().user,hasPermission:N,canAccessUser:B,canManageGroup:S,formatUserRole:M}}},V={class:"permission-test"},R={key:0},j={key:1},D={key:0},E={key:1},q={key:0},z={key:1};function F(p,l,H,o,J,K){const m=f("v-icon"),v=f("v-card-title"),C=f("v-alert"),d=f("v-chip"),_=f("v-card-text"),k=f("v-card"),a=f("v-col"),x=f("v-row"),A=f("v-btn"),w=f("v-container");return U(),b("div",V,[s(w,null,{default:r(()=>[s(x,null,{default:r(()=>[s(a,{cols:"12"},{default:r(()=>[s(k,null,{default:r(()=>[s(v,null,{default:r(()=>[s(m,{left:""},{default:r(()=>[...l[4]||(l[4]=[n("mdi-shield-check",-1)])]),_:1}),l[5]||(l[5]=n(" 权限系统测试页面 ",-1))]),_:1}),s(_,null,{default:r(()=>[s(C,{type:"info",class:"mb-4"},{default:r(()=>{var u,e,g,y,P;return[l[12]||(l[12]=t("h4",null,"当前用户信息",-1)),t("p",null,[l[6]||(l[6]=t("strong",null,"用户名:",-1)),n(" "+i(((u=o.currentUser)==null?void 0:u.username)||"未登录"),1)]),t("p",null,[l[7]||(l[7]=t("strong",null,"角色:",-1)),n(" "+i(o.formatUserRole(o.currentUser)),1)]),t("p",null,[l[8]||(l[8]=t("strong",null,"是否管理员:",-1)),n(" "+i((e=o.currentUser)!=null&&e.is_admin?"是":"否"),1)]),t("p",null,[l[9]||(l[9]=t("strong",null,"是否超级管理员:",-1)),n(" "+i((g=o.currentUser)!=null&&g.is_super_admin?"是":"否"),1)]),t("p",null,[l[10]||(l[10]=t("strong",null,"身份类型:",-1)),n(" "+i(((y=o.currentUser)==null?void 0:y.identity_type)||"未知"),1)]),t("p",null,[l[11]||(l[11]=t("strong",null,"所属组:",-1)),n(" "+i(((P=o.currentUser)==null?void 0:P.group_name)||"未知"),1)])]}),_:1}),s(x,null,{default:r(()=>[s(a,{cols:"12",md:"4"},{default:r(()=>[s(k,{outlined:""},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:"",color:"red"},{default:r(()=>[...l[13]||(l[13]=[n("mdi-crown",-1)])]),_:1}),l[14]||(l[14]=n(" 超级管理员功能 ",-1))]),_:1}),s(_,null,{default:r(()=>{var u;return[(u=o.currentUser)!=null&&u.is_super_admin?(U(),b("div",R,[s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[15]||(l[15]=[n("✓ 用户管理",-1)])]),_:1}),l[20]||(l[20]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[16]||(l[16]=[n("✓ 组管理",-1)])]),_:1}),l[21]||(l[21]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[17]||(l[17]=[n("✓ AI配置",-1)])]),_:1}),l[22]||(l[22]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[18]||(l[18]=[n("✓ 系统设置",-1)])]),_:1}),l[23]||(l[23]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[19]||(l[19]=[n("✓ 所有数据访问",-1)])]),_:1})])):(U(),b("div",j,[s(d,{color:"error",small:"",class:"mb-2"},{default:r(()=>[...l[24]||(l[24]=[n("✗ 权限不足",-1)])]),_:1})]))]}),_:1})]),_:1})]),_:1}),s(a,{cols:"12",md:"4"},{default:r(()=>[s(k,{outlined:""},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:"",color:"orange"},{default:r(()=>[...l[25]||(l[25]=[n("mdi-account-supervisor",-1)])]),_:1}),l[26]||(l[26]=n(" 管理员功能 ",-1))]),_:1}),s(_,null,{default:r(()=>{var u;return[(u=o.currentUser)!=null&&u.is_admin?(U(),b("div",D,[s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[27]||(l[27]=[n("✓ 组内任务管理",-1)])]),_:1}),l[31]||(l[31]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[28]||(l[28]=[n("✓ 组内用户查看",-1)])]),_:1}),l[32]||(l[32]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[29]||(l[29]=[n("✓ 组分析数据",-1)])]),_:1}),l[33]||(l[33]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[30]||(l[30]=[n("✓ 组报告查看",-1)])]),_:1})])):(U(),b("div",E,[s(d,{color:"error",small:"",class:"mb-2"},{default:r(()=>[...l[34]||(l[34]=[n("✗ 权限不足",-1)])]),_:1})]))]}),_:1})]),_:1})]),_:1}),s(a,{cols:"12",md:"4"},{default:r(()=>[s(k,{outlined:""},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:"",color:"blue"},{default:r(()=>[...l[35]||(l[35]=[n("mdi-account",-1)])]),_:1}),l[36]||(l[36]=n(" 普通用户功能 ",-1))]),_:1}),s(_,null,{default:r(()=>[o.currentUser?(U(),b("div",q,[s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[37]||(l[37]=[n("✓ 个人任务",-1)])]),_:1}),l[41]||(l[41]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[38]||(l[38]=[n("✓ 个人日报",-1)])]),_:1}),l[42]||(l[42]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[39]||(l[39]=[n("✓ 个人分析",-1)])]),_:1}),l[43]||(l[43]=t("br",null,null,-1)),s(d,{color:"success",small:"",class:"mb-2"},{default:r(()=>[...l[40]||(l[40]=[n("✓ 基础功能",-1)])]),_:1})])):(U(),b("div",z,[s(d,{color:"error",small:"",class:"mb-2"},{default:r(()=>[...l[44]||(l[44]=[n("✗ 未登录",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1}),s(k,{outlined:"",class:"mt-4"},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:""},{default:r(()=>[...l[45]||(l[45]=[n("mdi-function",-1)])]),_:1}),l[46]||(l[46]=n(" 权限函数测试 ",-1))]),_:1}),s(_,null,{default:r(()=>[s(x,null,{default:r(()=>[s(a,{cols:"12",md:"6"},{default:r(()=>[l[49]||(l[49]=t("h4",null,"hasPermission 函数测试",-1)),t("p",null,[l[47]||(l[47]=n("用户管理权限: ",-1)),s(d,{color:o.hasPermission(o.currentUser,"user_management")?"success":"error",small:""},{default:r(()=>[n(i(o.hasPermission(o.currentUser,"user_management")?"有权限":"无权限"),1)]),_:1},8,["color"])]),t("p",null,[l[48]||(l[48]=n("AI配置权限: ",-1)),s(d,{color:o.hasPermission(o.currentUser,"ai_config")?"success":"error",small:""},{default:r(()=>[n(i(o.hasPermission(o.currentUser,"ai_config")?"有权限":"无权限"),1)]),_:1},8,["color"])])]),_:1}),s(a,{cols:"12",md:"6"},{default:r(()=>{var u;return[l[52]||(l[52]=t("h4",null,"canAccessUser 函数测试",-1)),t("p",null,[l[50]||(l[50]=n("访问自己: ",-1)),s(d,{color:o.canAccessUser(o.currentUser,o.currentUser)?"success":"error",small:""},{default:r(()=>[n(i(o.canAccessUser(o.currentUser,o.currentUser)?"可访问":"不可访问"),1)]),_:1},8,["color"])]),t("p",null,[l[51]||(l[51]=n("canManageGroup: ",-1)),s(d,{color:o.canManageGroup(o.currentUser,(u=o.currentUser)==null?void 0:u.group_id)?"success":"error",small:""},{default:r(()=>{var e;return[n(i(o.canManageGroup(o.currentUser,(e=o.currentUser)==null?void 0:e.group_id)?"可管理":"不可管理"),1)]}),_:1},8,["color"])])]}),_:1})]),_:1})]),_:1})]),_:1}),s(k,{outlined:"",class:"mt-4"},{default:r(()=>[s(v,{class:"text-h6"},{default:r(()=>[s(m,{left:""},{default:r(()=>[...l[53]||(l[53]=[n("mdi-web",-1)])]),_:1}),l[54]||(l[54]=n(" 页面访问权限测试 ",-1))]),_:1}),s(_,null,{default:r(()=>[s(x,null,{default:r(()=>[s(a,{cols:"12",md:"3"},{default:r(()=>{var u;return[s(A,{disabled:!((u=o.currentUser)!=null&&u.is_admin),color:"primary",block:"",onClick:l[0]||(l[0]=e=>p.$router.push("/admin/users"))},{default:r(()=>[l[55]||(l[55]=n(" 用户管理 ",-1)),s(m,{right:""},{default:r(()=>{var e;return[n(i((e=o.currentUser)!=null&&e.is_admin?"mdi-check":"mdi-lock"),1)]}),_:1})]),_:1},8,["disabled"])]}),_:1}),s(a,{cols:"12",md:"3"},{default:r(()=>{var u;return[s(A,{disabled:!((u=o.currentUser)!=null&&u.is_super_admin),color:"primary",block:"",onClick:l[1]||(l[1]=e=>p.$router.push("/admin/ai"))},{default:r(()=>[l[56]||(l[56]=n(" AI配置 ",-1)),s(m,{right:""},{default:r(()=>{var e;return[n(i((e=o.currentUser)!=null&&e.is_super_admin?"mdi-check":"mdi-lock"),1)]}),_:1})]),_:1},8,["disabled"])]}),_:1}),s(a,{cols:"12",md:"3"},{default:r(()=>{var u,e;return[s(A,{disabled:!((u=o.currentUser)!=null&&u.is_admin||(e=o.currentUser)!=null&&e.is_super_admin),color:"primary",block:"",onClick:l[2]||(l[2]=g=>p.$router.push("/analytics"))},{default:r(()=>[l[57]||(l[57]=n(" 分析中心 ",-1)),s(m,{right:""},{default:r(()=>{var g,y;return[n(i((g=o.currentUser)!=null&&g.is_admin||(y=o.currentUser)!=null&&y.is_super_admin?"mdi-check":"mdi-lock"),1)]}),_:1})]),_:1},8,["disabled"])]}),_:1}),s(a,{cols:"12",md:"3"},{default:r(()=>[s(A,{color:"primary",block:"",onClick:l[3]||(l[3]=u=>p.$router.push("/dashboard"))},{default:r(()=>[l[59]||(l[59]=n(" 个人面板 ",-1)),s(m,{right:""},{default:r(()=>[...l[58]||(l[58]=[n("mdi-check",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Q=G(T,[["render",F],["__scopeId","data-v-39fa2c02"]]);export{Q as default};
