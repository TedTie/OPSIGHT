import{m as At,c as H,o as q,a as _,_ as _t,b as Se,k as D,n as Ut,l as j,d as Yt,C as Ze,e as ue,f as Xt,u as jt,t as Y,j as C,h as ne,x as Q,A as Ht,B as Je,q as Ke,F as Qe,r as et,p as de}from"./index-DxUxAYfJ.js";import{C as qt}from"./check-CL1Bk6jL.js";import{D as Zt}from"./file-text-CpSO7nFI.js";import{P as Jt}from"./plus-CcGQCmxA.js";import{E as Kt}from"./edit--FdLT_lQ.js";import{T as Qt}from"./chart-line-Be8n-pD8.js";import{f as Me,g as ge,a as ea}from"./date-qiPTsFx8.js";import{P as U,D as tt,r as at,a as St,d as ta,S as rt,b as nt,l as Re,_ as ae,c as wt,e as ve,f as We,i as aa,g as xt,h as it,j as Fe,k as be,m as kt,p as ra,t as na,n as ie,u as se,s as Dt,o as ia,q as Be,G as sa,v as oa,w as $e,C as Lt,x as Tt,y as Te,R as Ct,z as Z,A as It,B as Pt,E as la,F as ca,H as Mt,I as Rt,J as ua,K as da,L as ze,M as ga,N as va,O as ha,Q as fa,T as Ot,U as pa,V as ma,W as K,X as ya,Z as ba,Y as Aa,$ as _a,a0 as Sa,a1 as st,a2 as wa,a3 as xa,a4 as ka,a5 as Da,a6 as La,a7 as Ta,a8 as Ca,a9 as Ia,aa as Pa,ab as Ma,ac as Ra,ad as Oa}from"./index.esm.min-BfHqzkm4.js";const Na={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ea(r,t){return q(),H("svg",Na,[...t[0]||(t[0]=[_("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[_("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"}),_("path",{d:"M12 7v5l3 3"})],-1)])])}const Va=At({name:"tabler-clock",render:Ea}),Ba={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ga(r,t){return q(),H("svg",Ba,[...t[0]||(t[0]=[_("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3a9 9 0 1 0 9 9"},null,-1)])])}const Wa=At({name:"tabler-loader-2",render:Ga});function Nt(r,t,a,e,n,s,i,l){var c=n-r,u=s-t,o=a-r,g=e-t,f=Math.sqrt(o*o+g*g);o/=f,g/=f;var h=c*o+u*g,v=h/f;v*=f;var m=i[0]=r+v*o,y=i[1]=t+v*g;return Math.sqrt((m-n)*(m-n)+(y-s)*(y-s))}var ee=new U,G=new U,z=new U,te=new U,J=new U,Le=[],X=new U;function Fa(r,t){if(t<=180&&t>0){t=t/180*Math.PI,ee.fromArray(r[0]),G.fromArray(r[1]),z.fromArray(r[2]),U.sub(te,ee,G),U.sub(J,z,G);var a=te.len(),e=J.len();if(!(a<.001||e<.001)){te.scale(1/a),J.scale(1/e);var n=te.dot(J),s=Math.cos(t);if(s<n){var i=Nt(G.x,G.y,z.x,z.y,ee.x,ee.y,Le);X.fromArray(Le),X.scaleAndAdd(J,i/Math.tan(Math.PI-t));var l=z.x!==G.x?(X.x-G.x)/(z.x-G.x):(X.y-G.y)/(z.y-G.y);if(isNaN(l))return;l<0?U.copy(X,G):l>1&&U.copy(X,z),X.toArray(r[1])}}}}function $a(r,t,a){if(a<=180&&a>0){a=a/180*Math.PI,ee.fromArray(r[0]),G.fromArray(r[1]),z.fromArray(r[2]),U.sub(te,G,ee),U.sub(J,z,G);var e=te.len(),n=J.len();if(!(e<.001||n<.001)){te.scale(1/e),J.scale(1/n);var s=te.dot(t),i=Math.cos(a);if(s<i){var l=Nt(G.x,G.y,z.x,z.y,ee.x,ee.y,Le);X.fromArray(Le);var c=Math.PI/2,u=Math.acos(J.dot(t)),o=c+u-a;if(o>=c)U.copy(X,z);else{X.scaleAndAdd(J,l/Math.tan(Math.PI/2-o));var g=z.x!==G.x?(X.x-G.x)/(z.x-G.x):(X.y-G.y)/(z.y-G.y);if(isNaN(g))return;g<0?U.copy(X,G):g>1&&U.copy(X,z)}X.toArray(r[1])}}}}function Oe(r,t,a,e){var n=a==="normal",s=n?r:r.ensureState(a);s.ignore=t;var i=e.get("smooth");i&&i===!0&&(i=.3),s.shape=s.shape||{},i>0&&(s.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();n?r.useStyle(l):s.style=l}function za(r,t){var a=t.smooth,e=t.points;if(e)if(r.moveTo(e[0][0],e[0][1]),a>0&&e.length>=3){var n=nt(e[0],e[1]),s=nt(e[1],e[2]);if(!n||!s){r.lineTo(e[1][0],e[1][1]),r.lineTo(e[2][0],e[2][1]);return}var i=Math.min(n,s)*a,l=Re([],e[1],e[0],i/n),c=Re([],e[1],e[2],i/s),u=Re([],l,c,.5);r.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),r.bezierCurveTo(c[0],c[1],c[0],c[1],e[2][0],e[2][1])}else for(var o=1;o<e.length;o++)r.lineTo(e[o][0],e[o][1])}function Ua(r,t,a){var e=r.getTextGuideLine(),n=r.getTextContent();if(!n){e&&r.removeTextGuideLine();return}for(var s=t.normal,i=s.get("show"),l=n.ignore,c=0;c<tt.length;c++){var u=tt[c],o=t[u],g=u==="normal";if(o){var f=o.get("show"),h=g?l:at(n.states[u]&&n.states[u].ignore,l);if(h||!at(f,i)){var v=g?e:e&&e.states[u];v&&(v.ignore=!0),e&&Oe(e,!0,u,o);continue}e||(e=new St,r.setTextGuideLine(e),!g&&(l||!i)&&Oe(e,!0,"normal",t.normal),r.stateProxy&&(e.stateProxy=r.stateProxy)),Oe(e,!1,u,o)}}if(e){ta(e.style,a),e.style.fill=null;var m=s.get("showAbove"),y=r.textGuideLineConfig=r.textGuideLineConfig||{};y.showAbove=m||!1,e.buildPath=za}}function Ya(r,t){t=t||"labelLine";for(var a={normal:r.getModel(t)},e=0;e<rt.length;e++){var n=rt[e];a[n]=r.getModel([n,t])}return a}var Ge=function(r){ae(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(a,e){return wt(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(a,e,n){var s=this.coordinateSystem;if(s&&s.clampData){var i=s.clampData(a),l=s.dataToPoint(i);if(n)ve(s.getAxes(),function(f,h){if(f.type==="category"&&e!=null){var v=f.getTicksCoords(),m=f.getTickModel().get("alignWithLabel"),y=i[h],x=e[h]==="x1"||e[h]==="y1";if(x&&!m&&(y+=1),v.length<2)return;if(v.length===2){l[h]=f.toGlobalCoord(f.getExtent()[x?1:0]);return}for(var w=void 0,k=void 0,b=1,d=0;d<v.length;d++){var A=v[d].coord,S=d===v.length-1?v[d-1].tickValue+b:v[d].tickValue;if(S===y){k=A;break}else if(S<y)w=A;else if(w!=null&&S>y){k=(A+w)/2;break}d===1&&(b=S-v[0].tickValue)}k==null&&(w?w&&(k=v[v.length-1].coord):k=v[0].coord),l[h]=f.toGlobalCoord(k)}});else{var c=this.getData(),u=c.getLayout("offset"),o=c.getLayout("size"),g=s.getBaseAxis().isHorizontal()?0:1;l[g]+=u+o/2}return l}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(We);We.registerClass(Ge);var Xa=function(r){ae(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(){return wt(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>a&&(a=e),a},t.prototype.brushSelector=function(a,e,n){return n.rect(e.getItemLayout(a))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=aa(Ge.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Ge),ja=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),ot=function(r){ae(t,r);function t(a){var e=r.call(this,a)||this;return e.type="sausage",e}return t.prototype.getDefaultShape=function(){return new ja},t.prototype.buildPath=function(a,e){var n=e.cx,s=e.cy,i=Math.max(e.r0||0,0),l=Math.max(e.r,0),c=(l-i)*.5,u=i+c,o=e.startAngle,g=e.endAngle,f=e.clockwise,h=Math.PI*2,v=f?g-o<h:o-g<h;v||(o=g-(f?h:-h));var m=Math.cos(o),y=Math.sin(o),x=Math.cos(g),w=Math.sin(g);v?(a.moveTo(m*i+n,y*i+s),a.arc(m*u+n,y*u+s,c,-Math.PI+o,o,!f)):a.moveTo(m*l+n,y*l+s),a.arc(n,s,l,o,g,!f),a.arc(x*u+n,w*u+s,c,g-Math.PI*2,g-Math.PI,!f),i!==0&&a.arc(n,s,i,g,o,f)},t}(xt);function Ha(r,t){t=t||{};var a=t.isRoundCap;return function(e,n,s){var i=n.position;if(!i||i instanceof Array)return it(e,n,s);var l=r(i),c=n.distance!=null?n.distance:5,u=this.shape,o=u.cx,g=u.cy,f=u.r,h=u.r0,v=(f+h)/2,m=u.startAngle,y=u.endAngle,x=(m+y)/2,w=a?Math.abs(f-h)/2:0,k=Math.cos,b=Math.sin,d=o+f*k(m),A=g+f*b(m),S="left",p="top";switch(l){case"startArc":d=o+(h-c)*k(x),A=g+(h-c)*b(x),S="center",p="top";break;case"insideStartArc":d=o+(h+c)*k(x),A=g+(h+c)*b(x),S="center",p="bottom";break;case"startAngle":d=o+v*k(m)+we(m,c+w,!1),A=g+v*b(m)+xe(m,c+w,!1),S="right",p="middle";break;case"insideStartAngle":d=o+v*k(m)+we(m,-c+w,!1),A=g+v*b(m)+xe(m,-c+w,!1),S="left",p="middle";break;case"middle":d=o+v*k(x),A=g+v*b(x),S="center",p="middle";break;case"endArc":d=o+(f+c)*k(x),A=g+(f+c)*b(x),S="center",p="bottom";break;case"insideEndArc":d=o+(f-c)*k(x),A=g+(f-c)*b(x),S="center",p="top";break;case"endAngle":d=o+v*k(y)+we(y,c+w,!0),A=g+v*b(y)+xe(y,c+w,!0),S="left",p="middle";break;case"insideEndAngle":d=o+v*k(y)+we(y,-c+w,!0),A=g+v*b(y)+xe(y,-c+w,!0),S="right",p="middle";break;default:return it(e,n,s)}return e=e||{},e.x=d,e.y=A,e.align=S,e.verticalAlign=p,e}}function qa(r,t,a,e){if(Fe(e)){r.setTextConfig({rotation:e});return}else if(be(t)){r.setTextConfig({rotation:0});return}var n=r.shape,s=n.clockwise?n.startAngle:n.endAngle,i=n.clockwise?n.endAngle:n.startAngle,l=(s+i)/2,c,u=a(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=l;break;case"startAngle":case"insideStartAngle":c=s;break;case"endAngle":case"insideEndAngle":c=i;break;default:r.setTextConfig({rotation:0});return}var o=Math.PI*1.5-c;u==="middle"&&o>Math.PI/2&&o<Math.PI*1.5&&(o-=Math.PI),r.setTextConfig({rotation:o})}function we(r,t,a){return t*Math.sin(r)*(a?-1:1)}function xe(r,t,a){return t*Math.cos(r)*(a?1:-1)}function ye(r,t,a){var e=r.get("borderRadius");if(e==null)return a?{cornerRadius:0}:null;be(e)||(e=[e,e,e,e]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:kt(e,function(s){return ra(s,n)})}}var Ne=Math.max,Ee=Math.min;function Za(r,t){var a=r.getArea&&r.getArea();if(Tt(r,"cartesian2d")){var e=r.getBaseAxis();if(e.type!=="category"||!e.onBand){var n=t.getLayout("bandWidth");e.isHorizontal()?(a.x-=n,a.width+=n*2):(a.y-=n,a.height+=n*2)}}return a}var Ja=function(r){ae(t,r);function t(){var a=r.call(this)||this;return a.type=t.type,a._isFirstFrame=!0,a}return t.prototype.render=function(a,e,n,s){this._model=a,this._removeOnRenderedListener(n),this._updateDrawMode(a);var i=a.get("coordinateSystem");(i==="cartesian2d"||i==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,e,n):this._renderNormal(a,e,n,s))},t.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},t.prototype.incrementalRender=function(a,e){this._progressiveEls=[],this._incrementalRenderLarge(a,e)},t.prototype.eachRendered=function(a){na(this._progressiveEls||this.group,a)},t.prototype._updateDrawMode=function(a){var e=a.pipelineContext.large;(this._isLargeDraw==null||e!==this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},t.prototype._renderNormal=function(a,e,n,s){var i=this.group,l=a.getData(),c=this._data,u=a.coordinateSystem,o=u.getBaseAxis(),g;u.type==="cartesian2d"?g=o.isHorizontal():u.type==="polar"&&(g=o.dim==="angle");var f=a.isAnimationEnabled()?a:null,h=Ka(a,u);h&&this._enableRealtimeSort(h,l,n);var v=a.get("clip",!0)||h,m=Za(u,l);i.removeClipPath();var y=a.get("roundCap",!0),x=a.get("showBackground",!0),w=a.getModel("backgroundStyle"),k=w.get("borderRadius")||0,b=[],d=this._backgroundEls,A=s&&s.isInitSort,S=s&&s.type==="changeAxisOrder";function p(L){var M=ke[u.type](l,L),P=ir(u,g,M);return P.useStyle(w.getItemStyle()),u.type==="cartesian2d"?P.setShape("r",k):P.setShape("cornerRadius",k),b[L]=P,P}l.diff(c).add(function(L){var M=l.getItemModel(L),P=ke[u.type](l,L,M);if(x&&p(L),!(!l.hasValue(L)||!gt[u.type](P))){var V=!1;v&&(V=lt[u.type](m,P));var R=ct[u.type](a,l,L,P,g,f,o.model,!1,y);h&&(R.forceLabelAnimation=!0),vt(R,l,L,M,P,a,g,u.type==="polar"),A?R.attr({shape:P}):h?ut(h,f,R,P,L,g,!1,!1):ie(R,{shape:P},a,L),l.setItemGraphicEl(L,R),i.add(R),R.ignore=V}}).update(function(L,M){var P=l.getItemModel(L),V=ke[u.type](l,L,P);if(x){var R=void 0;d.length===0?R=p(M):(R=d[M],R.useStyle(w.getItemStyle()),u.type==="cartesian2d"?R.setShape("r",k):R.setShape("cornerRadius",k),b[L]=R);var N=ke[u.type](l,L),W=Vt(g,N,u);se(R,{shape:W},f,L)}var O=c.getItemGraphicEl(M);if(!l.hasValue(L)||!gt[u.type](V)){i.remove(O);return}var E=!1;if(v&&(E=lt[u.type](m,V),E&&i.remove(O)),O?Dt(O):O=ct[u.type](a,l,L,V,g,f,o.model,!!O,y),h&&(O.forceLabelAnimation=!0),S){var F=O.getTextContent();if(F){var B=ia(F);B.prevValue!=null&&(B.prevValue=B.value)}}else vt(O,l,L,P,V,a,g,u.type==="polar");A?O.attr({shape:V}):h?ut(h,f,O,V,L,g,!0,S):se(O,{shape:V},a,L,null),l.setItemGraphicEl(L,O),O.ignore=E,i.add(O)}).remove(function(L){var M=c.getItemGraphicEl(L);M&&Be(M,a,L)}).execute();var T=this._backgroundGroup||(this._backgroundGroup=new sa);T.removeAll();for(var I=0;I<b.length;++I)T.add(b[I]);i.add(T),this._backgroundEls=b,this._data=l},t.prototype._renderLarge=function(a,e,n){this._clear(),ft(a,this.group),this._updateLargeClip(a)},t.prototype._incrementalRenderLarge=function(a,e){this._removeBackground(),ft(e,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(a){var e=a.get("clip",!0)&&oa(a.coordinateSystem,!1,a),n=this.group;e?n.setClipPath(e):n.removeClipPath()},t.prototype._enableRealtimeSort=function(a,e,n){var s=this;if(e.count()){var i=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,a,n),this._isFirstFrame=!1;else{var l=function(c){var u=e.getItemGraphicEl(c),o=u&&u.shape;return o&&Math.abs(i.isHorizontal()?o.height:o.width)||0};this._onRendered=function(){s._updateSortWithinSameData(e,l,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(a,e,n){var s=[];return a.each(a.mapDimension(e.dim),function(i,l){var c=n(l);c=c??NaN,s.push({dataIndex:l,mappedValue:c,ordinalNumber:i})}),s.sort(function(i,l){return l.mappedValue-i.mappedValue}),{ordinalNumbers:kt(s,function(i){return i.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(a,e,n){for(var s=n.scale,i=a.mapDimension(n.dim),l=Number.MAX_VALUE,c=0,u=s.getOrdinalMeta().categories.length;c<u;++c){var o=a.rawIndexOf(i,s.getRawOrdinalNumber(c)),g=o<0?Number.MIN_VALUE:e(a.indexOfRawIndex(o));if(g>l)return!0;l=g}return!1},t.prototype._isOrderDifferentInView=function(a,e){for(var n=e.scale,s=n.getExtent(),i=Math.max(0,s[0]),l=Math.min(s[1],n.getOrdinalMeta().categories.length-1);i<=l;++i)if(a.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(a,e,n,s){if(this._isOrderChangedWithinSameData(a,e,n)){var i=this._dataSort(a,n,e);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(a,e,n){var s=e.baseAxis,i=this._dataSort(a,s,function(l){return a.get(a.mapDimension(e.otherAxis.dim),l)});n.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:i})},t.prototype.remove=function(a,e){this._clear(this._model),this._removeOnRenderedListener(e)},t.prototype.dispose=function(a,e){this._removeOnRenderedListener(e)},t.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(a){var e=this.group,n=this._data;a&&a.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(s){Be(s,a,$e(s).dataIndex)})):e.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Lt),lt={cartesian2d:function(r,t){var a=t.width<0?-1:1,e=t.height<0?-1:1;a<0&&(t.x+=t.width,t.width=-t.width),e<0&&(t.y+=t.height,t.height=-t.height);var n=r.x+r.width,s=r.y+r.height,i=Ne(t.x,r.x),l=Ee(t.x+t.width,n),c=Ne(t.y,r.y),u=Ee(t.y+t.height,s),o=l<i,g=u<c;return t.x=o&&i>n?l:i,t.y=g&&c>s?u:c,t.width=o?0:l-i,t.height=g?0:u-c,a<0&&(t.x+=t.width,t.width=-t.width),e<0&&(t.y+=t.height,t.height=-t.height),o||g},polar:function(r,t){var a=t.r0<=t.r?1:-1;if(a<0){var e=t.r;t.r=t.r0,t.r0=e}var n=Ee(t.r,r.r),s=Ne(t.r0,r.r0);t.r=n,t.r0=s;var i=n-s<0;if(a<0){var e=t.r;t.r=t.r0,t.r0=e}return i}},ct={cartesian2d:function(r,t,a,e,n,s,i,l,c){var u=new Ct({shape:Z({},e),z2:1});if(u.__dataIndex=a,u.name="item",s){var o=u.shape,g=n?"height":"width";o[g]=0}return u},polar:function(r,t,a,e,n,s,i,l,c){var u=!n&&c?ot:Te,o=new u({shape:e,z2:1});o.name="item";var g=Et(n);if(o.calculateTextPosition=Ha(g,{isRoundCap:u===ot}),s){var f=o.shape,h=n?"r":"endAngle",v={};f[h]=n?e.r0:e.startAngle,v[h]=e[h],(l?se:ie)(o,{shape:v},s)}return o}};function Ka(r,t){var a=r.get("realtimeSort",!0),e=t.getBaseAxis();if(a&&e.type==="category"&&t.type==="cartesian2d")return{baseAxis:e,otherAxis:t.getOtherAxis(e)}}function ut(r,t,a,e,n,s,i,l){var c,u;s?(u={x:e.x,width:e.width},c={y:e.y,height:e.height}):(u={y:e.y,height:e.height},c={x:e.x,width:e.width}),l||(i?se:ie)(a,{shape:c},t,n,null);var o=t?r.baseAxis.model:null;(i?se:ie)(a,{shape:u},o,n)}function dt(r,t){for(var a=0;a<t.length;a++)if(!isFinite(r[t[a]]))return!0;return!1}var Qa=["x","y","width","height"],er=["cx","cy","r","startAngle","endAngle"],gt={cartesian2d:function(r){return!dt(r,Qa)},polar:function(r){return!dt(r,er)}},ke={cartesian2d:function(r,t,a){var e=r.getItemLayout(t),n=a?ar(a,e):0,s=e.width>0?1:-1,i=e.height>0?1:-1;return{x:e.x+s*n/2,y:e.y+i*n/2,width:e.width-s*n,height:e.height-i*n}},polar:function(r,t,a){var e=r.getItemLayout(t);return{cx:e.cx,cy:e.cy,r0:e.r0,r:e.r,startAngle:e.startAngle,endAngle:e.endAngle,clockwise:e.clockwise}}};function tr(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Et(r){return function(t){var a=t?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+a;default:return e}}}(r)}function vt(r,t,a,e,n,s,i,l){var c=t.getItemVisual(a,"style");if(l){if(!s.get("roundCap")){var o=r.shape,g=ye(e.getModel("itemStyle"),o,!0);Z(o,g),r.setShape(o)}}else{var u=e.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(c);var f=e.getShallow("cursor");f&&r.attr("cursor",f);var h=l?i?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":i?n.height>=0?"bottom":"top":n.width>=0?"right":"left",v=It(e);Pt(r,v,{labelFetcher:s,labelDataIndex:a,defaultText:la(s.getData(),a),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:h});var m=r.getTextContent();if(l&&m){var y=e.get(["label","position"]);r.textConfig.inside=y==="middle"?!0:null,qa(r,y==="outside"?h:y,Et(i),e.get(["label","rotate"]))}ca(m,v,s.getRawValue(a),function(w){return da(t,w)});var x=e.getModel(["emphasis"]);Mt(r,x.get("focus"),x.get("blurScope"),x.get("disabled")),Rt(r,e),tr(n)&&(r.style.fill="none",r.style.stroke="none",ve(r.states,function(w){w.style&&(w.style.fill=w.style.stroke="none")}))}function ar(r,t){var a=r.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var e=r.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(e,n,s)}var rr=function(){function r(){}return r}(),ht=function(r){ae(t,r);function t(a){var e=r.call(this,a)||this;return e.type="largeBar",e}return t.prototype.getDefaultShape=function(){return new rr},t.prototype.buildPath=function(a,e){for(var n=e.points,s=this.baseDimIdx,i=1-this.baseDimIdx,l=[],c=[],u=this.barWidth,o=0;o<n.length;o+=3)c[s]=u,c[i]=n[o+2],l[s]=n[o+s],l[i]=n[o+i],a.rect(l[0],l[1],c[0],c[1])},t}(xt);function ft(r,t,a,e){var n=r.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,i=n.getLayout("largeDataIndices"),l=n.getLayout("size"),c=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var o=new ht({shape:{points:u},incremental:!!e,silent:!0,z2:0});o.baseDimIdx=s,o.largeDataIndices=i,o.barWidth=l,o.useStyle(c.getItemStyle()),t.add(o),a&&a.push(o)}var g=new ht({shape:{points:n.getLayout("largePoints")},incremental:!!e,ignoreCoarsePointer:!0,z2:1});g.baseDimIdx=s,g.largeDataIndices=i,g.barWidth=l,t.add(g),g.useStyle(n.getVisual("style")),g.style.stroke=null,$e(g).seriesIndex=r.seriesIndex,r.get("silent")||(g.on("mousedown",pt),g.on("mousemove",pt)),a&&a.push(g)}var pt=ua(function(r){var t=this,a=nr(t,r.offsetX,r.offsetY);$e(t).dataIndex=a>=0?a:null},30,!1);function nr(r,t,a){for(var e=r.baseDimIdx,n=1-e,s=r.shape.points,i=r.largeDataIndices,l=[],c=[],u=r.barWidth,o=0,g=s.length/3;o<g;o++){var f=o*3;if(c[e]=u,c[n]=s[f+2],l[e]=s[f+e],l[n]=s[f+n],c[n]<0&&(l[n]+=c[n],c[n]=-c[n]),t>=l[0]&&t<=l[0]+c[0]&&a>=l[1]&&a<=l[1]+c[1])return i[o]}return-1}function Vt(r,t,a){if(Tt(a,"cartesian2d")){var e=t,n=a.getArea();return{x:r?e.x:n.x,y:r?n.y:e.y,width:r?e.width:n.width,height:r?n.height:e.height}}else{var n=a.getArea(),s=t;return{cx:n.cx,cy:n.cy,r0:r?n.r0:s.r0,r:r?n.r:s.r,startAngle:r?s.startAngle:0,endAngle:r?s.endAngle:Math.PI*2}}}function ir(r,t,a){var e=r.type==="polar"?Te:Ct;return new e({shape:Vt(t,a,r),silent:!0,z2:0})}function sr(r){r.registerChartView(Ja),r.registerSeriesModel(Xa),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,ze(ga,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,va("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,ha("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,a){var e=t.componentType||"series";a.eachComponent({mainType:e,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var mt=Math.PI*2,De=Math.PI/180;function Bt(r,t){return ma(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Gt(r,t){var a=Bt(r,t),e=r.get("center"),n=r.get("radius");be(n)||(n=[0,n]);var s=K(a.width,t.getWidth()),i=K(a.height,t.getHeight()),l=Math.min(s,i),c=K(n[0],l/2),u=K(n[1],l/2),o,g,f=r.coordinateSystem;if(f){var h=f.dataToPoint(e);o=h[0]||0,g=h[1]||0}else be(e)||(e=[e,e]),o=K(e[0],s)+a.x,g=K(e[1],i)+a.y;return{cx:o,cy:g,r0:c,r:u}}function or(r,t,a){t.eachSeriesByType(r,function(e){var n=e.getData(),s=n.mapDimension("value"),i=Bt(e,a),l=Gt(e,a),c=l.cx,u=l.cy,o=l.r,g=l.r0,f=-e.get("startAngle")*De,h=e.get("endAngle"),v=e.get("padAngle")*De;h=h==="auto"?f-mt:-h*De;var m=e.get("minAngle")*De,y=m+v,x=0;n.each(s,function(W){!isNaN(W)&&x++});var w=n.getSum(s),k=Math.PI/(w||x)*2,b=e.get("clockwise"),d=e.get("roseType"),A=e.get("stillShowZeroSum"),S=n.getDataExtent(s);S[0]=0;var p=b?1:-1,T=[f,h],I=p*v/2;fa(T,!b),f=T[0],h=T[1];var L=Wt(e);L.startAngle=f,L.endAngle=h,L.clockwise=b;var M=Math.abs(h-f),P=M,V=0,R=f;if(n.setLayout({viewRect:i,r:o}),n.each(s,function(W,O){var E;if(isNaN(W)){n.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:c,cy:u,r0:g,r:d?NaN:o});return}d!=="area"?E=w===0&&A?k:W*k:E=M/x,E<y?(E=y,P-=y):V+=W;var F=R+p*E,B=0,$=0;v>E?(B=R+p*E/2,$=B):(B=R+I,$=F-I),n.setItemLayout(O,{angle:E,startAngle:B,endAngle:$,clockwise:b,cx:c,cy:u,r0:g,r:d?pa(W,S,[g,o]):o}),R=F}),P<mt&&x)if(P<=.001){var N=M/x;n.each(s,function(W,O){if(!isNaN(W)){var E=n.getItemLayout(O);E.angle=N;var F=0,B=0;N<v?(F=f+p*(O+1/2)*N,B=F):(F=f+p*O*N+I,B=f+p*(O+1)*N-I),E.startAngle=F,E.endAngle=B}})}else k=P/V,R=f,n.each(s,function(W,O){if(!isNaN(W)){var E=n.getItemLayout(O),F=E.angle===y?y:W*k,B=0,$=0;F<v?(B=R+p*F/2,$=B):(B=R+I,$=R+p*F-I),E.startAngle=B,E.endAngle=$,R+=p*F}})})}var Wt=Ot();function lr(r){return{seriesType:r,reset:function(t,a){var e=a.findComponents({mainType:"legend"});if(!(!e||!e.length)){var n=t.getData();n.filterSelf(function(s){for(var i=n.getName(s),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var cr=Math.PI/180;function yt(r,t,a,e,n,s,i,l,c,u){if(r.length<2)return;function o(m){for(var y=m.rB,x=y*y,w=0;w<m.list.length;w++){var k=m.list[w],b=Math.abs(k.label.y-a),d=e+k.len,A=d*d,S=Math.sqrt(Math.abs((1-b*b/x)*A)),p=t+(S+k.len2)*n,T=p-k.label.x,I=k.targetTextWidth-T*n;Ft(k,I,!0),k.label.x=p}}function g(m){for(var y={list:[],maxY:0},x={list:[],maxY:0},w=0;w<m.length;w++)if(m[w].labelAlignTo==="none"){var k=m[w],b=k.label.y>a?x:y,d=Math.abs(k.label.y-a);if(d>=b.maxY){var A=k.label.x-t-k.len2*n,S=e+k.len,p=Math.abs(A)<S?Math.sqrt(d*d/(1-A*A/S/S)):S;b.rB=p,b.maxY=d}b.list.push(k)}o(y),o(x)}for(var f=r.length,h=0;h<f;h++)if(r[h].position==="outer"&&r[h].labelAlignTo==="labelLine"){var v=r[h].label.x-u;r[h].linePoints[1][0]+=v,r[h].label.x=u}ya(r,c,c+i)&&g(r)}function ur(r,t,a,e,n,s,i,l){for(var c=[],u=[],o=Number.MAX_VALUE,g=-Number.MAX_VALUE,f=0;f<r.length;f++){var h=r[f].label;Ve(r[f])||(h.x<t?(o=Math.min(o,h.x),c.push(r[f])):(g=Math.max(g,h.x),u.push(r[f])))}for(var f=0;f<r.length;f++){var v=r[f];if(!Ve(v)&&v.linePoints){if(v.labelStyleWidth!=null)continue;var h=v.label,m=v.linePoints,y=void 0;v.labelAlignTo==="edge"?h.x<t?y=m[2][0]-v.labelDistance-i-v.edgeDistance:y=i+n-v.edgeDistance-m[2][0]-v.labelDistance:v.labelAlignTo==="labelLine"?h.x<t?y=o-i-v.bleedMargin:y=i+n-g-v.bleedMargin:h.x<t?y=h.x-i-v.bleedMargin:y=i+n-h.x-v.bleedMargin,v.targetTextWidth=y,Ft(v,y)}}yt(u,t,a,e,1,n,s,i,l,g),yt(c,t,a,e,-1,n,s,i,l,o);for(var f=0;f<r.length;f++){var v=r[f];if(!Ve(v)&&v.linePoints){var h=v.label,m=v.linePoints,x=v.labelAlignTo==="edge",w=h.style.padding,k=w?w[1]+w[3]:0,b=h.style.backgroundColor?0:k,d=v.rect.width+b,A=m[1][0]-m[2][0];x?h.x<t?m[2][0]=i+v.edgeDistance+d+v.labelDistance:m[2][0]=i+n-v.edgeDistance-d-v.labelDistance:(h.x<t?m[2][0]=h.x+v.labelDistance:m[2][0]=h.x-v.labelDistance,m[1][0]=m[2][0]+A),m[1][1]=m[2][1]=h.y}}}function Ft(r,t,a){if(a===void 0&&(a=!1),r.labelStyleWidth==null){var e=r.label,n=e.style,s=r.rect,i=n.backgroundColor,l=n.padding,c=l?l[1]+l[3]:0,u=n.overflow,o=s.width+(i?0:c);if(t<o||a){var g=s.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",t-c);var f=e.getBoundingRect();e.setStyle("width",Math.ceil(f.width)),e.setStyle("backgroundColor",i)}else{var h=t-c,v=t<o?h:a?h>r.unconstrainedWidth?null:h:null;e.setStyle("width",v)}var m=e.getBoundingRect();s.width=m.width;var y=(e.style.margin||0)+2.1;s.height=m.height+y,s.y-=(s.height-g)/2}}}function Ve(r){return r.position==="center"}function dr(r){var t=r.getData(),a=[],e,n,s=!1,i=(r.get("minShowLabelAngle")||0)*cr,l=t.getLayout("viewRect"),c=t.getLayout("r"),u=l.width,o=l.x,g=l.y,f=l.height;function h(A){A.ignore=!0}function v(A){if(!A.ignore)return!0;for(var S in A.states)if(A.states[S].ignore===!1)return!0;return!1}t.each(function(A){var S=t.getItemGraphicEl(A),p=S.shape,T=S.getTextContent(),I=S.getTextGuideLine(),L=t.getItemModel(A),M=L.getModel("label"),P=M.get("position")||L.get(["emphasis","label","position"]),V=M.get("distanceToLabelLine"),R=M.get("alignTo"),N=K(M.get("edgeDistance"),u),W=M.get("bleedMargin"),O=L.getModel("labelLine"),E=O.get("length");E=K(E,u);var F=O.get("length2");if(F=K(F,u),Math.abs(p.endAngle-p.startAngle)<i){ve(T.states,h),T.ignore=!0,I&&(ve(I.states,h),I.ignore=!0);return}if(v(T)){var B=(p.startAngle+p.endAngle)/2,$=Math.cos(B),re=Math.sin(B),he,Ae,Ue,_e;e=p.cx,n=p.cy;var oe=P==="inside"||P==="inner";if(P==="center")he=p.cx,Ae=p.cy,_e="center";else{var Ce=(oe?(p.r+p.r0)/2*$:p.r*$)+e,Ie=(oe?(p.r+p.r0)/2*re:p.r*re)+n;if(he=Ce+$*3,Ae=Ie+re*3,!oe){var Ye=Ce+$*(E+c-p.r),Xe=Ie+re*(E+c-p.r),je=Ye+($<0?-1:1)*F,He=Xe;R==="edge"?he=$<0?o+N:o+u-N:he=je+($<0?-V:V),Ae=He,Ue=[[Ce,Ie],[Ye,Xe],[je,He]]}_e=oe?"center":R==="edge"?$>0?"right":"left":$>0?"left":"right"}var fe=Math.PI,le=0,pe=M.get("rotate");if(Fe(pe))le=pe*(fe/180);else if(P==="center")le=0;else if(pe==="radial"||pe===!0){var $t=$<0?-B+fe:-B;le=$t}else if(pe==="tangential"&&P!=="outside"&&P!=="outer"){var ce=Math.atan2($,re);ce<0&&(ce=fe*2+ce);var zt=re>0;zt&&(ce=fe+ce),le=ce-fe}if(s=!!le,T.x=he,T.y=Ae,T.rotation=le,T.setStyle({verticalAlign:"middle"}),oe){T.setStyle({align:_e});var Pe=T.states.select;Pe&&(Pe.x+=T.x,Pe.y+=T.y)}else{var me=T.getBoundingRect().clone();me.applyTransform(T.getComputedTransform());var qe=(T.style.margin||0)+2.1;me.y-=qe/2,me.height+=qe,a.push({label:T,labelLine:I,position:P,len:E,len2:F,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new U($,re),linePoints:Ue,textAlign:_e,labelDistance:V,labelAlignTo:R,edgeDistance:N,bleedMargin:W,rect:me,unconstrainedWidth:me.width,labelStyleWidth:T.style.width})}S.setTextConfig({inside:oe})}}),!s&&r.get("avoidLabelOverlap")&&ur(a,e,n,c,u,f,o,g);for(var m=0;m<a.length;m++){var y=a[m],x=y.label,w=y.labelLine,k=isNaN(x.x)||isNaN(x.y);if(x){x.setStyle({align:y.textAlign}),k&&(ve(x.states,h),x.ignore=!0);var b=x.states.select;b&&(b.x+=x.x,b.y+=x.y)}if(w){var d=y.linePoints;k||!d?(ve(w.states,h),w.ignore=!0):(Fa(d,y.minTurnAngle),$a(d,y.surfaceNormal,y.maxSurfaceAngle),w.setShape({points:d}),x.__hostTarget.textGuideLineConfig={anchor:new U(d[0][0],d[0][1])})}}}var gr=function(r){ae(t,r);function t(a,e,n){var s=r.call(this)||this;s.z2=2;var i=new ba;return s.setTextContent(i),s.updateData(a,e,n,!0),s}return t.prototype.updateData=function(a,e,n,s){var i=this,l=a.hostModel,c=a.getItemModel(e),u=c.getModel("emphasis"),o=a.getItemLayout(e),g=Z(ye(c.getModel("itemStyle"),o,!0),o);if(isNaN(g.startAngle)){i.setShape(g);return}if(s){i.setShape(g);var f=l.getShallow("animationType");l.ecModel.ssr?(ie(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=g.cx,i.originY=g.cy):f==="scale"?(i.shape.r=o.r0,ie(i,{shape:{r:o.r}},l,e)):n!=null?(i.setShape({startAngle:n,endAngle:n}),ie(i,{shape:{startAngle:o.startAngle,endAngle:o.endAngle}},l,e)):(i.shape.endAngle=o.startAngle,se(i,{shape:{endAngle:o.endAngle}},l,e))}else Dt(i),se(i,{shape:g},l,e);i.useStyle(a.getItemVisual(e,"style")),Rt(i,c);var h=(o.startAngle+o.endAngle)/2,v=l.get("selectedOffset"),m=Math.cos(h)*v,y=Math.sin(h)*v,x=c.getShallow("cursor");x&&i.attr("cursor",x),this._updateLabel(l,a,e),i.ensureState("emphasis").shape=Z({r:o.r+(u.get("scale")&&u.get("scaleSize")||0)},ye(u.getModel("itemStyle"),o)),Z(i.ensureState("select"),{x:m,y,shape:ye(c.getModel(["select","itemStyle"]),o)}),Z(i.ensureState("blur"),{shape:ye(c.getModel(["blur","itemStyle"]),o)});var w=i.getTextGuideLine(),k=i.getTextContent();w&&Z(w.ensureState("select"),{x:m,y}),Z(k.ensureState("select"),{x:m,y}),Mt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(a,e,n){var s=this,i=e.getItemModel(n),l=i.getModel("labelLine"),c=e.getItemVisual(n,"style"),u=c&&c.fill,o=c&&c.opacity;Pt(s,It(i),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:o,defaultText:a.getFormattedLabel(n,"normal")||e.getName(n)});var g=s.getTextContent();s.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var f=a.get(["label","position"]);if(f!=="outside"&&f!=="outer")s.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new St,this.setTextGuideLine(h)),Ua(this,Ya(i),{stroke:u,opacity:Aa(l.get(["lineStyle","opacity"]),o,1)})}},t}(Te),vr=function(r){ae(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return t.prototype.render=function(a,e,n,s){var i=a.getData(),l=this._data,c=this.group,u;if(!l&&i.count()>0){for(var o=i.getItemLayout(0),g=1;isNaN(o&&o.startAngle)&&g<i.count();++g)o=i.getItemLayout(g);o&&(u=o.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),i.count()===0&&a.get("showEmptyCircle")){var f=Wt(a),h=new Te({shape:Z(Gt(a,n),f)});h.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,c.add(h)}i.diff(l).add(function(v){var m=new gr(i,v,u);i.setItemGraphicEl(v,m),c.add(m)}).update(function(v,m){var y=l.getItemGraphicEl(m);y.updateData(i,v,u),y.off("click"),c.add(y),i.setItemGraphicEl(v,y)}).remove(function(v){var m=l.getItemGraphicEl(v);Be(m,a,v)}).execute(),dr(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},t.prototype.dispose=function(){},t.prototype.containPoint=function(a,e){var n=e.getData(),s=n.getItemLayout(0);if(s){var i=a[0]-s.cx,l=a[1]-s.cy,c=Math.sqrt(i*i+l*l);return c<=s.r&&c>=s.r0}},t.type="pie",t}(Lt);function hr(r,t,a){t=be(t)&&{coordDimensions:t}||Z({encodeDefine:r.getEncode()},t);var e=r.getSource(),n=_a(e,t).dimensions,s=new Sa(n,r);return s.initData(e,a),s}var fr=function(){function r(t,a){this._getDataWithEncodedVisual=t,this._getRawData=a}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var a=this._getRawData();return a.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var a=this._getDataWithEncodedVisual();return a.indexOfName(t)},r.prototype.getItemVisual=function(t,a){var e=this._getDataWithEncodedVisual();return e.getItemVisual(t,a)},r}(),pr=Ot(),mr=function(r){ae(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(a){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new fr(st(this.getData,this),st(this.getRawData,this)),this._defaultLabelLine(a)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return hr(this,{coordDimensions:["value"],encodeDefaulter:ze(wa,this)})},t.prototype.getDataParams=function(a){var e=this.getData(),n=pr(e),s=n.seats;if(!s){var i=[];e.each(e.mapDimension("value"),function(c){i.push(c)}),s=n.seats=xa(i,e.hostModel.get("percentPrecision"))}var l=r.prototype.getDataParams.call(this,a);return l.percent=s[a]||0,l.$vars.push("percent"),l},t.prototype._defaultLabelLine=function(a){ka(a,"labelLine",["show"]);var e=a.labelLine,n=a.emphasis.labelLine;e.show=e.show&&a.label.show,n.show=n.show&&a.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(We);function yr(r){return{seriesType:r,reset:function(t,a){var e=t.getData();e.filterSelf(function(n){var s=e.mapDimension("value"),i=e.get(s,n);return!(Fe(i)&&!isNaN(i)&&i<0)})}}}function br(r){r.registerChartView(vr),r.registerSeriesModel(mr),Da("pie",r.registerAction),r.registerLayout(ze(or,"pie")),r.registerProcessor(lr("pie")),r.registerProcessor(yr("pie"))}const Ar={class:"chart-container"},_r={__name:"TaskChart",props:{type:{type:String,default:"pie",validator:r=>["pie","bar","line"].includes(r)},data:{type:Array,default:()=>[]},title:{type:String,default:""},height:{type:String,default:"300px"}},setup(r){La([Ca,br,sr,Ia,Pa,Ma,Ra,Oa]);const t=r,a=Se(()=>({title:{text:t.title,left:"center",textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:t.title,type:"pie",radius:"50%",data:t.data,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),e=Se(()=>({title:{text:t.title,left:"center",textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:t.data.map(i=>i.name)},yAxis:{type:"value"},series:[{name:t.title,type:"bar",data:t.data.map(i=>i.value),itemStyle:{color:"#409EFF"}}]})),n=Se(()=>({title:{text:t.title,left:"center",textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:t.data.map(i=>i.name)},yAxis:{type:"value"},series:[{name:t.title,type:"line",data:t.data.map(i=>i.value),smooth:!0,itemStyle:{color:"#67C23A"}}]})),s=Se(()=>{switch(t.type){case"pie":return a.value;case"bar":return e.value;case"line":return n.value;default:return a.value}});return(i,l)=>(q(),H("div",Ar,[D(j(Ta),{option:s.value,style:Ut({height:r.height,width:"100%"}),autoresize:""},null,8,["option","style"])]))}},bt=_t(_r,[["__scopeId","data-v-8ae302a3"]]),Sr={class:"dashboard"},wr={class:"welcome-section"},xr={class:"stats-content"},kr={class:"stats-icon pending"},Dr={class:"stats-info"},Lr={class:"stats-content"},Tr={class:"stats-icon progress"},Cr={class:"stats-info"},Ir={class:"stats-content"},Pr={class:"stats-icon completed"},Mr={class:"stats-info"},Rr={class:"stats-content"},Or={class:"stats-icon reports"},Nr={class:"stats-info"},Er={class:"card-header"},Vr={class:"task-list"},Br=["onClick"],Gr={class:"task-info"},Wr={class:"task-meta"},Fr={class:"task-date"},$r={key:0,class:"empty-state"},zr={class:"card-header"},Ur={class:"report-list"},Yr=["onClick"],Xr={class:"report-info"},jr={class:"report-meta"},Hr={class:"report-date"},qr={key:0,class:"empty-state"},Zr={class:"efficiency-item"},Jr={class:"efficiency-value"},Kr={class:"efficiency-item"},Qr={class:"efficiency-value"},en={class:"efficiency-item"},tn={class:"efficiency-value"},an={class:"action-buttons"},rn={__name:"Dashboard",setup(r){const t=jt(),a=Yt(),e=Ze({pendingTasks:0,inProgressTasks:0,completedTasks:0,reportsThisWeek:0}),n=ue([]),s=ue(!1),i=ue([]),l=ue(!1),c=ue([]),u=ue([]),o=Ze({avgCompletionTime:0,weeklyCompletionRate:0,totalWorkHours:0}),g=b=>({pending:"warning",processing:"primary",done:"success"})[b]||"info",f=b=>({pending:"待处理",processing:"进行中",done:"已完成"})[b]||b,h=b=>{t.push(`/tasks/${parseInt(b.id)}`)},v=b=>{t.push(`/reports/${parseInt(b.id)}`)},m=async()=>{var b,d;if(!a.isAuthenticated){console.log("User not authenticated, skipping stats fetch");return}try{const A=((b=a.user)==null?void 0:b.group_id)??null,[S,p]=ge(new Date),I=(await Q.get("/analytics/charts",{params:{start_date:S,end_date:p,...A?{group_id:A}:{}}})).data||{},L=I.taskStatus||I.task_status||[],M=W=>{const O=L.find(E=>E.name===W||E.status===W);return O?O.value??O.count??0:0};e.pendingTasks=M("pending"),e.inProgressTasks=M("processing"),e.completedTasks=M("done"),c.value=[{name:"待处理",value:e.pendingTasks},{name:"进行中",value:e.inProgressTasks},{name:"已完成",value:e.completedTasks}];const[P,V]=ge(new Date),N=(await Q.get("/analytics/stats",{params:{start_date:P,end_date:V,...A?{group_id:A}:{}}})).data||{};e.reportsThisWeek=N.totalReports??0}catch(A){console.error("Failed to fetch stats:",A),((d=A.response)==null?void 0:d.status)===401&&(a.logout(),t.push("/login"))}},y=async()=>{var b,d,A,S;if(!a.isAuthenticated){console.log("User not authenticated, skipping weekly trend fetch");return}try{const p=((b=a.user)==null?void 0:b.group_id)??null,[T,I]=ge(new Date),L=await Q.get("/analytics/charts",{params:{start_date:T,end_date:I,...p?{group_id:p}:{}}}),M=((d=L.data)==null?void 0:d.taskTrend)||((A=L.data)==null?void 0:A.task_trend)||[];u.value=M.map(P=>({name:P.date,value:P.completed??P.count??0}))}catch(p){if(console.error("Failed to fetch weekly trend:",p),((S=p.response)==null?void 0:S.status)===401){a.logout(),t.push("/login");return}u.value=[]}},x=async()=>{var b,d,A,S;if(!a.isAuthenticated){console.log("User not authenticated, skipping efficiency fetch");return}try{const T=(await Q.get("/stats/overview")).data||{};o.avgCompletionTime=T.avgCompletionTime??0,o.totalWorkHours=T.totalWorkHours??0;const I=((b=a.user)==null?void 0:b.group_id)??null,[L,M]=ge(new Date),V=(await Q.get("/analytics/stats",{params:{start_date:L,end_date:M,...I?{group_id:I}:{}}})).data||{};o.weeklyCompletionRate=V.completionRate??T.weeklyCompletionRate??0}catch(p){if(console.error("Failed to fetch efficiency:",p),((d=p.response)==null?void 0:d.status)===401){a.logout(),t.push("/login");return}o.avgCompletionTime=0,o.totalWorkHours=0;try{const T=((A=a.user)==null?void 0:A.group_id)??null,[I,L]=ge(new Date),M=await Q.get("/analytics/stats",{params:{start_date:I,end_date:L,...T?{group_id:T}:{}}});o.weeklyCompletionRate=((S=M.data)==null?void 0:S.completionRate)??0}catch{o.weeklyCompletionRate=0}}},w=async()=>{var b;if(!a.isAuthenticated){console.log("User not authenticated, skipping recent tasks fetch");return}s.value=!0;try{const A=(await Q.get("/tasks",{params:{page:1,size:5}})).data;Array.isArray(A)?n.value=A:A&&typeof A=="object"?n.value=A.items||A.data||[]:n.value=[]}catch(d){if(console.error("Failed to fetch recent tasks:",d),((b=d.response)==null?void 0:b.status)===401){a.logout(),t.push("/login");return}}finally{s.value=!1}},k=async()=>{var b,d;if(!a.isAuthenticated){console.log("User not authenticated, skipping reports fetch");return}l.value=!0;try{const[A,S]=ge(new Date),p=((b=a.user)==null?void 0:b.group_id)??null,I=(await Q.get("/reports",{params:{page:1,size:5,start_date:A,end_date:S,...p?{group_id:p}:{}}})).data;Array.isArray(I)?i.value=I:I&&typeof I=="object"?i.value=I.items||I.data||[]:i.value=[]}catch(A){if(console.error("Failed to fetch recent reports:",A),((d=A.response)==null?void 0:d.status)===401){a.logout(),t.push("/login");return}}finally{l.value=!1}};return Xt(async()=>{if(!a.isAuthenticated){t.push("/login");return}try{await a.fetchUserInfo()}catch(b){console.error("Token validation failed:",b),t.push("/login");return}await Promise.allSettled([m(),y(),x(),w(),k()])}),(b,d)=>{var V,R;const A=ne("el-icon"),S=ne("el-card"),p=ne("el-col"),T=ne("el-row"),I=ne("el-button"),L=ne("el-tag"),M=ne("el-empty"),P=Ht("loading");return q(),H("div",Sr,[_("div",wr,[_("h1",null,"欢迎回来，"+Y(((V=j(a).user)==null?void 0:V.full_name)||((R=j(a).user)==null?void 0:R.username))+"！",1),_("p",null,"今天是 "+Y(j(Me)(new Date,"yyyy年MM月dd日 EEEE")),1)]),D(T,{gutter:20,class:"stats-row"},{default:C(()=>[D(p,{xs:24,sm:12,md:6},{default:C(()=>[D(S,{class:"stats-card"},{default:C(()=>[_("div",xr,[_("div",kr,[D(A,null,{default:C(()=>[D(j(Va))]),_:1})]),_("div",Dr,[_("h3",null,Y(e.pendingTasks),1),d[5]||(d[5]=_("p",null,"待处理任务",-1))])])]),_:1})]),_:1}),D(p,{xs:24,sm:12,md:6},{default:C(()=>[D(S,{class:"stats-card"},{default:C(()=>[_("div",Lr,[_("div",Tr,[D(A,null,{default:C(()=>[D(j(Wa))]),_:1})]),_("div",Cr,[_("h3",null,Y(e.inProgressTasks),1),d[6]||(d[6]=_("p",null,"进行中任务",-1))])])]),_:1})]),_:1}),D(p,{xs:24,sm:12,md:6},{default:C(()=>[D(S,{class:"stats-card"},{default:C(()=>[_("div",Ir,[_("div",Pr,[D(A,null,{default:C(()=>[D(j(qt))]),_:1})]),_("div",Mr,[_("h3",null,Y(e.completedTasks),1),d[7]||(d[7]=_("p",null,"已完成任务",-1))])])]),_:1})]),_:1}),D(p,{xs:24,sm:12,md:6},{default:C(()=>[D(S,{class:"stats-card"},{default:C(()=>[_("div",Rr,[_("div",Or,[D(A,null,{default:C(()=>[D(j(Zt))]),_:1})]),_("div",Nr,[_("h3",null,Y(e.reportsThisWeek),1),d[8]||(d[8]=_("p",null,"本周日报",-1))])])]),_:1})]),_:1})]),_:1}),D(T,{gutter:20,class:"content-row"},{default:C(()=>[D(p,{xs:24,lg:12},{default:C(()=>[D(S,{class:"content-card"},{header:C(()=>[_("div",Er,[d[10]||(d[10]=_("span",null,"最近任务",-1)),D(I,{type:"text",onClick:d[0]||(d[0]=N=>b.$router.push("/tasks"))},{default:C(()=>[...d[9]||(d[9]=[de(" 查看全部 ",-1)])]),_:1})])]),default:C(()=>[Je((q(),H("div",Vr,[(q(!0),H(Qe,null,et(n.value,N=>(q(),H("div",{key:N.id,class:"task-item",onClick:W=>h(N)},[_("div",Gr,[_("h4",null,Y(N.title),1),_("p",null,Y(N.description),1),_("div",Wr,[D(L,{type:g(N.status),size:"small"},{default:C(()=>[de(Y(f(N.status)),1)]),_:2},1032,["type"]),_("span",Fr,Y(j(Me)(N.created_at)),1)])])],8,Br))),128)),n.value.length===0?(q(),H("div",$r,[D(M,{description:"暂无任务"})])):Ke("",!0)])),[[P,s.value]])]),_:1})]),_:1}),D(p,{xs:24,lg:12},{default:C(()=>[D(S,{class:"content-card"},{header:C(()=>[_("div",zr,[d[12]||(d[12]=_("span",null,"最近日报",-1)),D(I,{type:"text",onClick:d[1]||(d[1]=N=>b.$router.push("/reports"))},{default:C(()=>[...d[11]||(d[11]=[de(" 查看全部 ",-1)])]),_:1})])]),default:C(()=>[Je((q(),H("div",Ur,[(q(!0),H(Qe,null,et(i.value,N=>(q(),H("div",{key:N.id,class:"report-item",onClick:W=>v(N)},[_("div",Xr,[_("h4",null,Y(j(Me)(N.work_date))+" 日报",1),_("p",null,Y(N.work_summary||"暂无摘要"),1),_("div",jr,[_("span",Hr,Y(j(ea)(N.created_at)),1)])])],8,Yr))),128)),i.value.length===0?(q(),H("div",qr,[D(M,{description:"暂无日报"})])):Ke("",!0)])),[[P,l.value]])]),_:1})]),_:1})]),_:1}),D(T,{gutter:20,class:"charts-row"},{default:C(()=>[D(p,{xs:24,lg:12},{default:C(()=>[D(S,{class:"content-card"},{header:C(()=>[...d[13]||(d[13]=[_("span",null,"任务状态分布",-1)])]),default:C(()=>[D(bt,{type:"pie",data:c.value,title:"",height:"300px"},null,8,["data"])]),_:1})]),_:1}),D(p,{xs:24,lg:12},{default:C(()=>[D(S,{class:"content-card"},{header:C(()=>[...d[14]||(d[14]=[_("span",null,"本周任务趋势",-1)])]),default:C(()=>[D(bt,{type:"line",data:u.value,title:"",height:"300px"},null,8,["data"])]),_:1})]),_:1})]),_:1}),D(T,{gutter:20,class:"efficiency-row"},{default:C(()=>[D(p,{span:24},{default:C(()=>[D(S,{class:"content-card"},{header:C(()=>[...d[15]||(d[15]=[_("span",null,"工作效率分析",-1)])]),default:C(()=>[D(T,{gutter:20},{default:C(()=>[D(p,{xs:24,md:8},{default:C(()=>[_("div",Zr,[d[16]||(d[16]=_("h4",null,"平均完成时间",-1)),_("div",Jr,Y(o.avgCompletionTime)+"小时 ",1),d[17]||(d[17]=_("p",{class:"efficiency-desc"},"任务平均完成时间",-1))])]),_:1}),D(p,{xs:24,md:8},{default:C(()=>[_("div",Kr,[d[18]||(d[18]=_("h4",null,"本周完成率",-1)),_("div",Qr,Y(o.weeklyCompletionRate)+"% ",1),d[19]||(d[19]=_("p",{class:"efficiency-desc"},"本周任务完成率",-1))])]),_:1}),D(p,{xs:24,md:8},{default:C(()=>[_("div",en,[d[20]||(d[20]=_("h4",null,"工作时长",-1)),_("div",tn,Y(o.totalWorkHours)+"小时 ",1),d[21]||(d[21]=_("p",{class:"efficiency-desc"},"本周总工作时长",-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),D(T,{gutter:20,class:"quick-actions"},{default:C(()=>[D(p,{span:24},{default:C(()=>[D(S,{class:"content-card"},{header:C(()=>[...d[22]||(d[22]=[_("span",null,"快速操作",-1)])]),default:C(()=>[_("div",an,[D(I,{type:"primary",icon:j(Jt),onClick:d[2]||(d[2]=N=>b.$router.push("/tasks"))},{default:C(()=>[...d[23]||(d[23]=[de(" 创建任务 ",-1)])]),_:1},8,["icon"]),D(I,{type:"success",icon:j(Kt),onClick:d[3]||(d[3]=N=>b.$router.push("/reports"))},{default:C(()=>[...d[24]||(d[24]=[de(" 写日报 ",-1)])]),_:1},8,["icon"]),D(I,{type:"info",icon:j(Qt),onClick:d[4]||(d[4]=N=>b.$router.push("/analytics"))},{default:C(()=>[...d[25]||(d[25]=[de(" 查看分析 ",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1})]),_:1})])}}},vn=_t(rn,[["__scopeId","data-v-560e8bcb"]]);export{vn as default};
