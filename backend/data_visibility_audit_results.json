{
  "audit_timestamp": "2025-11-03T21:30:29.490567",
  "base_url": "http://localhost:8000",
  "users_tested": [
    {
      "username": "admin",
      "expected_role": "super_admin",
      "actual_user_data": {
        "id": 1,
        "username": "admin",
        "role": "super_admin",
        "identity_type": "sa",
        "full_identity": "超级管理员 - SA(超级分析师)",
        "ai_knowledge_branch": "ANALYTICS",
        "organization": "系统管理",
        "group_id": 2,
        "group_name": "MYC-LP01Team",
        "is_active": true,
        "is_admin": true,
        "is_super_admin": true,
        "created_at": "2025-10-30T11:04:14"
      },
      "login_success": true,
      "login_error": null,
      "api_tests": {
        "user_me": {
          "endpoint": "/api/v1/auth/me",
          "status_code": 200,
          "success": true,
          "data": {
            "id": 1,
            "username": "admin",
            "role": "super_admin",
            "identity_type": "sa",
            "full_identity": "超级管理员 - SA(超级分析师)",
            "ai_knowledge_branch": "ANALYTICS",
            "organization": "系统管理",
            "group_id": 2,
            "group_name": "MYC-LP01Team",
            "is_active": true,
            "is_admin": true,
            "is_super_admin": true,
            "created_at": "2025-10-30T11:04:14"
          },
          "error": null,
          "record_count": 1
        },
        "tasks": {
          "endpoint": "/api/v1/tasks",
          "status_code": 200,
          "success": true,
          "data": [
            {
              "id": 2,
              "title": "测试勾选任务",
              "description": "这是一个测试勾选任务",
              "task_type": "checkbox",
              "assignment_type": "all",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.152974",
              "status": "done",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:34:32"
            },
            {
              "id": 3,
              "title": "测试金额任务",
              "description": "这是一个测试金额任务",
              "task_type": "amount",
              "assignment_type": "user",
              "priority": "high",
              "target_amount": 1000.0,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.170825",
              "status": "pending",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:58:02"
            },
            {
              "id": 4,
              "title": "测试数量任务",
              "description": "这是一个测试数量任务",
              "task_type": "quantity",
              "assignment_type": "group",
              "priority": "urgent",
              "target_amount": null,
              "target_quantity": 50,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.187820",
              "status": "pending",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:58:02"
            },
            {
              "id": 5,
              "title": "测试接龙任务",
              "description": "这是一个测试接龙任务",
              "task_type": "jielong",
              "assignment_type": "all",
              "priority": "low",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": 20,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.204992",
              "status": "pending",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:17:31"
            },
            {
              "id": 6,
              "title": "测试普通任务",
              "description": "这是一个测试普通任务",
              "task_type": "checkbox",
              "assignment_type": "user",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T22:00:11.046934",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:00:11",
              "updated_at": null
            },
            {
              "id": 7,
              "title": "测试数量任务",
              "description": "这是一个测试数量任务",
              "task_type": "quantity",
              "assignment_type": "all",
              "priority": "low",
              "target_amount": null,
              "target_quantity": 50,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-10T22:00:11.047016",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:00:13",
              "updated_at": null
            },
            {
              "id": 8,
              "title": "测试勾选任务",
              "description": "这是一个测试勾选任务",
              "task_type": "checkbox",
              "assignment_type": "user",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T22:04:18.022875",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:18",
              "updated_at": null
            },
            {
              "id": 9,
              "title": "测试金额任务",
              "description": "这是一个测试金额任务",
              "task_type": "amount",
              "assignment_type": "group",
              "priority": "high",
              "target_amount": 1000.0,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-14T22:04:18.022919",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:18",
              "updated_at": null
            },
            {
              "id": 10,
              "title": "测试数量任务",
              "description": "这是一个测试数量任务",
              "task_type": "quantity",
              "assignment_type": "all",
              "priority": "low",
              "target_amount": null,
              "target_quantity": 50,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-10T22:04:18.022922",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:18",
              "updated_at": null
            },
            {
              "id": 11,
              "title": "测试勾选任务",
              "description": "这是一个测试勾选任务",
              "task_type": "checkbox",
              "assignment_type": "user",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T22:04:41.759143",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:41",
              "updated_at": null
            }
          ],
          "error": null,
          "record_count": 10
        },
        "users": {
          "endpoint": "/api/v1/users",
          "status_code": 200,
          "success": true,
          "data": [
            {
              "id": 1,
              "username": "admin",
              "role": "super_admin",
              "identity_type": "sa",
              "full_identity": "超级管理员 - SA(超级分析师)",
              "ai_knowledge_branch": "ANALYTICS",
              "organization": "系统管理",
              "group_id": 2,
              "group_name": "MYC-LP01Team",
              "is_active": true,
              "is_admin": true,
              "is_super_admin": true,
              "created_at": "2025-10-30T11:04:14"
            },
            {
              "id": 2,
              "username": "jlpss-chenjianxiong",
              "role": "admin",
              "identity_type": "ss",
              "full_identity": "管理员 - SS(班主任)",
              "ai_knowledge_branch": "SS",
              "organization": "海外后端销售TL",
              "group_id": 1,
              "group_name": "MYC-SS01Team",
              "is_active": true,
              "is_admin": true,
              "is_super_admin": false,
              "created_at": "2025-10-30T13:54:55"
            },
            {
              "id": 3,
              "username": "test_user",
              "role": "user",
              "identity_type": "ss",
              "full_identity": "普通用户 - SS(班主任)",
              "ai_knowledge_branch": "SS",
              "organization": "海外后端销售",
              "group_id": 1,
              "group_name": "MYC-SS01Team",
              "is_active": true,
              "is_admin": false,
              "is_super_admin": false,
              "created_at": "2025-10-31T12:29:37"
            }
          ],
          "error": null,
          "record_count": 3
        },
        "reports": {
          "endpoint": "/api/v1/reports",
          "status_code": 200,
          "success": true,
          "data": [
            {
              "id": 1,
              "user_id": 1,
              "work_date": "2025-11-03",
              "title": "更新后的测试日报",
              "content": "这是更新后的日报内容。",
              "work_hours": 8.0,
              "task_progress": "完成了API测试相关工作",
              "work_summary": "今天主要进行了API功能测试和修复",
              "mood_score": 8,
              "efficiency_score": 7,
              "call_count": 3,
              "call_duration": 45,
              "achievements": "成功修复了多个API问题",
              "challenges": "遇到了一些数据模型不匹配的问题",
              "tomorrow_plan": "继续完善系统功能",
              "ai_analysis": null,
              "created_at": "2025-11-03T12:31:58",
              "updated_at": "2025-11-03T12:31:58.642912"
            }
          ],
          "error": null,
          "record_count": 1
        }
      }
    },
    {
      "username": "jlpss-chenjianxiong",
      "expected_role": "admin",
      "actual_user_data": {
        "id": 2,
        "username": "jlpss-chenjianxiong",
        "role": "admin",
        "identity_type": "ss",
        "full_identity": "管理员 - SS(班主任)",
        "ai_knowledge_branch": "SS",
        "organization": "海外后端销售TL",
        "group_id": 1,
        "group_name": "MYC-SS01Team",
        "is_active": true,
        "is_admin": true,
        "is_super_admin": false,
        "created_at": "2025-10-30T13:54:55"
      },
      "login_success": true,
      "login_error": null,
      "api_tests": {
        "user_me": {
          "endpoint": "/api/v1/auth/me",
          "status_code": 200,
          "success": true,
          "data": {
            "id": 2,
            "username": "jlpss-chenjianxiong",
            "role": "admin",
            "identity_type": "ss",
            "full_identity": "管理员 - SS(班主任)",
            "ai_knowledge_branch": "SS",
            "organization": "海外后端销售TL",
            "group_id": 1,
            "group_name": "MYC-SS01Team",
            "is_active": true,
            "is_admin": true,
            "is_super_admin": false,
            "created_at": "2025-10-30T13:54:55"
          },
          "error": null,
          "record_count": 1
        },
        "tasks": {
          "endpoint": "/api/v1/tasks",
          "status_code": 200,
          "success": true,
          "data": [
            {
              "id": 2,
              "title": "测试勾选任务",
              "description": "这是一个测试勾选任务",
              "task_type": "checkbox",
              "assignment_type": "all",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.152974",
              "status": "done",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:34:32"
            },
            {
              "id": 3,
              "title": "测试金额任务",
              "description": "这是一个测试金额任务",
              "task_type": "amount",
              "assignment_type": "user",
              "priority": "high",
              "target_amount": 1000.0,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.170825",
              "status": "pending",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:58:02"
            },
            {
              "id": 4,
              "title": "测试数量任务",
              "description": "这是一个测试数量任务",
              "task_type": "quantity",
              "assignment_type": "group",
              "priority": "urgent",
              "target_amount": null,
              "target_quantity": 50,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.187820",
              "status": "pending",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:58:02"
            },
            {
              "id": 5,
              "title": "测试接龙任务",
              "description": "这是一个测试接龙任务",
              "task_type": "jielong",
              "assignment_type": "all",
              "priority": "low",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": 20,
              "jielong_config": {},
              "due_date": "2025-11-07T20:45:26.204992",
              "status": "pending",
              "created_by": 1,
              "created_at": "2025-10-31T12:45:26",
              "updated_at": "2025-11-02T14:17:31"
            },
            {
              "id": 6,
              "title": "测试普通任务",
              "description": "这是一个测试普通任务",
              "task_type": "checkbox",
              "assignment_type": "user",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T22:00:11.046934",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:00:11",
              "updated_at": null
            },
            {
              "id": 7,
              "title": "测试数量任务",
              "description": "这是一个测试数量任务",
              "task_type": "quantity",
              "assignment_type": "all",
              "priority": "low",
              "target_amount": null,
              "target_quantity": 50,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-10T22:00:11.047016",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:00:13",
              "updated_at": null
            },
            {
              "id": 8,
              "title": "测试勾选任务",
              "description": "这是一个测试勾选任务",
              "task_type": "checkbox",
              "assignment_type": "user",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T22:04:18.022875",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:18",
              "updated_at": null
            },
            {
              "id": 9,
              "title": "测试金额任务",
              "description": "这是一个测试金额任务",
              "task_type": "amount",
              "assignment_type": "group",
              "priority": "high",
              "target_amount": 1000.0,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-14T22:04:18.022919",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:18",
              "updated_at": null
            },
            {
              "id": 10,
              "title": "测试数量任务",
              "description": "这是一个测试数量任务",
              "task_type": "quantity",
              "assignment_type": "all",
              "priority": "low",
              "target_amount": null,
              "target_quantity": 50,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-10T22:04:18.022922",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:18",
              "updated_at": null
            },
            {
              "id": 11,
              "title": "测试勾选任务",
              "description": "这是一个测试勾选任务",
              "task_type": "checkbox",
              "assignment_type": "user",
              "priority": "medium",
              "target_amount": null,
              "target_quantity": null,
              "jielong_target_count": null,
              "jielong_config": {},
              "due_date": "2025-11-07T22:04:41.759143",
              "status": "pending",
              "created_by": 2,
              "created_at": "2025-10-31T14:04:41",
              "updated_at": null
            }
          ],
          "error": null,
          "record_count": 10
        },
        "users": {
          "endpoint": "/api/v1/users",
          "status_code": 200,
          "success": true,
          "data": [
            {
              "id": 1,
              "username": "admin",
              "role": "super_admin",
              "identity_type": "sa",
              "full_identity": "超级管理员 - SA(超级分析师)",
              "ai_knowledge_branch": "ANALYTICS",
              "organization": "系统管理",
              "group_id": 2,
              "group_name": "MYC-LP01Team",
              "is_active": true,
              "is_admin": true,
              "is_super_admin": true,
              "created_at": "2025-10-30T11:04:14"
            },
            {
              "id": 2,
              "username": "jlpss-chenjianxiong",
              "role": "admin",
              "identity_type": "ss",
              "full_identity": "管理员 - SS(班主任)",
              "ai_knowledge_branch": "SS",
              "organization": "海外后端销售TL",
              "group_id": 1,
              "group_name": "MYC-SS01Team",
              "is_active": true,
              "is_admin": true,
              "is_super_admin": false,
              "created_at": "2025-10-30T13:54:55"
            },
            {
              "id": 3,
              "username": "test_user",
              "role": "user",
              "identity_type": "ss",
              "full_identity": "普通用户 - SS(班主任)",
              "ai_knowledge_branch": "SS",
              "organization": "海外后端销售",
              "group_id": 1,
              "group_name": "MYC-SS01Team",
              "is_active": true,
              "is_admin": false,
              "is_super_admin": false,
              "created_at": "2025-10-31T12:29:37"
            }
          ],
          "error": null,
          "record_count": 3
        },
        "reports": {
          "endpoint": "/api/v1/reports",
          "status_code": 200,
          "success": true,
          "data": [
            {
              "id": 1,
              "user_id": 1,
              "work_date": "2025-11-03",
              "title": "更新后的测试日报",
              "content": "这是更新后的日报内容。",
              "work_hours": 8.0,
              "task_progress": "完成了API测试相关工作",
              "work_summary": "今天主要进行了API功能测试和修复",
              "mood_score": 8,
              "efficiency_score": 7,
              "call_count": 3,
              "call_duration": 45,
              "achievements": "成功修复了多个API问题",
              "challenges": "遇到了一些数据模型不匹配的问题",
              "tomorrow_plan": "继续完善系统功能",
              "ai_analysis": null,
              "created_at": "2025-11-03T12:31:58",
              "updated_at": "2025-11-03T12:31:58.642912"
            }
          ],
          "error": null,
          "record_count": 1
        }
      }
    },
    {
      "username": "test_user",
      "expected_role": "user",
      "actual_user_data": {
        "id": 3,
        "username": "test_user",
        "role": "user",
        "identity_type": "ss",
        "full_identity": "普通用户 - SS(班主任)",
        "ai_knowledge_branch": "SS",
        "organization": "海外后端销售",
        "group_id": 1,
        "group_name": "MYC-SS01Team",
        "is_active": true,
        "is_admin": false,
        "is_super_admin": false,
        "created_at": "2025-10-31T12:29:37"
      },
      "login_success": true,
      "login_error": null,
      "api_tests": {
        "user_me": {
          "endpoint": "/api/v1/auth/me",
          "status_code": 200,
          "success": true,
          "data": {
            "id": 3,
            "username": "test_user",
            "role": "user",
            "identity_type": "ss",
            "full_identity": "普通用户 - SS(班主任)",
            "ai_knowledge_branch": "SS",
            "organization": "海外后端销售",
            "group_id": 1,
            "group_name": "MYC-SS01Team",
            "is_active": true,
            "is_admin": false,
            "is_super_admin": false,
            "created_at": "2025-10-31T12:29:37"
          },
          "error": null,
          "record_count": 1
        },
        "tasks": {
          "endpoint": "/api/v1/tasks",
          "status_code": 200,
          "success": true,
          "data": [],
          "error": null,
          "record_count": 0
        },
        "users": {
          "endpoint": "/api/v1/users",
          "status_code": 403,
          "success": false,
          "data": null,
          "error": "权限不足 (预期行为)",
          "record_count": 0
        },
        "reports": {
          "endpoint": "/api/v1/reports",
          "status_code": 200,
          "success": true,
          "data": [],
          "error": null,
          "record_count": 0
        }
      }
    }
  ],
  "summary": {
    "total_users_tested": 3,
    "successful_logins": 3,
    "failed_logins": 0,
    "api_success_rates": {
      "user_me": {
        "success": 3,
        "total": 3
      },
      "tasks": {
        "success": 3,
        "total": 3
      },
      "users": {
        "success": 2,
        "total": 3
      },
      "reports": {
        "success": 3,
        "total": 3
      }
    },
    "critical_issues": [
      "普通用户 test_user 无法看到任何任务"
    ]
  }
}