# OPSIGHT æ™ºèƒ½ä»»åŠ¡ä¸æ—¥æŠ¥ç®¡ç†ç³»ç»Ÿ - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

**OPSIGHT** æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + FastAPI æ¶æ„çš„æ™ºèƒ½ä»»åŠ¡ä¸æ—¥æŠ¥ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ Cookie è®¤è¯æœºåˆ¶ï¼Œæ”¯æŒå¤šèº«ä»½ç±»å‹çš„ç”¨æˆ·ç®¡ç†å’Œä»»åŠ¡åä½œã€‚ç³»ç»Ÿé›†æˆäº† AI åˆ†æåŠŸèƒ½ï¼Œä¸ºä¼ä¸šæä¾›æ™ºèƒ½åŒ–çš„ä»»åŠ¡ç®¡ç†å’Œæ•°æ®åˆ†æè§£å†³æ–¹æ¡ˆã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ” åŸºäº Cookie çš„ç®€åŒ–è®¤è¯ç³»ç»Ÿ
- ğŸ‘¥ å¤šèº«ä»½ç±»å‹ç”¨æˆ·ç®¡ç† (CC/SS/LP/SA)
- ğŸ“‹ çµæ´»çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼ˆé‡‘é¢ã€æ•°é‡ã€æ¥é¾™ã€å‹¾é€‰å››ç§ç±»å‹ï¼‰
- ğŸ“Š æ™ºèƒ½æ—¥æŠ¥ç®¡ç†ä¸ AI åˆ†æ
- ğŸ“ˆ æ•°æ®åˆ†æå’Œå¯è§†åŒ–ä»ªè¡¨æ¿
- ğŸ¤– AI é›†æˆå’Œé…ç½®ç®¡ç†
- ğŸ“± å“åº”å¼ Web ç•Œé¢
- ğŸ”’ åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ç³»ç»Ÿ

---

## æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/HTTPS    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (Vue 3)   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  åç«¯ (FastAPI)  â”‚
â”‚   Port: 3001    â”‚                 â”‚   Port: 8000    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                   â”‚
         â”‚                                   â”‚
         â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Element Plus   â”‚                 â”‚   SQLite DB     â”‚
â”‚   UI ç»„ä»¶åº“      â”‚                 â”‚  simple_app.db  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3.3.11 (Composition API)
- **æ„å»ºå·¥å…·**: Vite 5.0.8
- **UI æ¡†æ¶**: Element Plus 2.4.4
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.7
- **è·¯ç”±**: Vue Router 4.2.5
- **HTTP å®¢æˆ·ç«¯**: Axios 1.6.2
- **å›¾è¡¨åº“**: ECharts 5.6.0 + Vue-ECharts 6.7.3
- **æ—¥æœŸå¤„ç†**: date-fns 2.30.0

#### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: FastAPI 0.104.1
- **ASGI æœåŠ¡å™¨**: Uvicorn 0.24.0
- **ORM**: SQLAlchemy 2.0.23
- **æ•°æ®éªŒè¯**: Pydantic 2.5.0
- **æ•°æ®åº“**: SQLite (simple_app.db)
- **é…ç½®ç®¡ç†**: python-dotenv 1.0.0

---

## é¡¹ç›®ç»“æ„

### ç›®å½•ç»“æ„
```
KillerApp/
â”œâ”€â”€ frontend/                 # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # Vue ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Charts/       # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TaskChart.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout/       # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AppSidebar.vue
â”‚   â”‚   â”‚   â””â”€â”€ admin/        # ç®¡ç†å‘˜ç»„ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ UserManagement.vue
â”‚   â”‚   â”œâ”€â”€ directives/       # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”‚   â””â”€â”€ can.js        # æƒé™æ§åˆ¶æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ stores/           # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js       # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js      # Store å…¥å£
â”‚   â”‚   â”‚   â””â”€â”€ task.js       # ä»»åŠ¡çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js        # API è°ƒç”¨å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js       # è®¤è¯å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ date.js       # æ—¥æœŸå¤„ç†
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue     # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.vue # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ Tasks.vue     # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ Reports.vue   # æ—¥æŠ¥ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ Analytics.vue # æ•°æ®åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.vue  # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.vue   # ä¸ªäººèµ„æ–™
â”‚   â”‚   â”‚   â”œâ”€â”€ KnowledgeBase.vue # çŸ¥è¯†åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminUsers.vue    # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminGroups.vue   # ç»„åˆ«ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminAI.vue       # AI é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminMetrics.vue  # è‡ªå®šä¹‰æŒ‡æ ‡
â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionTest.vue # æƒé™æµ‹è¯•
â”‚   â”‚   â”‚   â””â”€â”€ TestButtons.vue   # æŒ‰é’®æµ‹è¯•
â”‚   â”‚   â””â”€â”€ router/           # è·¯ç”±é…ç½®
â”‚   â”‚       â”œâ”€â”€ index.js      # ä¸»è·¯ç”±
â”‚   â”‚       â””â”€â”€ simple_routes.js # ç®€åŒ–è·¯ç”±
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ backend/                  # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ models.py         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas.py        # Pydantic æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPI åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ db.py             # æ•°æ®åº“é…ç½®
â”‚   â”‚   â””â”€â”€ crud/             # CRUD æ“ä½œ
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ simple_app.db         # SQLite æ•°æ®åº“
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ start_opsight.py          # å¯åŠ¨è„šæœ¬
```

---

## å‰ç«¯é¡µé¢è®¾è®¡ä¸äº¤äº’è¯¦è§£

### 1. ç™»å½•é¡µé¢ (`/login`)

#### é¡µé¢è®¾è®¡
- **å¸ƒå±€**: å±…ä¸­å¡ç‰‡å¼è®¾è®¡ï¼Œç®€æ´ç°ä»£
- **å“ç‰Œæ ‡è¯†**: OPSIGHT æ ‡é¢˜å’Œç³»ç»Ÿæè¿°
- **è¡¨å•å…ƒç´ **: ç”¨æˆ·åè¾“å…¥æ¡†ï¼ˆå¸¦ç”¨æˆ·å›¾æ ‡ï¼‰
- **æ“ä½œæŒ‰é’®**: ç™»å½•æŒ‰é’®ï¼ˆä¸»è‰²è°ƒï¼Œæ”¯æŒåŠ è½½çŠ¶æ€ï¼‰

#### äº¤äº’é€»è¾‘
- **ç”¨æˆ·åè¾“å…¥æ¡†**:
  - æ”¯æŒå›è½¦é”®å¿«é€Ÿç™»å½•
  - è‡ªåŠ¨æ¸…é™¤åŠŸèƒ½
  - å®æ—¶éªŒè¯ï¼ˆ2-50å­—ç¬¦é•¿åº¦ï¼‰
  
- **ç™»å½•æŒ‰é’®**:
  - ç‚¹å‡»è§¦å‘ `handleLogin()` æ–¹æ³•
  - æ˜¾ç¤ºåŠ è½½çŠ¶æ€é˜²æ­¢é‡å¤æäº¤
  - éªŒè¯é€šè¿‡åè°ƒç”¨ `authStore.login()`
  - æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ä»ªè¡¨æ¿

#### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ `useAuthStore` ç®¡ç†ç™»å½•çŠ¶æ€
- ç™»å½•æˆåŠŸåæ›´æ–°å…¨å±€ç”¨æˆ·ä¿¡æ¯
- è‡ªåŠ¨è®¾ç½®è®¤è¯ Cookie

### 2. ä»ªè¡¨æ¿é¡µé¢ (`/dashboard`)

#### é¡µé¢è®¾è®¡
- **æ¬¢è¿åŒºåŸŸ**: ä¸ªæ€§åŒ–é—®å€™å’Œå½“å‰æ—¥æœŸ
- **ç»Ÿè®¡å¡ç‰‡**: 4ä¸ªå…³é”®æŒ‡æ ‡å¡ç‰‡
  - å¾…å¤„ç†ä»»åŠ¡ï¼ˆæ—¶é’Ÿå›¾æ ‡ï¼Œæ©™è‰²ï¼‰
  - è¿›è¡Œä¸­ä»»åŠ¡ï¼ˆåŠ è½½å›¾æ ‡ï¼Œè“è‰²ï¼‰
  - å·²å®Œæˆä»»åŠ¡ï¼ˆå‹¾é€‰å›¾æ ‡ï¼Œç»¿è‰²ï¼‰
  - æœ¬å‘¨æ—¥æŠ¥ï¼ˆæ–‡æ¡£å›¾æ ‡ï¼Œç´«è‰²ï¼‰
- **å†…å®¹åŒºåŸŸ**: å·¦å³åˆ†æ å¸ƒå±€
  - å·¦ä¾§ï¼šæœ€è¿‘ä»»åŠ¡åˆ—è¡¨
  - å³ä¾§ï¼šæœ€è¿‘æ—¥æŠ¥åˆ—è¡¨

#### äº¤äº’é€»è¾‘
- **ç»Ÿè®¡å¡ç‰‡**:
  - å®æ—¶æ˜¾ç¤ºæ•°æ®ç»Ÿè®¡
  - æ‚¬åœæ•ˆæœå¢å¼ºç”¨æˆ·ä½“éªŒ
  
- **æœ€è¿‘ä»»åŠ¡åˆ—è¡¨**:
  - ç‚¹å‡»ä»»åŠ¡é¡¹è°ƒç”¨ `viewTask(task)` æŸ¥çœ‹è¯¦æƒ…
  - æ˜¾ç¤ºä»»åŠ¡çŠ¶æ€æ ‡ç­¾ï¼ˆä¸åŒé¢œè‰²ï¼‰
  - "æŸ¥çœ‹å…¨éƒ¨"æŒ‰é’®è·³è½¬åˆ°ä»»åŠ¡ç®¡ç†é¡µé¢
  
- **æœ€è¿‘æ—¥æŠ¥åˆ—è¡¨**:
  - ç‚¹å‡»æ—¥æŠ¥é¡¹è°ƒç”¨ `viewReport(report)` æŸ¥çœ‹è¯¦æƒ…
  - æ˜¾ç¤º AI æƒ…æ„Ÿåˆ†æç»“æœ
  - "æŸ¥çœ‹å…¨éƒ¨"æŒ‰é’®è·³è½¬åˆ°æ—¥æŠ¥ç®¡ç†é¡µé¢

#### æ•°æ®åŠ è½½
- é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è·å–ç»Ÿè®¡æ•°æ®
- æ”¯æŒåŠ è½½çŠ¶æ€æ˜¾ç¤º
- ç©ºçŠ¶æ€å‹å¥½æç¤º

### 3. ä»»åŠ¡ç®¡ç†é¡µé¢ (`/tasks`)

#### é¡µé¢è®¾è®¡
- **é¡µé¢å¤´éƒ¨**: æ ‡é¢˜å’Œæè¿°
- **æ“ä½œå·¥å…·æ **: 
  - ç­›é€‰å™¨ï¼ˆçŠ¶æ€ã€ä¼˜å…ˆçº§ã€ä»»åŠ¡ç±»å‹ã€æœç´¢ï¼‰
  - ç®¡ç†å‘˜ä¸“ç”¨åŠŸèƒ½ï¼ˆä»»åŠ¡ç»Ÿè®¡ã€æ‰¹é‡åˆ†é…ï¼‰
  - åˆ·æ–°æŒ‰é’®
- **ä»»åŠ¡è¡¨æ ¼**: å¤šåˆ—æ˜¾ç¤ºä»»åŠ¡ä¿¡æ¯
- **åˆ†é¡µç»„ä»¶**: æ”¯æŒé¡µé¢å¤§å°è°ƒæ•´

#### äº¤äº’é€»è¾‘

##### åˆ›å»ºä»»åŠ¡æŒ‰é’®
- **æƒé™æ§åˆ¶**: ä»…ç®¡ç†å‘˜å’Œè¶…çº§ç®¡ç†å‘˜å¯è§ (`v-can="'tasks:create'"`)
- **ç‚¹å‡»å“åº”**: è°ƒç”¨ `openCreateDialog()` æ‰“å¼€åˆ›å»ºå¯¹è¯æ¡†
- **å›¾æ ‡**: Plus å›¾æ ‡ï¼Œä¸»è‰²è°ƒæŒ‰é’®

##### ç­›é€‰åŠŸèƒ½
- **çŠ¶æ€ç­›é€‰**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆå¾…å¤„ç†ã€è¿›è¡Œä¸­ã€å·²å®Œæˆï¼‰
- **ä¼˜å…ˆçº§ç­›é€‰**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆä½ã€ä¸­ã€é«˜ã€ç´§æ€¥ï¼‰
- **ä»»åŠ¡ç±»å‹ç­›é€‰**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆé‡‘é¢ã€æ•°é‡ã€æ¥é¾™ã€å‹¾é€‰ï¼‰
- **æœç´¢æ¡†**: å®æ—¶æœç´¢ä»»åŠ¡æ ‡é¢˜å’Œæè¿°

##### æ‰¹é‡æ“ä½œ
- **é€‰æ‹©åŠŸèƒ½**: ç®¡ç†å‘˜å¯å‹¾é€‰å¤šä¸ªä»»åŠ¡
- **æ‰¹é‡åˆ†é…**: é€‰ä¸­ä»»åŠ¡åå¯æ‰¹é‡åˆ†é…ç»™ç”¨æˆ·æˆ–ç»„
- **çŠ¶æ€æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºå·²é€‰æ‹©ä»»åŠ¡æ•°é‡

##### ä»»åŠ¡æ“ä½œæŒ‰é’®
- **æŸ¥çœ‹è¯¦æƒ…**: æ‰€æœ‰ç”¨æˆ·å¯ç‚¹å‡»ï¼Œè°ƒç”¨ `viewTaskDetails(row)`
- **å¿«é€Ÿæ“ä½œ**ï¼ˆæ ¹æ®ä»»åŠ¡ç±»å‹ï¼‰:
  - **å‹¾é€‰ä»»åŠ¡**: "å®Œæˆ/å·²å®Œæˆ" æŒ‰é’®ï¼Œè°ƒç”¨ `quickToggleCheckbox(row)`
  - **é‡‘é¢ä»»åŠ¡**: "å‚ä¸" æŒ‰é’®ï¼Œè°ƒç”¨ `quickParticipateAmount(row)`
  - **æ•°é‡ä»»åŠ¡**: "å‚ä¸" æŒ‰é’®ï¼Œè°ƒç”¨ `quickParticipateQuantity(row)`
  - **æ¥é¾™ä»»åŠ¡**: "å‚ä¸" æŒ‰é’®ï¼Œè°ƒç”¨ `quickParticipateJielong(row)`

##### æƒé™æ§åˆ¶
- ä½¿ç”¨ `v-can` æŒ‡ä»¤æ§åˆ¶æŒ‰é’®æ˜¾ç¤º
- åŸºäºç”¨æˆ·è§’è‰²å’Œä»»åŠ¡çŠ¶æ€åŠ¨æ€æ˜¾ç¤ºæ“ä½œ

### 4. æ—¥æŠ¥ç®¡ç†é¡µé¢ (`/reports`)

#### é¡µé¢è®¾è®¡
- **é¡µé¢å¤´éƒ¨**: æ ‡é¢˜å’Œæè¿°
- **æ“ä½œå·¥å…·æ **:
  - æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨
  - æœç´¢æ¡†
  - åˆ·æ–°ã€è‡ªåŠ¨ç”Ÿæˆã€æ‰¹é‡åˆ†ææŒ‰é’®
- **æ—¥æŠ¥è¡¨æ ¼**: æ˜¾ç¤ºæ—¥æœŸã€æ‘˜è¦ã€AIåˆ†æã€åˆ›å»ºæ—¶é—´
- **åˆ†é¡µç»„ä»¶**: æ”¯æŒå¤šç§é¡µé¢å¤§å°

#### äº¤äº’é€»è¾‘

##### å†™æ—¥æŠ¥æŒ‰é’®
- **æƒé™æ§åˆ¶**: åŸºäº `'reports:create'` æƒé™
- **ç‚¹å‡»å“åº”**: è°ƒç”¨ `openCreateDialog()` æ‰“å¼€æ—¥æŠ¥ç¼–è¾‘å™¨
- **å›¾æ ‡**: Plus å›¾æ ‡ï¼Œä¸»è‰²è°ƒæŒ‰é’®

##### æ—¥æœŸç­›é€‰
- **æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨**: æ”¯æŒé€‰æ‹©å¼€å§‹å’Œç»“æŸæ—¥æœŸ
- **å®æ—¶ç­›é€‰**: é€‰æ‹©åè‡ªåŠ¨æ›´æ–°æ—¥æŠ¥åˆ—è¡¨

##### æ‰¹é‡æ“ä½œæŒ‰é’®
- **è‡ªåŠ¨ç”Ÿæˆä»Šæ—¥æ—¥æŠ¥**:
  - æƒé™: `'reports:auto_generate'`
  - ç‚¹å‡»: `autoGenerateReport()`
  - çŠ¶æ€: æ”¯æŒåŠ è½½çŠ¶æ€æ˜¾ç¤º
  
- **æ‰¹é‡AIåˆ†æ**:
  - æƒé™: `'reports:analyze:batch'`
  - ç‚¹å‡»: `batchAnalyzeReports()`
  - çŠ¶æ€: æ”¯æŒåŠ è½½çŠ¶æ€æ˜¾ç¤º

##### æ—¥æŠ¥æ“ä½œæŒ‰é’®
- **æŸ¥çœ‹**: è°ƒç”¨ `viewReport(row)`ï¼ŒåŸºäº `v-can:report.view="row"` æƒé™
- **ç¼–è¾‘**: è°ƒç”¨ `editReport(row)`ï¼ŒåŸºäº `v-can:report.edit="row"` æƒé™
- **AIåˆ†æ**: è°ƒç”¨ `analyzeReport(row)`ï¼Œä»…æœªåˆ†æçš„æ—¥æŠ¥æ˜¾ç¤º
- **åˆ é™¤**: è°ƒç”¨ `deleteReport(row)`ï¼ŒåŸºäº `v-can:report.delete="row"` æƒé™

##### æ—¥æŠ¥ç¼–è¾‘å¯¹è¯æ¡†
- **æ—¥æœŸé€‰æ‹©**: ç¼–è¾‘æ—¶ç¦ç”¨æ—¥æœŸä¿®æ”¹
- **å·¥ä½œæ‘˜è¦**: å¤šè¡Œæ–‡æœ¬è¾“å…¥ï¼Œ500å­—ç¬¦é™åˆ¶
- **å®Œæˆä»»åŠ¡**: 
  - ä»»åŠ¡é€‰æ‹©å™¨ï¼šå¤šé€‰ä¸‹æ‹‰æ¡†
  - è‡ªåŠ¨æ›´æ–°ï¼šé€‰æ‹©ä»»åŠ¡åè‡ªåŠ¨å¡«å……æ–‡æœ¬æè¿°
- **ä»»åŠ¡è¿›åº¦**: å„ç±»å‹ä»»åŠ¡çš„è¿›åº¦è¾“å…¥
- **å·¥ä½œæ—¶é•¿**: æ•°å­—è¾“å…¥æ¡†
- **æ•ˆç‡è¯„åˆ†**: æ»‘å—é€‰æ‹©å™¨ï¼ˆ1-100ï¼‰
- **æˆå°±ä¸æŒ‘æˆ˜**: å¤šè¡Œæ–‡æœ¬è¾“å…¥
- **æ˜æ—¥è®¡åˆ’**: å¤šè¡Œæ–‡æœ¬è¾“å…¥

### 5. æ•°æ®åˆ†æé¡µé¢ (`/analytics`)

#### é¡µé¢è®¾è®¡
- **ç»Ÿè®¡å¡ç‰‡åŒº**: å…³é”®æŒ‡æ ‡æ¦‚è§ˆ
- **å›¾è¡¨åŒºåŸŸ**: å¤šç§æ•°æ®å¯è§†åŒ–å›¾è¡¨
- **ç­›é€‰æ§åˆ¶**: æ—¶é—´èŒƒå›´ã€æ•°æ®ç±»å‹é€‰æ‹©
- **å¯¼å‡ºåŠŸèƒ½**: æ•°æ®å¯¼å‡ºæŒ‰é’®

#### äº¤äº’é€»è¾‘
- **æ—¶é—´èŒƒå›´é€‰æ‹©**: åŠ¨æ€æ›´æ–°å›¾è¡¨æ•°æ®
- **å›¾è¡¨äº¤äº’**: æ”¯æŒç¼©æ”¾ã€æ‚¬åœæ˜¾ç¤ºè¯¦æƒ…
- **æ•°æ®å¯¼å‡º**: æ”¯æŒ Excelã€PDF æ ¼å¼å¯¼å‡º
- **å®æ—¶åˆ·æ–°**: å®šæ—¶æˆ–æ‰‹åŠ¨åˆ·æ–°æ•°æ®

### 6. ç”¨æˆ·ç®¡ç†é¡µé¢ (`/admin/users`) - ç®¡ç†å‘˜ä¸“ç”¨

#### é¡µé¢è®¾è®¡
- **é¡µé¢å¤´éƒ¨**: æ ‡é¢˜å’Œæè¿°
- **æ“ä½œå·¥å…·æ **: æœç´¢ã€è§’è‰²ç­›é€‰ã€çŠ¶æ€ç­›é€‰ã€åˆ·æ–°æŒ‰é’®
- **ç”¨æˆ·è¡¨æ ¼**: æ˜¾ç¤ºç”¨æˆ·åã€ç»„ç»‡ã€æƒé™ã€èº«ä»½ã€ç»„åˆ«ã€çŠ¶æ€
- **åˆ†é¡µç»„ä»¶**: æ”¯æŒå¤šç§é¡µé¢å¤§å°

#### äº¤äº’é€»è¾‘

##### æ–°å¢ç”¨æˆ·æŒ‰é’®
- **ä½ç½®**: å¡ç‰‡å¤´éƒ¨å³ä¾§
- **ç‚¹å‡»å“åº”**: è°ƒç”¨ `showCreateDialog()` æ‰“å¼€ç”¨æˆ·åˆ›å»ºå¯¹è¯æ¡†
- **å›¾æ ‡**: Plus å›¾æ ‡ï¼Œä¸»è‰²è°ƒæŒ‰é’®

##### ç­›é€‰åŠŸèƒ½
- **æœç´¢æ¡†**: å®æ—¶æœç´¢ç”¨æˆ·å
- **è§’è‰²ç­›é€‰**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆæ™®é€šç”¨æˆ·ã€ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜ï¼‰
- **çŠ¶æ€ç­›é€‰**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆå¯ç”¨ã€ç¦ç”¨ï¼‰

##### ç”¨æˆ·æ“ä½œæŒ‰é’®
- **ç¼–è¾‘**: è°ƒç”¨ `editUser(row)` æ‰“å¼€ç¼–è¾‘å¯¹è¯æ¡†
- **å¯ç”¨/ç¦ç”¨**: è°ƒç”¨ `toggleUserStatus(row)` åˆ‡æ¢ç”¨æˆ·çŠ¶æ€
- **åˆ é™¤**: è°ƒç”¨ `deleteUser(row)` åˆ é™¤ç”¨æˆ·ï¼ˆè¶…çº§ç®¡ç†å‘˜ä¸å¯åˆ é™¤ï¼‰

##### ç”¨æˆ·ç¼–è¾‘å¯¹è¯æ¡†
- **ç”¨æˆ·å**: ç¼–è¾‘æ—¶ç¦ç”¨ä¿®æ”¹
- **ç»„ç»‡**: æ–‡æœ¬è¾“å…¥æ¡†
- **æƒé™**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆæ™®é€šç”¨æˆ·ã€ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜ï¼‰
- **èº«ä»½**: ä¸‹æ‹‰é€‰æ‹©ï¼ˆCCã€SSã€LPã€SAï¼‰
- **ç»„åˆ«**: ä¸‹æ‹‰é€‰æ‹©ç°æœ‰ç»„åˆ«
- **çŠ¶æ€**: å¼€å…³æ§åˆ¶å¯ç”¨/ç¦ç”¨

### 7. ç»„åˆ«ç®¡ç†é¡µé¢ (`/admin/groups`) - ç®¡ç†å‘˜ä¸“ç”¨

#### é¡µé¢è®¾è®¡
- **ç»„åˆ«åˆ—è¡¨**: æ˜¾ç¤ºç»„åã€æè¿°ã€æˆå‘˜æ•°é‡
- **æˆå‘˜ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†ç»„æˆå‘˜
- **æ“ä½œæŒ‰é’®**: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ç»„åˆ«

#### äº¤äº’é€»è¾‘
- **åˆ›å»ºç»„åˆ«**: æ‰“å¼€åˆ›å»ºå¯¹è¯æ¡†
- **ç¼–è¾‘ç»„åˆ«**: ä¿®æ”¹ç»„åå’Œæè¿°
- **æˆå‘˜ç®¡ç†**: æ·»åŠ /ç§»é™¤ç»„æˆå‘˜
- **åˆ é™¤ç»„åˆ«**: ç¡®è®¤ååˆ é™¤ï¼ˆéœ€æ£€æŸ¥æ˜¯å¦æœ‰æˆå‘˜ï¼‰

### 8. AI é…ç½®é¡µé¢ (`/admin/ai`) - è¶…çº§ç®¡ç†å‘˜ä¸“ç”¨

#### é¡µé¢è®¾è®¡
- **AI ä»£ç†ç®¡ç†**: åˆ›å»ºå’Œé…ç½® AI ä»£ç†
- **åŠŸèƒ½ç®¡ç†**: å®šä¹‰ AI åŠŸèƒ½
- **è°ƒç”¨æ—¥å¿—**: æŸ¥çœ‹ AI è°ƒç”¨å†å²
- **ç»Ÿè®¡ä¿¡æ¯**: AI ä½¿ç”¨ç»Ÿè®¡

#### äº¤äº’é€»è¾‘
- **åˆ›å»ºä»£ç†**: é…ç½®æ¨¡å‹ã€æç¤ºè¯ç­‰å‚æ•°
- **æµ‹è¯•åŠŸèƒ½**: åœ¨çº¿æµ‹è¯• AI åŠŸèƒ½
- **æŸ¥çœ‹æ—¥å¿—**: åˆ†é¡µæŸ¥çœ‹è°ƒç”¨è®°å½•
- **ç»Ÿè®¡åˆ†æ**: å¯è§†åŒ– AI ä½¿ç”¨æƒ…å†µ

### 9. ç³»ç»Ÿè®¾ç½®é¡µé¢ (`/settings`) - è¶…çº§ç®¡ç†å‘˜ä¸“ç”¨

#### é¡µé¢è®¾è®¡
- **AI è®¾ç½®**: OpenAI API é…ç½®
- **ç³»ç»Ÿè®¾ç½®**: åŸºç¡€ç³»ç»Ÿå‚æ•°
- **å®‰å…¨è®¾ç½®**: è®¤è¯å’Œæƒé™é…ç½®

#### äº¤äº’é€»è¾‘
- **ä¿å­˜è®¾ç½®**: éªŒè¯åä¿å­˜é…ç½®
- **æµ‹è¯•è¿æ¥**: æµ‹è¯• API è¿æ¥çŠ¶æ€
- **é‡ç½®è®¾ç½®**: æ¢å¤é»˜è®¤é…ç½®

### 10. ä¸ªäººèµ„æ–™é¡µé¢ (`/profile`)

#### é¡µé¢è®¾è®¡
- **åŸºæœ¬ä¿¡æ¯**: ç”¨æˆ·åã€ç»„ç»‡ã€èº«ä»½ä¿¡æ¯
- **å¯†ç ä¿®æ”¹**: å¯†ç æ›´æ–°è¡¨å•
- **åå¥½è®¾ç½®**: ä¸ªäººä½¿ç”¨åå¥½

#### äº¤äº’é€»è¾‘
- **æ›´æ–°èµ„æ–™**: ä¿å­˜ä¸ªäººä¿¡æ¯ä¿®æ”¹
- **ä¿®æ”¹å¯†ç **: éªŒè¯æ—§å¯†ç åæ›´æ–°
- **åå¥½ä¿å­˜**: ä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®

---

## å¯¼èˆªèœå•è®¾è®¡

### ä¾§è¾¹æ èœå•ç»“æ„

#### ä¸»èœå•é¡¹
1. **ä»ªè¡¨æ¿** (`/dashboard`)
   - å›¾æ ‡: Odometer
   - æƒé™: æ‰€æœ‰ç™»å½•ç”¨æˆ·
   
2. **ä»»åŠ¡ç®¡ç†** (`/tasks`)
   - å›¾æ ‡: List
   - æƒé™: æ‰€æœ‰ç™»å½•ç”¨æˆ·
   
3. **æ—¥æŠ¥ç®¡ç†** (`/reports`)
   - å›¾æ ‡: Document
   - æƒé™: æ‰€æœ‰ç™»å½•ç”¨æˆ·
   
4. **æ•°æ®åˆ†æ** (`/analytics`)
   - å›¾æ ‡: TrendCharts
   - æƒé™: æ‰€æœ‰ç™»å½•ç”¨æˆ·
   
5. **çŸ¥è¯†åº“** (`/knowledge-base`)
   - å›¾æ ‡: Collection
   - æƒé™: æ‰€æœ‰ç™»å½•ç”¨æˆ·
   
6. **è®¾ç½®** (`/settings`)
   - å›¾æ ‡: Setting
   - æƒé™: ä»…è¶…çº§ç®¡ç†å‘˜

#### ç®¡ç†åŠŸèƒ½å­èœå•
- **çˆ¶èœå•**: "ç®¡ç†åŠŸèƒ½"
- **æƒé™**: ç®¡ç†å‘˜åŠä»¥ä¸Š
- **å­èœå•é¡¹**:
  1. **ç”¨æˆ·ç®¡ç†** (`/admin/users`)
     - å›¾æ ‡: User
     - æƒé™: ç®¡ç†å‘˜åŠä»¥ä¸Š
     
  2. **ç»„åˆ«ç®¡ç†** (`/admin/groups`)
     - å›¾æ ‡: UserFilled
     - æƒé™: ç®¡ç†å‘˜åŠä»¥ä¸Š
     
  3. **AIé…ç½®** (`/admin/ai`)
     - å›¾æ ‡: Cpu
     - æƒé™: ä»…è¶…çº§ç®¡ç†å‘˜
     
  4. **è‡ªå®šä¹‰æŒ‡æ ‡** (`/admin/metrics`)
     - å›¾æ ‡: DataAnalysis
     - æƒé™: ä»…è¶…çº§ç®¡ç†å‘˜

### é¡¶éƒ¨å¯¼èˆªæ 

#### å³ä¾§åŠŸèƒ½åŒº
- **ç”¨æˆ·å¤´åƒ**: æ˜¾ç¤ºå½“å‰ç”¨æˆ·ä¿¡æ¯
- **ä¸‹æ‹‰èœå•**:
  - ä¸ªäººèµ„æ–™
  - é€€å‡ºç™»å½•
- **é€šçŸ¥ä¸­å¿ƒ**: ç³»ç»Ÿé€šçŸ¥å’Œæ¶ˆæ¯
- **å¸®åŠ©ä¸­å¿ƒ**: ä½¿ç”¨å¸®åŠ©å’Œæ–‡æ¡£

---

## API æ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:8000/api/v1`
- **è®¤è¯æ–¹å¼**: Cookie-based Authentication
- **æ•°æ®æ ¼å¼**: JSON

### è®¤è¯ç›¸å…³ API

#### 1. ç”¨æˆ·ç™»å½•
```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "username": "admin"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "message": "ç™»å½•æˆåŠŸ",
  "user": {
    "id": 1,
    "username": "admin",
    "role": "super_admin",
    "identity_type": "sa",
    "full_identity": "è¶…çº§ç®¡ç†å‘˜ - SA(è¶…çº§åˆ†æå¸ˆ)",
    "ai_knowledge_branch": "ANALYTICS",
    "organization": "æ€»éƒ¨",
    "group_id": null,
    "group_name": null,
    "is_active": true,
    "is_admin": true,
    "is_super_admin": true,
    "created_at": "2024-01-01T00:00:00"
  }
}
```

#### 2. ç”¨æˆ·ç™»å‡º
```http
POST /api/v1/auth/logout
```

#### 3. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```http
GET /api/v1/auth/me
```

#### 4. è®¤è¯çŠ¶æ€æ£€æŸ¥
```http
GET /api/v1/auth/check
```

### ç”¨æˆ·ç®¡ç† API

#### 1. è·å–ç”¨æˆ·åˆ—è¡¨
```http
GET /api/v1/users?page=1&size=10&search=keyword&role=admin&identity_type=cc
```

#### 2. è·å–å•ä¸ªç”¨æˆ·
```http
GET /api/v1/users/{user_id}
```

#### 3. æ›´æ–°ç”¨æˆ·
```http
PUT /api/v1/users/{user_id}
Content-Type: application/json

{
  "role": "admin",
  "identity_type": "ss",
  "organization": "æ€»éƒ¨",
  "is_active": true
}
```

#### 4. åˆ é™¤ç”¨æˆ·
```http
DELETE /api/v1/users/{user_id}
```

### ç”¨æˆ·ç»„ç®¡ç† API

#### 1. åˆ›å»ºç”¨æˆ·ç»„
```http
POST /api/v1/groups
Content-Type: application/json

{
  "name": "å¼€å‘ç»„",
  "description": "è´Ÿè´£ç³»ç»Ÿå¼€å‘çš„å›¢é˜Ÿ"
}
```

#### 2. è·å–ç”¨æˆ·ç»„åˆ—è¡¨
```http
GET /api/v1/groups?page=1&size=10&search=keyword
```

#### 3. è·å–å•ä¸ªç”¨æˆ·ç»„
```http
GET /api/v1/groups/{group_id}
```

#### 4. æ›´æ–°ç”¨æˆ·ç»„
```http
PUT /api/v1/groups/{group_id}
Content-Type: application/json

{
  "name": "æ›´æ–°åçš„ç»„å",
  "description": "æ›´æ–°åçš„æè¿°"
}
```

#### 5. åˆ é™¤ç”¨æˆ·ç»„
```http
DELETE /api/v1/groups/{group_id}
```

### ä»»åŠ¡ç®¡ç† API

#### 1. åˆ›å»ºä»»åŠ¡
```http
POST /api/v1/tasks
Content-Type: application/json

{
  "title": "æœˆåº¦é”€å”®ç»Ÿè®¡",
  "description": "ç»Ÿè®¡æœ¬æœˆå„éƒ¨é—¨é”€å”®æ•°æ®",
  "task_type": "amount",
  "priority": "high",
  "assignment_type": "group",
  "assigned_group_id": 1,
  "due_date": "2024-12-31T23:59:59",
  "target_amount": 100000.00,
  "allow_multiple_submissions": false
}
```

#### 2. è·å–ä»»åŠ¡åˆ—è¡¨
```http
GET /api/v1/tasks?page=1&size=10&status=pending&assigned_to_me=true&task_type=jielong
```

#### 3. è·å–ä»»åŠ¡è¯¦æƒ…
```http
GET /api/v1/tasks/{task_id}
```

#### 4. æ›´æ–°ä»»åŠ¡
```http
PUT /api/v1/tasks/{task_id}
Content-Type: application/json

{
  "title": "æ›´æ–°åçš„ä»»åŠ¡æ ‡é¢˜",
  "description": "æ›´æ–°åçš„ä»»åŠ¡æè¿°",
  "status": "processing",
  "priority": "urgent"
}
```

#### 5. åˆ é™¤ä»»åŠ¡
```http
DELETE /api/v1/tasks/{task_id}
```

### æ—¥æŠ¥ç®¡ç† API

#### 1. åˆ›å»ºæ—¥æŠ¥
```http
POST /api/v1/reports
Content-Type: application/json

{
  "report_date": "2024-01-15",
  "summary": "ä»Šæ—¥å®Œæˆäº†ç”¨æˆ·ç®¡ç†æ¨¡å—çš„å¼€å‘",
  "completed_tasks": "å®Œæˆç”¨æˆ·ç®¡ç†æ¨¡å—å¼€å‘\nä¿®å¤ç™»å½•é¡µé¢bug",
  "task_progress": "ç”¨æˆ·ç®¡ç†æ¨¡å—: 100%\nä»»åŠ¡åˆ†é…åŠŸèƒ½: 80%",
  "call_count": 15,
  "call_duration": 120.5,
  "work_hours": 8.0,
  "efficiency_score": 85,
  "achievements": "æˆåŠŸå®Œæˆç”¨æˆ·ç®¡ç†æ¨¡å—",
  "challenges": "é‡åˆ°æƒé™æ§åˆ¶çš„å¤æ‚æ€§é—®é¢˜",
  "tomorrow_plan": "å¼€å§‹ä»»åŠ¡ç®¡ç†æ¨¡å—çš„å¼€å‘"
}
```

#### 2. è·å–æ—¥æŠ¥åˆ—è¡¨
```http
GET /api/v1/reports?page=1&size=10&date_from=2024-01-01&date_to=2024-12-31
```

#### 3. è·å–æ—¥æŠ¥è¯¦æƒ…
```http
GET /api/v1/reports/{report_id}
```

#### 4. æ›´æ–°æ—¥æŠ¥
```http
PUT /api/v1/reports/{report_id}
Content-Type: application/json

{
  "summary": "æ›´æ–°åçš„å·¥ä½œæ‘˜è¦",
  "work_hours": 8.5,
  "efficiency_score": 90
}
```

#### 5. åˆ é™¤æ—¥æŠ¥
```http
DELETE /api/v1/reports/{report_id}
```

#### 6. AI åˆ†ææ—¥æŠ¥
```http
POST /api/v1/reports/{report_id}/ai-analysis
```

### æ•°æ®åˆ†æ API

#### 1. ä»ªè¡¨æ¿æ•°æ®
```http
GET /api/v1/analytics/dashboard
```

#### 2. ä»»åŠ¡ç»Ÿè®¡
```http
GET /api/v1/analytics/task-stats
```

#### 3. ä»»åŠ¡è¶‹åŠ¿
```http
GET /api/v1/tasks/weekly-trend
```

#### 4. ç»Ÿè®¡æ¦‚è§ˆ
```http
GET /api/v1/stats/overview
```

### AI ç®¡ç† API

#### 1. åˆ›å»º AI ä»£ç†
```http
POST /api/v1/ai/agents
Content-Type: application/json

{
  "name": "ä»»åŠ¡åˆ†æåŠ©æ‰‹",
  "description": "ä¸“é—¨ç”¨äºåˆ†æä»»åŠ¡å®Œæˆæƒ…å†µ",
  "model": "gpt-4",
  "system_prompt": "ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡åˆ†æä¸“å®¶...",
  "is_active": true
}
```

#### 2. è·å– AI ä»£ç†åˆ—è¡¨
```http
GET /api/v1/ai/agents
```

#### 3. è·å–å•ä¸ª AI ä»£ç†
```http
GET /api/v1/ai/agents/{agent_id}
```

#### 4. æ›´æ–° AI ä»£ç†
```http
PUT /api/v1/ai/agents/{agent_id}
Content-Type: application/json

{
  "name": "æ›´æ–°åçš„ä»£ç†åç§°",
  "description": "æ›´æ–°åçš„æè¿°",
  "is_active": false
}
```

#### 5. åˆ é™¤ AI ä»£ç†
```http
DELETE /api/v1/ai/agents/{agent_id}
```

#### 6. åˆ›å»º AI åŠŸèƒ½
```http
POST /api/v1/ai/functions
Content-Type: application/json

{
  "name": "analyze_task_completion",
  "description": "åˆ†æä»»åŠ¡å®Œæˆæƒ…å†µ",
  "agent_id": 1,
  "parameters_schema": {
    "type": "object",
    "properties": {
      "task_id": {"type": "integer"},
      "analysis_type": {"type": "string"}
    }
  }
}
```

#### 7. è·å– AI åŠŸèƒ½åˆ—è¡¨
```http
GET /api/v1/ai/functions
```

#### 8. æ›´æ–° AI åŠŸèƒ½
```http
PUT /api/v1/ai/functions/{function_id}
```

#### 9. AI åŠŸèƒ½è°ƒç”¨
```http
POST /api/v1/ai/call
Content-Type: application/json

{
  "agent_id": 1,
  "function_name": "analyze_task_completion",
  "parameters": {
    "task_id": 123,
    "analysis_type": "efficiency"
  }
}
```

#### 10. è·å– AI è°ƒç”¨æ—¥å¿—
```http
GET /api/v1/ai/logs?page=1&size=20&agent_id=1&status=success
```

#### 11. è·å– AI ç»Ÿè®¡ä¿¡æ¯
```http
GET /api/v1/ai/stats
```

### ç³»ç»Ÿè®¾ç½® API

#### 1. è·å– AI è®¾ç½®
```http
GET /api/v1/settings/ai
```

#### 2. æ›´æ–° AI è®¾ç½®
```http
PUT /api/v1/settings/ai
Content-Type: application/json

{
  "openai_api_key": "sk-...",
  "default_model": "gpt-4",
  "max_tokens": 2000,
  "temperature": 0.7
}
```

#### 3. è·å–ç³»ç»Ÿè®¾ç½®
```http
GET /api/v1/settings/system
```

#### 4. æ›´æ–°ç³»ç»Ÿè®¾ç½®
```http
PUT /api/v1/settings/system
Content-Type: application/json

{
  "system_name": "OPSIGHT",
  "max_file_size": 10485760,
  "session_timeout": 86400
}
```

---

## æƒé™æ§åˆ¶ç³»ç»Ÿ

### è§’è‰²å®šä¹‰
- **super_admin**: è¶…çº§ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
- **admin**: ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰ç”¨æˆ·å’Œä»»åŠ¡ç®¡ç†æƒé™
- **user**: æ™®é€šç”¨æˆ·ï¼Œæ‹¥æœ‰åŸºç¡€åŠŸèƒ½æƒé™

### èº«ä»½ç±»å‹
- **CC**: é¡¾é—® (Consultant)
- **SS**: ç­ä¸»ä»» (Study Supervisor)
- **LP**: è‹±æ–‡è¾…å¯¼ (Language Partner)
- **SA**: è¶…çº§åˆ†æå¸ˆ (Super Analyst)

### æƒé™çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | æ™®é€šç”¨æˆ· | ç®¡ç†å‘˜ | è¶…çº§ç®¡ç†å‘˜ |
|---------|---------|--------|-----------|
| æŸ¥çœ‹ä»ªè¡¨æ¿ | âœ… | âœ… | âœ… |
| æŸ¥çœ‹ä»»åŠ¡ | âœ… | âœ… | âœ… |
| å‚ä¸ä»»åŠ¡ | âœ… | âœ… | âœ… |
| åˆ›å»ºä»»åŠ¡ | âŒ | âœ… | âœ… |
| åˆ†é…ä»»åŠ¡ | âŒ | âœ… | âœ… |
| åˆ é™¤ä»»åŠ¡ | âŒ | âœ… | âœ… |
| å†™æ—¥æŠ¥ | âœ… | âœ… | âœ… |
| æŸ¥çœ‹ä»–äººæ—¥æŠ¥ | âŒ | âœ… | âœ… |
| AI åˆ†ææ—¥æŠ¥ | âœ… | âœ… | âœ… |
| æ•°æ®åˆ†æ | âœ… | âœ… | âœ… |
| ç”¨æˆ·ç®¡ç† | âŒ | âœ… | âœ… |
| ç»„åˆ«ç®¡ç† | âŒ | âœ… | âœ… |
| AI é…ç½® | âŒ | âŒ | âœ… |
| ç³»ç»Ÿè®¾ç½® | âŒ | âŒ | âœ… |

### æƒé™æŒ‡ä»¤ä½¿ç”¨

#### v-can æŒ‡ä»¤
```vue
<!-- åŸºç¡€æƒé™æ£€æŸ¥ -->
<el-button v-can="'tasks:create'">åˆ›å»ºä»»åŠ¡</el-button>

<!-- åŸºäºèµ„æºçš„æƒé™æ£€æŸ¥ -->
<el-button v-can:task.edit="task">ç¼–è¾‘ä»»åŠ¡</el-button>

<!-- åŸºäºè§’è‰²çš„æƒé™æ£€æŸ¥ -->
<div v-if="isAdmin">ç®¡ç†å‘˜åŠŸèƒ½</div>
```

---

## çŠ¶æ€ç®¡ç†è¯¦è§£

### Auth Store (è®¤è¯çŠ¶æ€)

```javascript
// stores/auth.js
export const useAuthStore = defineStore('auth', {
  state: () => ({
    user: null,
    isAuthenticated: false,
    loading: false
  }),
  
  getters: {
    isAdmin: (state) => {
      return state.user && ['admin', 'super_admin'].includes(state.user.role)
    },
    isSuperAdmin: (state) => {
      return state.user && state.user.role === 'super_admin'
    }
  },
  
  actions: {
    async login(credentials) {
      this.loading = true
      try {
        const response = await api.post('/auth/login', credentials)
        this.user = response.data.user
        this.isAuthenticated = true
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem('user', JSON.stringify(this.user))
        localStorage.setItem('token', 'authenticated')
        
        return true
      } catch (error) {
        ElMessage.error(error.response?.data?.detail || 'ç™»å½•å¤±è´¥')
        return false
      } finally {
        this.loading = false
      }
    },
    
    async logout() {
      try {
        await api.post('/auth/logout')
      } catch (error) {
        console.error('Logout error:', error)
      } finally {
        this.user = null
        this.isAuthenticated = false
        localStorage.removeItem('user')
        localStorage.removeItem('token')
      }
    },
    
    async checkAuth() {
      try {
        const response = await api.get('/auth/me')
        this.user = response.data
        this.isAuthenticated = true
        return true
      } catch (error) {
        this.user = null
        this.isAuthenticated = false
        return false
      }
    }
  }
})
```

### Task Store (ä»»åŠ¡çŠ¶æ€)

```javascript
// stores/task.js
export const useTaskStore = defineStore('task', {
  state: () => ({
    tasks: [],
    currentTask: null,
    loading: false,
    filters: {
      status: '',
      priority: '',
      task_type: '',
      search: ''
    },
    pagination: {
      page: 1,
      size: 10,
      total: 0
    }
  }),
  
  actions: {
    async fetchTasks(params = {}) {
      this.loading = true
      try {
        const response = await api.get('/tasks', { 
          params: { ...this.filters, ...this.pagination, ...params }
        })
        this.tasks = response.data
        return response.data
      } catch (error) {
        ElMessage.error('è·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥')
        throw error
      } finally {
        this.loading = false
      }
    },
    
    async createTask(taskData) {
      try {
        const response = await api.post('/tasks', taskData)
        await this.fetchTasks()
        ElMessage.success('ä»»åŠ¡åˆ›å»ºæˆåŠŸ')
        return response.data
      } catch (error) {
        ElMessage.error(error.response?.data?.detail || 'åˆ›å»ºä»»åŠ¡å¤±è´¥')
        throw error
      }
    },
    
    async updateTask(taskId, taskData) {
      try {
        const response = await api.put(`/tasks/${taskId}`, taskData)
        await this.fetchTasks()
        ElMessage.success('ä»»åŠ¡æ›´æ–°æˆåŠŸ')
        return response.data
      } catch (error) {
        ElMessage.error(error.response?.data?.detail || 'æ›´æ–°ä»»åŠ¡å¤±è´¥')
        throw error
      }
    },
    
    async deleteTask(taskId) {
      try {
        await api.delete(`/tasks/${taskId}`)
        await this.fetchTasks()
        ElMessage.success('ä»»åŠ¡åˆ é™¤æˆåŠŸ')
      } catch (error) {
        ElMessage.error(error.response?.data?.detail || 'åˆ é™¤ä»»åŠ¡å¤±è´¥')
        throw error
      }
    }
  }
})
```

---

## ç»„ä»¶è®¾è®¡è§„èŒƒ

### å¸ƒå±€ç»„ä»¶

#### AppLayout.vue
- **åŠŸèƒ½**: ä¸»å¸ƒå±€å®¹å™¨ï¼ŒåŒ…å«å¤´éƒ¨ã€ä¾§è¾¹æ å’Œå†…å®¹åŒºåŸŸ
- **å“åº”å¼**: æ”¯æŒç§»åŠ¨ç«¯é€‚é…
- **çŠ¶æ€ç®¡ç†**: æ§åˆ¶ä¾§è¾¹æ æŠ˜å çŠ¶æ€

#### AppHeader.vue
- **åŠŸèƒ½**: é¡¶éƒ¨å¯¼èˆªæ ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œæ“ä½œèœå•
- **ç»„ä»¶**: ç”¨æˆ·å¤´åƒã€ä¸‹æ‹‰èœå•ã€é€šçŸ¥ä¸­å¿ƒ
- **äº¤äº’**: ç”¨æˆ·ç™»å‡ºã€ä¸ªäººèµ„æ–™è·³è½¬

#### AppSidebar.vue
- **åŠŸèƒ½**: ä¾§è¾¹å¯¼èˆªèœå•
- **æƒé™æ§åˆ¶**: åŸºäºç”¨æˆ·è§’è‰²åŠ¨æ€æ˜¾ç¤ºèœå•é¡¹
- **çŠ¶æ€åŒæ­¥**: ä¸è·¯ç”±çŠ¶æ€åŒæ­¥ï¼Œé«˜äº®å½“å‰é¡µé¢

### ä¸šåŠ¡ç»„ä»¶

#### TaskChart.vue
- **åŠŸèƒ½**: ä»»åŠ¡ç»Ÿè®¡å›¾è¡¨
- **å›¾è¡¨ç±»å‹**: æŸ±çŠ¶å›¾ã€é¥¼å›¾ã€æŠ˜çº¿å›¾
- **äº¤äº’**: æ”¯æŒæ•°æ®ç­›é€‰å’Œæ—¶é—´èŒƒå›´é€‰æ‹©

#### UserManagement.vue
- **åŠŸèƒ½**: ç”¨æˆ·ç®¡ç†ç»„ä»¶
- **æ“ä½œ**: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å¯ç”¨/ç¦ç”¨ç”¨æˆ·
- **æƒé™**: åŸºäºè§’è‰²æ§åˆ¶æ“ä½œæƒé™

---

## å¼€å‘å’Œéƒ¨ç½²

### å¼€å‘ç¯å¢ƒå¯åŠ¨

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
python start_opsight.py
```

#### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨
```bash
# å¯åŠ¨åç«¯
cd backend
python -m uvicorn app.main:app --reload --port 8000

# å¯åŠ¨å‰ç«¯
cd frontend
npm run dev
```

### ç¯å¢ƒé…ç½®

#### å‰ç«¯ç¯å¢ƒå˜é‡ (.env)
```env
VITE_API_BASE_URL=/api/v1
VITE_APP_TITLE=OPSIGHT æ™ºèƒ½ä»»åŠ¡ä¸æ—¥æŠ¥ç®¡ç†ç³»ç»Ÿ
```

#### åç«¯ç¯å¢ƒå˜é‡ (.env)
```env
DATABASE_URL=sqlite:///./simple_app.db
SECRET_KEY=your-secret-key-here
DEBUG=true
OPENAI_API_KEY=your-openai-api-key
```

### æ•°æ®åº“ç®¡ç†

#### æ•°æ®åº“æ–‡ä»¶
- **ä½ç½®**: `backend/simple_app.db`
- **ç±»å‹**: SQLite
- **è‡ªåŠ¨åˆ›å»º**: é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„

#### ä¸»è¦æ•°æ®è¡¨
- **users**: ç”¨æˆ·ä¿¡æ¯è¡¨
- **user_groups**: ç”¨æˆ·ç»„è¡¨
- **tasks**: ä»»åŠ¡è¡¨
- **daily_reports**: æ—¥æŠ¥è¡¨
- **ai_agents**: AI ä»£ç†è¡¨
- **ai_functions**: AI åŠŸèƒ½è¡¨
- **ai_call_logs**: AI è°ƒç”¨æ—¥å¿—è¡¨

---

## æµ‹è¯•å’Œè´¨é‡ä¿è¯

### æµ‹è¯•è¦†ç›–
- **å•å…ƒæµ‹è¯•**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æµ‹è¯•
- **é›†æˆæµ‹è¯•**: API æ¥å£æµ‹è¯•
- **ç«¯åˆ°ç«¯æµ‹è¯•**: å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•
- **æ€§èƒ½æµ‹è¯•**: ç³»ç»Ÿæ€§èƒ½å’Œè´Ÿè½½æµ‹è¯•

### æµ‹è¯•å‘½ä»¤
```bash
# åç«¯æµ‹è¯•
cd backend
python -m pytest tests/

# å‰ç«¯æµ‹è¯•
cd frontend
npm run test

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

---

## å®‰å…¨è€ƒè™‘

### è®¤è¯å®‰å…¨
- Cookie è®¾ç½® HttpOnly å’Œ Secure æ ‡å¿—
- ä¼šè¯è¶…æ—¶è‡ªåŠ¨ç™»å‡º
- é˜²æ­¢ CSRF æ”»å‡»

### æƒé™æ§åˆ¶
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
- API çº§åˆ«çš„æƒé™éªŒè¯
- å‰ç«¯æƒé™æŒ‡ä»¤æ§åˆ¶

### æ•°æ®å®‰å…¨
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- SQL æ³¨å…¥é˜²æŠ¤
- XSS æ”»å‡»é˜²æŠ¤

---

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- ç»„ä»¶æ‡’åŠ è½½
- å›¾ç‰‡æ‡’åŠ è½½
- ä»£ç åˆ†å‰²
- ç¼“å­˜ç­–ç•¥

### åç«¯ä¼˜åŒ–
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- API å“åº”ç¼“å­˜
- åˆ†é¡µæŸ¥è¯¢
- å¼‚æ­¥å¤„ç†

---

## å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. ç™»å½•é—®é¢˜
**é—®é¢˜**: ç™»å½•åé¡µé¢ä¸è·³è½¬
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ Cookie è®¾ç½®å’Œè·¯ç”±å®ˆå«é…ç½®

### 2. æƒé™é—®é¢˜
**é—®é¢˜**: ç”¨æˆ·æ— æ³•è®¿é—®æŸäº›åŠŸèƒ½
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ç”¨æˆ·è§’è‰²è®¾ç½®å’Œæƒé™é…ç½®

### 3. API è¿æ¥é—®é¢˜
**é—®é¢˜**: å‰ç«¯æ— æ³•è¿æ¥åç«¯ API
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ä»£ç†é…ç½®å’Œ CORS è®¾ç½®

### 4. æ•°æ®åŠ è½½é—®é¢˜
**é—®é¢˜**: é¡µé¢æ•°æ®åŠ è½½ç¼“æ…¢
**è§£å†³æ–¹æ¡ˆ**: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢å’Œå®ç°åˆ†é¡µåŠ è½½

---

## ç‰ˆæœ¬å†å²

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç³»ç»Ÿ
- âœ… å››ç§ç±»å‹çš„ä»»åŠ¡ç®¡ç†åŠŸèƒ½
- âœ… æ™ºèƒ½æ—¥æŠ¥ç®¡ç†ä¸ AI åˆ†æ
- âœ… æ•°æ®åˆ†æå’Œå¯è§†åŒ–ä»ªè¡¨æ¿
- âœ… AI é›†æˆå’Œé…ç½®ç®¡ç†
- âœ… å“åº”å¼ Web ç•Œé¢
- âœ… åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶

### è®¡åˆ’åŠŸèƒ½
- ğŸ“§ é‚®ä»¶é€šçŸ¥ç³»ç»Ÿ
- ğŸ“± ç§»åŠ¨ç«¯ App
- ğŸ”„ å®æ—¶æ•°æ®åŒæ­¥
- ğŸ“Š æ›´å¤šå›¾è¡¨ç±»å‹å’Œåˆ†æç»´åº¦
- ğŸŒ å¤šè¯­è¨€æ”¯æŒ
- ğŸ”Œ ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ

---

## è”ç³»ä¿¡æ¯

**é¡¹ç›®ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**æŠ€æœ¯æ”¯æŒ**: å†…éƒ¨æŠ€æœ¯æ”¯æŒ  
**æ–‡æ¡£æ›´æ–°**: 2025å¹´1æœˆ15æ—¥

---

*æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº† OPSIGHT æ™ºèƒ½ä»»åŠ¡ä¸æ—¥æŠ¥ç®¡ç†ç³»ç»Ÿçš„å®Œæ•´æŠ€æœ¯æ¶æ„ã€å‰ç«¯é¡µé¢è®¾è®¡ã€äº¤äº’é€»è¾‘å’Œ API æ¥å£ã€‚åŒ…å«äº†æ‰€æœ‰é¡µé¢çš„æŒ‰é’®ç‚¹å‡»å“åº”å’Œç”¨æˆ·äº¤äº’æµç¨‹ï¼Œä¸ºå¼€å‘å’Œç»´æŠ¤æä¾›å…¨é¢çš„æŠ€æœ¯å‚è€ƒã€‚*